/*! For license information please see main.f5bd37c1.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,h(x,y.prototype),x.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,a)&&!j.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:k.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function D(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===s?"."+D(l,0):s,_(i)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),E(i,t,a,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+D(o=e[c],c);l+=E(o,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,a,u=s+D(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],a=0;return E(e,r,"","",function(e){return t.call(n,e,a++)}),r}function F(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},T={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:T,ReactCurrentOwner:k};function I(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=I,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=h({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!j.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:F}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=I,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<a&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,p=3,m=!1,h=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,x(e),!h)if(null!==r(c))h=!0,T(w);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function w(e,n){h=!1,g&&(g=!1,v(S),S=-1),m=!0;var s=p;try{for(x(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!E());){var i=f.callback;if("function"===typeof i){f.callback=null,p=f.priorityLevel;var o=i(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?f.callback=o:f===r(c)&&a(c),x(n)}else a(c);f=r(c)}if(null!==f)var l=!0;else{var d=r(u);null!==d&&O(_,d.startTime-n),l=!1}return l}finally{f=null,p=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,j=!1,N=null,S=-1,C=5,D=-1;function E(){return!(t.unstable_now()-D<C)}function A(){if(null!==N){var e=t.unstable_now();D=e;var n=!0;try{n=N(!0,e)}finally{n?k():(j=!1,N=null)}}else j=!1}if("function"===typeof b)k=function(){b(A)};else if("undefined"!==typeof MessageChannel){var F=new MessageChannel,P=F.port2;F.port1.onmessage=A,k=function(){P.postMessage(null)}}else k=function(){y(A,0)};function T(e){N=e,j||(j=!0,k())}function O(e,n){S=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||m||(h=!0,T(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(S),S=-1):g=!0,O(_,s-i))):(e.sortIndex=o,n(c,e),h||m||(h=!0,T(w))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},484:(e,t,n)=>{n.r(t),n.d(t,{computeDayIndex:()=>le,getPlanDate:()=>ie,getPlanWindowBounds:()=>ue,loadPlanFromJson:()=>se,rowsForDay:()=>ce,toISODate:()=>oe});const r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function a(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const s={date:a({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:a({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:a({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},i={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function o(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function l(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const i=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}var c;const u={code:"en-US",formatDistance:(e,t,n)=>{let a;const s=r[e];return a="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},formatLong:s,formatRelative:(e,t,n,r)=>i[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:o({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:o({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:o({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:o({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:o({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(c={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(c.matchPattern);if(!n)return null;const r=n[0],a=e.match(c.parsePattern);if(!a)return null;let s=c.valueCallback?c.valueCallback(a[0]):a[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(r.length)}}),era:l({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:l({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:l({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:l({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:l({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let d={};function f(){return d}Math.pow(10,8);const p=6048e5,m=864e5;function h(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function g(e){const t=h(e);return t.setHours(0,0,0,0),t}function y(e){const t=h(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function v(e,t){const n=g(e),r=g(t),a=+n-y(n),s=+r-y(r);return Math.round((a-s)/m)}function b(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function x(e){const t=h(e),n=b(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function _(e){const t=h(e);return v(t,x(t))+1}function w(e,t){var n,r,a,s,i,o;const l=f(),c=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==a?a:l.weekStartsOn)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:0,u=h(e),d=u.getDay(),p=(d<c?7:0)+d-c;return u.setDate(u.getDate()-p),u.setHours(0,0,0,0),u}function k(e){return w(e,{weekStartsOn:1})}function j(e){const t=h(e),n=t.getFullYear(),r=b(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=k(r),s=b(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const i=k(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function N(e){const t=j(e),n=b(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),k(n)}function S(e){const t=h(e),n=+k(t)-+N(t);return Math.round(n/p)+1}function C(e,t){var n,r,a,s,i,o;const l=h(e),c=l.getFullYear(),u=f(),d=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==a?a:u.firstWeekContainsDate)&&void 0!==r?r:null===(o=u.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,p=b(e,0);p.setFullYear(c+1,0,d),p.setHours(0,0,0,0);const m=w(p,t),g=b(e,0);g.setFullYear(c,0,d),g.setHours(0,0,0,0);const y=w(g,t);return l.getTime()>=m.getTime()?c+1:l.getTime()>=y.getTime()?c:c-1}function D(e,t){var n,r,a,s,i,o;const l=f(),c=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==a?a:l.firstWeekContainsDate)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,u=C(e,t),d=b(e,0);d.setFullYear(u,0,c),d.setHours(0,0,0,0);return w(d,t)}function E(e,t){const n=h(e),r=+w(n,t)-+D(n,t);return Math.round(r/p)+1}function A(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const F={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return A("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):A(n+1,2)},d:(e,t)=>A(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>A(e.getHours()%12||12,t.length),H:(e,t)=>A(e.getHours(),t.length),m:(e,t)=>A(e.getMinutes(),t.length),s:(e,t)=>A(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return A(Math.trunc(r*Math.pow(10,n-3)),t.length)}},P="midnight",T="noon",O="morning",I="afternoon",R="evening",M="night",L={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return F.y(e,t)},Y:function(e,t,n,r){const a=C(e,r),s=a>0?a:1-a;if("YY"===t){return A(s%100,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):A(s,t.length)},R:function(e,t){return A(j(e),t.length)},u:function(e,t){return A(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return A(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return A(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return F.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return A(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=E(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):A(a,t.length)},I:function(e,t,n){const r=S(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):A(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):F.d(e,t)},D:function(e,t,n){const r=_(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):A(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return A(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return A(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return A(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(a=12===r?T:0===r?P:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(a=r>=17?R:r>=12?I:r>=4?O:M,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return F.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):F.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):A(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):A(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):F.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):F.s(e,t)},S:function(e,t){return F.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return B(r);case"XXXX":case"XX":return V(r);default:return V(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return B(r);case"xxxx":case"xx":return V(r);default:return V(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+z(r,":");default:return"GMT"+V(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+z(r,":");default:return"GMT"+V(r,":")}},t:function(e,t,n){return A(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return A(e.getTime(),t.length)}};function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return 0===s?n+String(a):n+String(a)+t+A(s,2)}function B(e,t){if(e%60===0){return(e>0?"-":"+")+A(Math.abs(e)/60,2)}return V(e,t)}function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+A(Math.trunc(r/60),2)+t+A(r%60,2)}const U=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},W=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},q={p:W,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return U(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",U(r,t)).replace("{{time}}",W(a,t))}},H=/^D+$/,$=/^Y+$/,Z=["D","DD","YY","YYYY"];function J(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Y(e){if(!J(e)&&"number"!==typeof e)return!1;const t=h(e);return!isNaN(Number(t))}const K=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Q=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,G=/^'([^]*?)'?$/,X=/''/g,ee=/[a-zA-Z]/;function te(e,t,n){var r,a,s,i,o,l,c,d,p,m,g,y,v,b;const x=f(),_=null!==(r=null!==(a=null===n||void 0===n?void 0:n.locale)&&void 0!==a?a:x.locale)&&void 0!==r?r:u,w=null!==(s=null!==(i=null!==(o=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==o?o:x.firstWeekContainsDate)&&void 0!==i?i:null===(d=x.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==s?s:1,k=null!==(p=null!==(m=null!==(g=null!==(y=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==y?y:null===n||void 0===n||null===(v=n.locale)||void 0===v||null===(v=v.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==g?g:x.weekStartsOn)&&void 0!==m?m:null===(b=x.locale)||void 0===b||null===(b=b.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==p?p:0,j=h(e);if(!Y(j))throw new RangeError("Invalid time value");let N=t.match(Q).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,q[t])(e,_.formatLong)}return e}).join("").match(K).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:ne(e)};if(L[t])return{isToken:!0,value:e};if(t.match(ee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});_.localize.preprocessor&&(N=_.localize.preprocessor(j,N));const S={firstWeekContainsDate:w,weekStartsOn:k,locale:_};return N.map(r=>{if(!r.isToken)return r.value;const a=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return $.test(e)}(a))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return H.test(e)}(a))||function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),Z.includes(e))throw new RangeError(r)}(a,t,String(e));return(0,L[a[0]])(j,a,_.localize,S)}).join("")}function ne(e){const t=e.match(G);return t?t[1].replace(X,"'"):e}var re=n(488);const ae=[{Day:1,Person:"P1",constitution_provision:0,statute_section:7,rule_of_court:2,agency_circular:0,doj_issuance:0,executive_issuance:0,rights_advisory:1,city_ordinance_section:0,Total:10},{Day:1,Person:"P2",constitution_provision:1,statute_section:2,rule_of_court:7,agency_circular:0,doj_issuance:0,executive_issuance:0,rights_advisory:0,city_ordinance_section:0,Total:10},{Day:1,Person:"P3",constitution_provision:0,statute_section:3,rule_of_court:2,agency_circular:0,doj_issuance:0,executive_issuance:0,rights_advisory:5,city_ordinance_section:0,Total:10},{Day:1,Person:"P4",constitution_provision:0,statute_section:5,rule_of_court:0,agency_circular:2,doj_issuance:2,executive_issuance:1,rights_advisory:0,city_ordinance_section:0,Total:10},{Day:1,Person:"P5",constitution_provision:2,statute_section:4,rule_of_court:3,agency_circular:0,doj_issuance:0,executive_issuance:0,rights_advisory:1,city_ordinance_section:0,Total:10},{Day:2,Person:"P1",constitution_provision:1,statute_section:6,rule_of_court:2,agency_circular:0,doj_issuance:0,executive_issuance:0,rights_advisory:1,city_ordinance_section:0,Total:10},{Day:2,Person:"P2",constitution_provision:0,statute_section:3,rule_of_court:6,agency_circular:0,doj_issuance:0,executive_issuance:0,rights_advisory:1,city_ordinance_section:0,Total:10},{Day:2,Person:"P3",constitution_provision:1,statute_section:2,rule_of_court:3,agency_circular:0,doj_issuance:0,executive_issuance:0,rights_advisory:4,city_ordinance_section:0,Total:10},{Day:2,Person:"P4",constitution_provision:0,statute_section:4,rule_of_court:0,agency_circular:3,doj_issuance:2,executive_issuance:1,rights_advisory:0,city_ordinance_section:0,Total:10},{Day:2,Person:"P5",constitution_provision:1,statute_section:5,rule_of_court:2,agency_circular:0,doj_issuance:0,executive_issuance:0,rights_advisory:2,city_ordinance_section:0,Total:10}];async function se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/Civilify_KB30_Schedule_CorePH.json";const t=e.includes("?")?"".concat(e,"&_=").concat(Date.now()):"".concat(e,"?_=").concat(Date.now());try{const e=await fetch(t,{cache:"no-store"});if(!e.ok)throw new Error("Failed to fetch plan JSON: ".concat(e.status));const n=await e.json();return Array.isArray(n)&&n.length>0?n:ae}catch(n){return console.error("loadPlanFromJson failed; using embedded plan",n),ae}}function ie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(e);if(t.getHours()<8){const e=new Date(t);return e.setDate(t.getDate()-1),new Date(e.getFullYear(),e.getMonth(),e.getDate())}return new Date(t.getFullYear(),t.getMonth(),t.getDate())}function oe(e){return te(e,"yyyy-MM-dd")}function le(e,t){const n=ie(e),r=t?new Date(t):re.j;return Math.max(1,Math.min(30,v(n,r)+1))}function ce(e,t){return e.filter(e=>Number(e.Day)===Number(t))}function ue(e){const t=ie(e),n=new Date(t);n.setHours(8,0,0,0);const r=new Date(n);return r.setDate(r.getDate()+1),{start:n,end:r}}},488:(e,t,n)=>{n.d(t,{j:()=>r});const r=new Date("2025-09-04")},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),a=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function h(e,t,n,r,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(m,e)||!d.call(p,e)&&(f.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var T=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var R,M=Object.assign;function L(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=r.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function V(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case N:return"Profiler";case j:return"StrictMode";case E:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case D:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case F:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function G(e,t){Q(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function he(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ge=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,we=null,ke=null;function je(e){if(e=_a(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=ka(t),_e(e.stateNode,e.type,t))}}function Ne(e){we?ke?ke.push(e):ke=[e]:we=e}function Se(){if(we){var e=we,t=ke;if(ke=we=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Ce(e,t){return e(t)}function De(){}var Ee=!1;function Ae(e,t,n){if(Ee)return e(t,n);Ee=!0;try{return Ce(e,t,n)}finally{Ee=!1,(null!==we||null!==ke)&&(De(),Se())}}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=ka(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Te={};Object.defineProperty(Te,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Te,Te),window.removeEventListener("test",Te,Te)}catch(aa){Pe=!1}function Oe(e,t,n,r,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ie=!1,Re=null,Me=!1,Le=null,ze={onError:function(e){Ie=!0,Re=e}};function Be(e,t,n,r,a,s,i,o,l){Ie=!1,Re=null,Oe.apply(ze,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return We(a),e;if(i===r)return We(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var $e=a.unstable_scheduleCallback,Ze=a.unstable_cancelCallback,Je=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Ke=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Ge=a.unstable_ImmediatePriority,Xe=a.unstable_UserBlockingPriority,et=a.unstable_NormalPriority,tt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,rt=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/ot|0)|0},it=Math.log,ot=Math.LN2;var lt=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~a;0!==o?r=ut(o):0!==(s&=i)&&(r=ut(s))}else 0!==(i=n&~a)?r=ut(i):0!==s&&(r=ut(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-st(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function ht(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,wt,kt,jt,Nt=!1,St=[],Ct=null,Dt=null,Et=null,At=new Map,Ft=new Map,Pt=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ft.delete(t.pointerId)}}function It(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=_a(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Rt(e){var t=xa(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void jt(e.priority,function(){wt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_a(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Lt(e,t,n){Mt(e)&&n.delete(t)}function zt(){Nt=!1,null!==Ct&&Mt(Ct)&&(Ct=null),null!==Dt&&Mt(Dt)&&(Dt=null),null!==Et&&Mt(Et)&&(Et=null),At.forEach(Lt),Ft.forEach(Lt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zt)))}function Vt(e){function t(t){return Bt(t,e)}if(0<St.length){Bt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Dt&&Bt(Dt,e),null!==Et&&Bt(Et,e),At.forEach(t),Ft.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Rt(n),null===n.blockedOn&&Pt.shift()}var Ut=x.ReactCurrentBatchConfig,Wt=!0;function qt(e,t,n,r){var a=vt,s=Ut.transition;Ut.transition=null;try{vt=1,$t(e,t,n,r)}finally{vt=a,Ut.transition=s}}function Ht(e,t,n,r){var a=vt,s=Ut.transition;Ut.transition=null;try{vt=4,$t(e,t,n,r)}finally{vt=a,Ut.transition=s}}function $t(e,t,n,r){if(Wt){var a=Jt(e,t,n,r);if(null===a)qr(e,t,r,Zt,n),Ot(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Ct=It(Ct,e,t,n,r,a),!0;case"dragenter":return Dt=It(Dt,e,t,n,r,a),!0;case"mouseover":return Et=It(Et,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return At.set(s,It(At.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Ft.set(s,It(Ft.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Tt.indexOf(e)){for(;null!==a;){var s=_a(a);if(null!==s&&xt(s),null===(s=Jt(e,t,n,r))&&qr(e,t,r,Zt,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Zt=null;function Jt(e,t,n,r){if(Zt=null,null!==(e=xa(e=xe(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ge:return 1;case Xe:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Kt=null,Qt=null,Gt=null;function Xt(){if(Gt)return Gt;var e,t,n=Qt,r=n.length,a="value"in Kt?Kt.value:Kt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return Gt=a.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var an,sn,on,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=rn(ln),un=M({},ln,{view:0,detail:0}),dn=rn(un),fn=M({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(an=e.screenX-on.screenX,sn=e.screenY-on.screenY):sn=an=0,on=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=rn(fn),mn=rn(M({},fn,{dataTransfer:0})),hn=rn(M({},un,{relatedTarget:0})),gn=rn(M({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(yn),bn=rn(M({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function jn(){return kn}var Nn=M({},un,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=rn(Nn),Cn=rn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=rn(M({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn})),En=rn(M({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fn=rn(An),Pn=[9,13,27,32],Tn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var In=u&&"TextEvent"in window&&!On,Rn=u&&(!Tn||On&&8<On&&11>=On),Mn=String.fromCharCode(32),Ln=!1;function zn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function qn(e,t,n,r){Ne(r),0<(t=$r(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,$n=null;function Zn(e){Lr(e,0)}function Jn(e){if(Z(wa(e)))return e}function Yn(e,t){if("change"===e)return t}var Kn=!1;if(u){var Qn;if(u){var Gn="oninput"in document;if(!Gn){var Xn=document.createElement("div");Xn.setAttribute("oninput","return;"),Gn="function"===typeof Xn.oninput}Qn=Gn}else Qn=!1;Kn=Qn&&(!document.documentMode||9<document.documentMode)}function er(){Hn&&(Hn.detachEvent("onpropertychange",tr),$n=Hn=null)}function tr(e){if("value"===e.propertyName&&Jn($n)){var t=[];qn(t,$n,e,xe(e)),Ae(Zn,t)}}function nr(e,t,n){"focusin"===e?(er(),$n=n,(Hn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn($n)}function ar(e,t){if("click"===e)return Jn(t)}function sr(e,t){if("input"===e||"change"===e)return Jn(t)}var ir="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ir(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!ir(e[a],t[a]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=cr(n,s);var i=cr(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,hr=null,gr=null,yr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==hr||hr!==J(r)||("selectionStart"in(r=hr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=$r(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},wr={},kr={};function jr(e){if(wr[e])return wr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return wr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Nr=jr("animationend"),Sr=jr("animationiteration"),Cr=jr("animationstart"),Dr=jr("transitionend"),Er=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(e,t){Er.set(e,t),l(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Tr=Ar[Pr];Fr(Tr.toLowerCase(),"on"+(Tr[0].toUpperCase()+Tr.slice(1)))}Fr(Nr,"onAnimationEnd"),Fr(Sr,"onAnimationIteration"),Fr(Cr,"onAnimationStart"),Fr("dblclick","onDoubleClick"),Fr("focusin","onFocus"),Fr("focusout","onBlur"),Fr(Dr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,o,l,c){if(Be.apply(this,arguments),Ie){if(!Ie)throw Error(s(198));var u=Re;Ie=!1,Re=null,Me||(Me=!0,Le=u)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Mr(a,o,c),s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Mr(a,o,c),s=l}}}if(Me)throw e=Le,Me=!1,Le=null,e}function zr(e,t){var n=t[ya];void 0===n&&(n=t[ya]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Vr]){e[Vr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Ir.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Yt(t)){case 1:var a=qt;break;case 4:a=Ht;break;default:a=$t}n=a.bind(null,t,n,e),a=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,a){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=xa(o)))return;if(5===(l=i.tag)||6===l){r=s=i;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=s,a=xe(n),i=[];e:{var o=Er.get(e);if(void 0!==o){var l=cn,c=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=hn;break;case"focusout":c="blur",l=hn;break;case"beforeblur":case"afterblur":l=hn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case Nr:case Sr:case Cr:l=gn;break;case Dr:l=En;break;case"scroll":l=dn;break;case"wheel":l=Fn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,f=u?null!==o?o+"Capture":null:o;u=[];for(var p,m=r;null!==m;){var h=(p=m).stateNode;if(5===p.tag&&null!==h&&(p=h,null!==f&&(null!=(h=Fe(m,f))&&u.push(Hr(m,h,p)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,a),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!xa(c)&&!c[ga])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xa(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,h="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,h="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==l?o:wa(l),p=null==c?o:wa(c),(o=new u(h,m+"leave",l,n,a)).target=d,o.relatedTarget=p,h=null,xa(a)===r&&((u=new u(f,m+"enter",c,n,a)).target=p,u.relatedTarget=d,h=u),d=h,l&&c)e:{for(f=c,m=0,p=u=l;p;p=Zr(p))m++;for(p=0,h=f;h;h=Zr(h))p++;for(;0<m-p;)u=Zr(u),m--;for(;0<p-m;)f=Zr(f),p--;for(;m--;){if(u===f||null!==f&&u===f.alternate)break e;u=Zr(u),f=Zr(f)}u=null}else u=null;null!==l&&Jr(i,o,l,u,!1),null!==c&&null!==d&&Jr(i,d,c,u,!0)}if("select"===(l=(o=r?wa(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Wn(o))if(Kn)g=sr;else{g=rr;var y=nr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?qn(i,g,n,a):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?wa(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(hr=y,gr=r,yr=null);break;case"focusout":yr=gr=hr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(i,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(i,n,a)}var v;if(Tn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Rn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(v=Xt()):(Qt="value"in(Kt=a)?Kt.value:Kt.textContent,Vn=!0)),0<(y=$r(r,b)).length&&(b=new bn(b,e,null,n,a),i.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=In?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Ln=!0,Mn);case"textInput":return(e=t.data)===Mn&&Ln?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Tn&&zn(e,t)?(e=Xt(),Gt=Qt=Kt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=$r(r,"onBeforeInput")).length&&(a=new bn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=v))}Lr(i,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $r(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Fe(e,n))&&r.unshift(Hr(e,s,a)),null!=(s=Fe(e,t))&&r.push(Hr(e,s,a))),e=e.return}return r}function Zr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jr(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Fe(n,s))&&i.unshift(Hr(n,l,o)):a||null!=(l=Fe(n,s))&&i.push(Hr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Yr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Kr,"")}function Gr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(s(425))}function Xr(){}var ea=null,na=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sa="function"===typeof setTimeout?setTimeout:void 0,ia="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof Promise?Promise:void 0,la="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oa?function(e){return oa.resolve(null).then(e).catch(ca)}:sa;function ca(e){setTimeout(function(){throw e})}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Vt(t)}function da(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function fa(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var pa=Math.random().toString(36).slice(2),ma="__reactFiber$"+pa,ha="__reactProps$"+pa,ga="__reactContainer$"+pa,ya="__reactEvents$"+pa,va="__reactListeners$"+pa,ba="__reactHandles$"+pa;function xa(e){var t=e[ma];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ga]||n[ma]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=fa(e);null!==e;){if(n=e[ma])return n;e=fa(e)}return t}n=(e=n).parentNode}return null}function _a(e){return!(e=e[ma]||e[ga])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ka(e){return e[ha]||null}var ja=[],Na=-1;function Sa(e){return{current:e}}function Ca(e){0>Na||(e.current=ja[Na],ja[Na]=null,Na--)}function Da(e,t){Na++,ja[Na]=e.current,e.current=t}var Ea={},Aa=Sa(Ea),Fa=Sa(!1),Pa=Ea;function Ta(e,t){var n=e.type.contextTypes;if(!n)return Ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ia(){Ca(Fa),Ca(Aa)}function Ra(e,t,n){if(Aa.current!==Ea)throw Error(s(168));Da(Aa,t),Da(Fa,n)}function Ma(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(s(108,W(e)||"Unknown",a));return M({},n,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Pa=Aa.current,Da(Aa,e),Da(Fa,Fa.current),!0}function za(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ma(e,t,Pa),r.__reactInternalMemoizedMergedChildContext=e,Ca(Fa),Ca(Aa),Da(Aa,e)):Ca(Fa),Da(Fa,n)}var Ba=null,Va=!1,Ua=!1;function Wa(e){null===Ba?Ba=[e]:Ba.push(e)}function qa(){if(!Ua&&null!==Ba){Ua=!0;var e=0,t=vt;try{var n=Ba;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ba=null,Va=!1}catch(a){throw null!==Ba&&(Ba=Ba.slice(e+1)),$e(Ge,qa),a}finally{vt=t,Ua=!1}}return null}var Ha=[],$a=0,Za=null,Ja=0,Ya=[],Ka=0,Qa=null,Ga=1,Xa="";function es(e,t){Ha[$a++]=Ja,Ha[$a++]=Za,Za=e,Ja=t}function ts(e,t,n){Ya[Ka++]=Ga,Ya[Ka++]=Xa,Ya[Ka++]=Qa,Qa=e;var r=Ga;e=Xa;var a=32-st(r)-1;r&=~(1<<a),n+=1;var s=32-st(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Ga=1<<32-st(t)+a|n<<a|r,Xa=s+e}else Ga=1<<s|n<<a|r,Xa=e}function ns(e){null!==e.return&&(es(e,1),ts(e,1,0))}function rs(e){for(;e===Za;)Za=Ha[--$a],Ha[$a]=null,Ja=Ha[--$a],Ha[$a]=null;for(;e===Qa;)Qa=Ya[--Ka],Ya[Ka]=null,Xa=Ya[--Ka],Ya[Ka]=null,Ga=Ya[--Ka],Ya[Ka]=null}var as=null,ss=null,is=!1,os=null;function ls(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function cs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,as=e,ss=da(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,as=e,ss=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qa?{id:Ga,overflow:Xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,as=e,ss=null,!0);default:return!1}}function us(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ds(e){if(is){var t=ss;if(t){var n=t;if(!cs(e,t)){if(us(e))throw Error(s(418));t=da(n.nextSibling);var r=as;t&&cs(e,t)?ls(r,n):(e.flags=-4097&e.flags|2,is=!1,as=e)}}else{if(us(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,as=e}}}function fs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;as=e}function ps(e){if(e!==as)return!1;if(!is)return fs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ss)){if(us(e))throw ms(),Error(s(418));for(;t;)ls(e,t),t=da(t.nextSibling)}if(fs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ss=da(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ss=null}}else ss=as?da(e.stateNode.nextSibling):null;return!0}function ms(){for(var e=ss;e;)e=da(e.nextSibling)}function hs(){ss=as=null,is=!1}function gs(e){null===os?os=[e]:os.push(e)}var ys=x.ReactCurrentBatchConfig;function vs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xs(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&xs(s)===t.type)?((r=a(t,n.props)).ref=vs(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=vs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=vs(e,null,t),n.return=e,n;case w:return(t=Bc(t,e.mode,n)).return=e,t;case P:return f(e,(0,t._init)(t._payload),n)}if(te(t)||I(t))return(t=Mc(t,e.mode,n,null)).return=e,t;bs(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===a?c(e,t,n,r):null;case w:return n.key===a?u(e,t,n,r):null;case P:return p(e,t,(a=n._init)(n._payload),r)}if(te(n)||I(n))return null!==a?null:d(e,t,n,r,null);bs(e,n)}return null}function m(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case P:return m(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||I(r))return d(t,e=e.get(n)||null,r,a,null);bs(t,r)}return null}function h(a,s,o,l){for(var c=null,u=null,d=s,h=s=0,g=null;null!==d&&h<o.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var y=p(a,d,o[h],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(a,d),s=i(y,s,h),null===u?c=y:u.sibling=y,u=y,d=g}if(h===o.length)return n(a,d),is&&es(a,h),c;if(null===d){for(;h<o.length;h++)null!==(d=f(a,o[h],l))&&(s=i(d,s,h),null===u?c=d:u.sibling=d,u=d);return is&&es(a,h),c}for(d=r(a,d);h<o.length;h++)null!==(g=m(d,a,h,o[h],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?h:g.key),s=i(g,s,h),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),is&&es(a,h),c}function g(a,o,l,c){var u=I(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,h=o,g=o=0,y=null,v=l.next();null!==h&&!v.done;g++,v=l.next()){h.index>g?(y=h,h=null):y=h.sibling;var b=p(a,h,v.value,c);if(null===b){null===h&&(h=y);break}e&&h&&null===b.alternate&&t(a,h),o=i(b,o,g),null===d?u=b:d.sibling=b,d=b,h=y}if(v.done)return n(a,h),is&&es(a,g),u;if(null===h){for(;!v.done;g++,v=l.next())null!==(v=f(a,v.value,c))&&(o=i(v,o,g),null===d?u=v:d.sibling=v,d=v);return is&&es(a,g),u}for(h=r(a,h);!v.done;g++,v=l.next())null!==(v=m(h,a,g,v.value,c))&&(e&&null!==v.alternate&&h.delete(null===v.key?g:v.key),o=i(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),is&&es(a,g),u}return function e(r,s,i,l){if("object"===typeof i&&null!==i&&i.type===k&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case _:e:{for(var c=i.key,u=s;null!==u;){if(u.key===c){if((c=i.type)===k){if(7===u.tag){n(r,u.sibling),(s=a(u,i.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&xs(c)===u.type){n(r,u.sibling),(s=a(u,i.props)).ref=vs(r,u,i),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===k?((s=Mc(i.props.children,r.mode,l,i.key)).return=r,r=s):((l=Rc(i.type,i.key,i.props,null,r.mode,l)).ref=vs(r,s,i),l.return=r,r=l)}return o(r);case w:e:{for(u=i.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(r,s.sibling),(s=a(s,i.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Bc(i,r.mode,l)).return=r,r=s}return o(r);case P:return e(r,s,(u=i._init)(i._payload),l)}if(te(i))return h(r,s,i,l);if(I(i))return g(r,s,i,l);bs(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(r,s.sibling),(s=a(s,i)).return=r,r=s):(n(r,s),(s=zc(i,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=_s(!0),ks=_s(!1),js=Sa(null),Ns=null,Ss=null,Cs=null;function Ds(){Cs=Ss=Ns=null}function Es(e){var t=js.current;Ca(js),e._currentValue=t}function As(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fs(e,t){Ns=e,Cs=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_o=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===Ns)throw Error(s(308));Ss=e,Ns.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ts=null;function Os(e){null===Ts?Ts=[e]:Ts.push(e)}function Is(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Os(t)):(n.next=a.next,a.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Rs(e,n)}return null===(a=r.interleaved)?(t.next=t,Os(r)):(t.next=a.next,a.next=t),r.interleaved=t,Rs(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ws(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qs(e,t,n,r){var a=e.updateQueue;Ms=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(i=0,u=c=l=null,o=s;;){var f=o.lane,p=o.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,h=o;switch(f=t,p=n,h.tag){case 1:if("function"===typeof(m=h.payload)){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=h.payload)?m.call(p,d,f):m)||void 0===f)break e;d=M({},d,f);break e;case 2:Ms=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,i|=f;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(f=o).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=d}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var $s={},Zs=Sa($s),Js=Sa($s),Ys=Sa($s);function Ks(e){if(e===$s)throw Error(s(174));return e}function Qs(e,t){switch(Da(Ys,t),Da(Js,e),Da(Zs,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ca(Zs),Da(Zs,t)}function Gs(){Ca(Zs),Ca(Js),Ca(Ys)}function Xs(e){Ks(Ys.current);var t=Ks(Zs.current),n=le(t,e.type);t!==n&&(Da(Js,e),Da(Zs,n))}function ei(e){Js.current===e&&(Ca(Zs),Ca(Js))}var ti=Sa(0);function ni(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ri=[];function ai(){for(var e=0;e<ri.length;e++)ri[e]._workInProgressVersionPrimary=null;ri.length=0}var si=x.ReactCurrentDispatcher,ii=x.ReactCurrentBatchConfig,oi=0,li=null,ci=null,ui=null,di=!1,fi=!1,pi=0,mi=0;function hi(){throw Error(s(321))}function gi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function yi(e,t,n,r,a,i){if(oi=i,li=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=null===e||null===e.memoizedState?eo:to,e=n(r,a),fi){i=0;do{if(fi=!1,pi=0,25<=i)throw Error(s(301));i+=1,ui=ci=null,t.updateQueue=null,si.current=no,e=n(r,a)}while(fi)}if(si.current=Xi,t=null!==ci&&null!==ci.next,oi=0,ui=ci=li=null,di=!1,t)throw Error(s(300));return e}function vi(){var e=0!==pi;return pi=0,e}function bi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ui?li.memoizedState=ui=e:ui=ui.next=e,ui}function xi(){if(null===ci){var e=li.alternate;e=null!==e?e.memoizedState:null}else e=ci.next;var t=null===ui?li.memoizedState:ui.next;if(null!==t)ui=t,ci=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ci=e).memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},null===ui?li.memoizedState=ui=e:ui=ui.next=e}return ui}function _i(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=xi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ci,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((oi&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,o=r):c=c.next=f,li.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==i);null===c?o=r:c.next=l,ir(r,t.memoizedState)||(_o=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,li.lanes|=i,Ll|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ki(e){var t=xi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);ir(i,t.memoizedState)||(_o=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ji(){}function Ni(e,t){var n=li,r=xi(),a=t(),i=!ir(r.memoizedState,a);if(i&&(r.memoizedState=a,_o=!0),r=r.queue,Mi(Di.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==ui&&1&ui.memoizedState.tag){if(n.flags|=2048,Pi(9,Ci.bind(null,n,r,a,t),void 0,null),null===Fl)throw Error(s(349));0!==(30&oi)||Si(n,t,a)}return a}function Si(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=li.updateQueue)?(t={lastEffect:null,stores:null},li.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ci(e,t,n,r){t.value=n,t.getSnapshot=r,Ei(t)&&Ai(e)}function Di(e,t,n){return n(function(){Ei(t)&&Ai(e)})}function Ei(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ir(e,n)}catch(r){return!0}}function Ai(e){var t=Rs(e,1);null!==t&&ac(t,e,1,-1)}function Fi(e){var t=bi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,li,e),[t.memoizedState,e]}function Pi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=li.updateQueue)?(t={lastEffect:null,stores:null},li.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ti(){return xi().memoizedState}function Oi(e,t,n,r){var a=bi();li.flags|=e,a.memoizedState=Pi(1|t,n,void 0,void 0===r?null:r)}function Ii(e,t,n,r){var a=xi();r=void 0===r?null:r;var s=void 0;if(null!==ci){var i=ci.memoizedState;if(s=i.destroy,null!==r&&gi(r,i.deps))return void(a.memoizedState=Pi(t,n,s,r))}li.flags|=e,a.memoizedState=Pi(1|t,n,s,r)}function Ri(e,t){return Oi(8390656,8,e,t)}function Mi(e,t){return Ii(2048,8,e,t)}function Li(e,t){return Ii(4,2,e,t)}function zi(e,t){return Ii(4,4,e,t)}function Bi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ii(4,4,Bi.bind(null,t,e),n)}function Ui(){}function Wi(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qi(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hi(e,t,n){return 0===(21&oi)?(e.baseState&&(e.baseState=!1,_o=!0),e.memoizedState=n):(ir(n,t)||(n=mt(),li.lanes|=n,Ll|=n,e.baseState=!0),t)}function $i(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=ii.transition;ii.transition={};try{e(!1),t()}finally{vt=n,ii.transition=r}}function Zi(){return xi().memoizedState}function Ji(e,t,n){var r=rc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ki(e))Qi(t,n);else if(null!==(n=Is(e,t,n,r))){ac(n,e,r,nc()),Gi(n,t,r)}}function Yi(e,t,n){var r=rc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ki(e))Qi(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,ir(o,i)){var l=t.interleaved;return null===l?(a.next=a,Os(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Is(e,t,a,r))&&(ac(n,e,r,a=nc()),Gi(n,t,r))}}function Ki(e){var t=e.alternate;return e===li||null!==t&&t===li}function Qi(e,t){fi=di=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Gi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xi={readContext:Ps,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:function(e,t){return bi().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Ri,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oi(4194308,4,Bi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oi(4,2,e,t)},useMemo:function(e,t){var n=bi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ji.bind(null,li,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bi().memoizedState=e},useState:Fi,useDebugValue:Ui,useDeferredValue:function(e){return bi().memoizedState=e},useTransition:function(){var e=Fi(!1),t=e[0];return e=$i.bind(null,e[1]),bi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=li,a=bi();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Fl)throw Error(s(349));0!==(30&oi)||Si(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Ri(Di.bind(null,r,i,e),[e]),r.flags|=2048,Pi(9,Ci.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=bi(),t=Fl.identifierPrefix;if(is){var n=Xa;t=":"+t+"R"+(n=(Ga&~(1<<32-st(Ga)-1)).toString(32)+n),0<(n=pi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},to={readContext:Ps,useCallback:Wi,useContext:Ps,useEffect:Mi,useImperativeHandle:Vi,useInsertionEffect:Li,useLayoutEffect:zi,useMemo:qi,useReducer:wi,useRef:Ti,useState:function(){return wi(_i)},useDebugValue:Ui,useDeferredValue:function(e){return Hi(xi(),ci.memoizedState,e)},useTransition:function(){return[wi(_i)[0],xi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Ni,useId:Zi,unstable_isNewReconciler:!1},no={readContext:Ps,useCallback:Wi,useContext:Ps,useEffect:Mi,useImperativeHandle:Vi,useInsertionEffect:Li,useLayoutEffect:zi,useMemo:qi,useReducer:ki,useRef:Ti,useState:function(){return ki(_i)},useDebugValue:Ui,useDeferredValue:function(e){var t=xi();return null===ci?t.memoizedState=e:Hi(t,ci.memoizedState,e)},useTransition:function(){return[ki(_i)[0],xi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Ni,useId:Zi,unstable_isNewReconciler:!1};function ro(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ao(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nc(),a=rc(e),s=Bs(r,a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,a))&&(ac(t,e,a,r),Us(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nc(),a=rc(e),s=Bs(r,a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,a))&&(ac(t,e,a,r),Us(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),r=rc(e),a=Bs(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Vs(e,a,r))&&(ac(t,e,r,n),Us(t,e,r))}};function io(e,t,n,r,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(a,s))}function oo(e,t,n){var r=!1,a=Ea,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(a=Oa(t)?Pa:Aa.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ta(e,a):Ea),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function lo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function co(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Ps(s):(s=Oa(t)?Pa:Aa.current,a.context=Ta(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ao(e,t,s,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&so.enqueueReplaceState(a,a.state,null),qs(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function uo(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function fo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function po(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mo="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,n){(n=Bs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$l||($l=!0,Zl=r),po(0,t)},n}function go(e,t,n){(n=Bs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){po(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){po(0,t),"function"!==typeof r&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new mo;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bo(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bs(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var xo=x.ReactCurrentOwner,_o=!1;function wo(e,t,n,r){t.child=null===e?ks(t,null,n,r):ws(t,e.child,n,r)}function ko(e,t,n,r,a){n=n.render;var s=t.ref;return Fs(t,a),r=yi(e,t,n,r,s,a),n=vi(),null===e||_o?(is&&n&&ns(t),t.flags|=1,wo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$o(e,t,a))}function jo(e,t,n,r,a){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:or)(i,r)&&e.ref===t.ref)return $o(e,t,a)}return t.flags|=1,(e=Ic(s,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(or(s,r)&&e.ref===t.ref){if(_o=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,$o(e,t,a);0!==(131072&e.flags)&&(_o=!0)}}return Do(e,t,n,r,a)}function So(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Da(Il,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Da(Il,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Da(Il,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Da(Il,Ol),Ol|=r;return wo(e,t,a,n),t.child}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Do(e,t,n,r,a){var s=Oa(n)?Pa:Aa.current;return s=Ta(t,s),Fs(t,a),n=yi(e,t,n,r,s,a),r=vi(),null===e||_o?(is&&r&&ns(t),t.flags|=1,wo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$o(e,t,a))}function Eo(e,t,n,r,a){if(Oa(n)){var s=!0;La(t)}else s=!1;if(Fs(t,a),null===t.stateNode)Ho(e,t),oo(t,n,r),co(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Ta(t,c=Oa(n)?Pa:Aa.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&lo(t,i,r,c),Ms=!1;var f=t.memoizedState;i.state=f,qs(t,r,i,a),l=t.memoizedState,o!==r||f!==l||Fa.current||Ms?("function"===typeof u&&(ao(t,n,u,r),l=t.memoizedState),(o=Ms||io(t,n,o,r,f,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,zs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ro(t.type,o),i.props=c,d=t.pendingProps,f=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Ta(t,l=Oa(n)?Pa:Aa.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||f!==l)&&lo(t,i,r,l),Ms=!1,f=t.memoizedState,i.state=f,qs(t,r,i,a);var m=t.memoizedState;o!==d||f!==m||Fa.current||Ms?("function"===typeof p&&(ao(t,n,p,r),m=t.memoizedState),(c=Ms||io(t,n,c,r,f,m,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ao(e,t,n,r,s,a)}function Ao(e,t,n,r,a,s){Co(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&za(t,n,!1),$o(e,t,s);r=t.stateNode,xo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,a&&za(t,n,!0),t.child}function Fo(e){var t=e.stateNode;t.pendingContext?Ra(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ra(0,t.context,!1),Qs(e,t.containerInfo)}function Po(e,t,n,r,a){return hs(),gs(a),t.flags|=256,wo(e,t,n,r),t.child}var To,Oo,Io,Ro,Mo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function zo(e,t,n){var r,a=t.pendingProps,i=ti.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Da(ti,1&i),null===e)return ds(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,a,0,null),e=Mc(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Mo,e):Bo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=fo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Lc({mode:"visible",children:r.children},a,0,null),(i=Mc(i,a,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Mo,i);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Vo(e,t,o,r=fo(i=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),_o||l){if(null!==(r=Fl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Rs(e,a),ac(r,e,a,-1))}return yc(),Vo(e,t,o,r=fo(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ss=da(a.nextSibling),as=t,is=!0,os=null,null!==e&&(Ya[Ka++]=Ga,Ya[Ka++]=Xa,Ya[Ka++]=Qa,Ga=e.id,Xa=e.overflow,Qa=t),t=Bo(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,n);if(o){o=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ic(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Ic(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,a}return e=(o=e.child).sibling,a=Ic(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Bo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&gs(r),ws(t,e.child,null,n),(e=Bo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),As(e.return,t,n)}function Wo(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function qo(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=ti.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Da(ti,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ni(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Wo(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ni(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Wo(t,!0,n,null,s);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $o(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Zo(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yo(e,t,n){var r=t.pendingProps;switch(rs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jo(t),null;case 1:case 17:return Oa(t.type)&&Ia(),Jo(t),null;case 3:return r=t.stateNode,Gs(),Ca(Fa),Ca(Aa),ai(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ps(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==os&&(lc(os),os=null))),Oo(e,t),Jo(t),null;case 5:ei(t);var a=Ks(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)Io(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Jo(t),null}if(e=Ks(Zs.current),ps(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ma]=t,r[ha]=i,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Or.length;a++)zr(Or[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":K(r,i),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},zr("invalid",r);break;case"textarea":ae(r,i),zr("invalid",r)}for(var l in ye(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Gr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Gr(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":$(r),X(r,i,!0);break;case"textarea":$(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Xr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ma]=t,e[ha]=r,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Or.length;a++)zr(Or[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":K(e,r),a=Y(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=M({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(i in ye(n,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?he(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&zr("scroll",e):null!=u&&b(e,i,u,l))}switch(n){case"input":$(e),X(e,r,!1);break;case"textarea":$(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Jo(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ks(Ys.current),Ks(Zs.current),ps(t)){if(r=t.stateNode,n=t.memoizedProps,r[ma]=t,(i=r.nodeValue!==n)&&null!==(e=as))switch(e.tag){case 3:Gr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Gr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ma]=t,t.stateNode=r}return Jo(t),null;case 13:if(Ca(ti),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==ss&&0!==(1&t.mode)&&0===(128&t.flags))ms(),hs(),t.flags|=98560,i=!1;else if(i=ps(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ma]=t}else hs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Jo(t),i=!1}else null!==os&&(lc(os),os=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ti.current)?0===Rl&&(Rl=3):yc())),null!==t.updateQueue&&(t.flags|=4),Jo(t),null);case 4:return Gs(),Oo(e,t),null===e&&Ur(t.stateNode.containerInfo),Jo(t),null;case 10:return Es(t.type._context),Jo(t),null;case 19:if(Ca(ti),null===(i=t.memoizedState))return Jo(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Zo(i,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ni(e))){for(t.flags|=128,Zo(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Da(ti,1&ti.current|2),t.child}e=e.sibling}null!==i.tail&&Ke()>ql&&(t.flags|=128,r=!0,Zo(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ni(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Zo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!is)return Jo(t),null}else 2*Ke()-i.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Zo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ke(),t.sibling=null,n=ti.current,Da(ti,r?1&n|2:1&n),t):(Jo(t),null);case 22:case 23:return pc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Jo(t),6&t.subtreeFlags&&(t.flags|=8192)):Jo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ko(e,t){switch(rs(t),t.tag){case 1:return Oa(t.type)&&Ia(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Gs(),Ca(Fa),Ca(Aa),ai(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ei(t),null;case 13:if(Ca(ti),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));hs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ca(ti),null;case 4:return Gs(),null;case 10:return Es(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}To=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},Io=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ks(Zs.current);var s,i=null;switch(n){case"input":a=Y(e,a),r=Y(e,r),i=[];break;case"select":a=M({},a,{value:void 0}),r=M({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qo=!1,Go=!1,Xo="function"===typeof WeakSet?WeakSet:Set,el=null;function tl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function nl(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var rl=!1;function al(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&nl(t,n,s)}a=a.next}while(a!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ma],delete t[ha],delete t[ya],delete t[va],delete t[ba])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ll(e){return 5===e.tag||3===e.tag||4===e.tag}function cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ll(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}var fl=null,pl=!1;function ml(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Go||tl(n,t);case 6:var r=fl,a=pl;fl=null,ml(e,t,n),pl=a,null!==(fl=r)&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fl.removeChild(n.stateNode));break;case 18:null!==fl&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Vt(e)):ua(fl,n.stateNode));break;case 4:r=fl,a=pl,fl=n.stateNode.containerInfo,pl=!0,ml(e,t,n),fl=r,pl=a;break;case 0:case 11:case 14:case 15:if(!Go&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&nl(n,t,i),a=a.next}while(a!==r)}ml(e,t,n);break;case 1:if(!Go&&(tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?(Go=(r=Go)||null!==n.memoizedState,ml(e,t,n),Go=r):ml(e,t,n);break;default:ml(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach(function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function yl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:fl=l.stateNode,pl=!1;break e;case 3:case 4:fl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===fl)throw Error(s(160));hl(i,o,a),fl=null,pl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Sc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yl(t,e),bl(e),4&r){try{al(3,e,e.return),sl(3,e)}catch(ta){Sc(e,e.return,ta)}try{al(5,e,e.return)}catch(ta){Sc(e,e.return,ta)}}break;case 1:yl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return);break;case 5:if(yl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return),32&e.flags){var a=e.stateNode;try{de(a,"")}catch(ta){Sc(e,e.return,ta)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Q(a,i),ve(l,o);var u=ve(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];"style"===d?he(a,f):"dangerouslySetInnerHTML"===d?ue(a,f):"children"===d?de(a,f):b(a,d,f,u)}switch(l){case"input":G(a,i);break;case"textarea":se(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?ne(a,!!i.multiple,m,!1):p!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[ha]=i}catch(ta){Sc(e,e.return,ta)}}break;case 6:if(yl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(ta){Sc(e,e.return,ta)}}break;case 3:if(yl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(ta){Sc(e,e.return,ta)}break;case 4:default:yl(t,e),bl(e);break;case 13:yl(t,e),bl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Wl=Ke())),4&r&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Go=(u=Go)||d,yl(t,e),Go=u):yl(t,e),bl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(el=e,d=e.child;null!==d;){for(f=el=d;null!==el;){switch(m=(p=el).child,p.tag){case 0:case 11:case 14:case 15:al(4,p,p.return);break;case 1:tl(p,p.return);var h=p.stateNode;if("function"===typeof h.componentWillUnmount){r=p,n=p.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(ta){Sc(r,n,ta)}}break;case 5:tl(p,p.return);break;case 22:if(null!==p.memoizedState){kl(f);continue}}null!==m?(m.return=p,el=m):kl(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{a=f.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=f.stateNode,o=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(ta){Sc(e,e.return,ta)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(ta){Sc(e,e.return,ta)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yl(t,e),bl(e),4&r&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ll(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(de(a,""),r.flags&=-33),dl(e,cl(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ul(e,cl(e),i);break;default:throw Error(s(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){el=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==el;){var a=el,s=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Qo;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Go;o=Qo;var c=Go;if(Qo=i,(Go=l)&&!c)for(el=a;null!==el;)l=(i=el).child,22===i.tag&&null!==i.memoizedState?jl(a):null!==l?(l.return=i,el=l):jl(a);for(;null!==s;)el=s,_l(s,t,n),s=s.sibling;el=a,Qo=o,Go=c}wl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,el=s):wl(e)}}function wl(e){for(;null!==el;){var t=el;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Go||sl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Go)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ro(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Hs(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Vt(f)}}}break;default:throw Error(s(163))}Go||512&t.flags&&il(t)}catch(Rr){Sc(t,t.return,Rr)}}if(t===e){el=null;break}if(null!==(n=t.sibling)){n.return=t.return,el=n;break}el=t.return}}function kl(e){for(;null!==el;){var t=el;if(t===e){el=null;break}var n=t.sibling;if(null!==n){n.return=t.return,el=n;break}el=t.return}}function jl(e){for(;null!==el;){var t=el;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Sc(t,a,l)}}var s=t.return;try{il(t)}catch(l){Sc(t,s,l)}break;case 5:var i=t.return;try{il(t)}catch(l){Sc(t,i,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){el=null;break}var o=t.sibling;if(null!==o){o.return=t.return,el=o;break}el=t.return}}var Nl,Sl=Math.ceil,Cl=x.ReactCurrentDispatcher,Dl=x.ReactCurrentOwner,El=x.ReactCurrentBatchConfig,Al=0,Fl=null,Pl=null,Tl=0,Ol=0,Il=Sa(0),Rl=0,Ml=null,Ll=0,zl=0,Bl=0,Vl=null,Ul=null,Wl=0,ql=1/0,Hl=null,$l=!1,Zl=null,Jl=null,Yl=!1,Kl=null,Ql=0,Gl=0,Xl=null,ec=-1,tc=0;function nc(){return 0!==(6&Al)?Ke():-1!==ec?ec:ec=Ke()}function rc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Tl?Tl&-Tl:null!==ys.transition?(0===tc&&(tc=mt()),tc):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function ac(e,t,n,r){if(50<Gl)throw Gl=0,Xl=null,Error(s(185));gt(e,n,r),0!==(2&Al)&&e===Fl||(e===Fl&&(0===(2&Al)&&(zl|=n),4===Rl&&cc(e,Tl)),sc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(ql=Ke()+500,Va&&qa()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-st(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=dt(e,e===Fl?Tl:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){Va=!0,Wa(e)}(uc.bind(null,e)):Wa(uc.bind(null,e)),la(function(){0===(6&Al)&&qa()}),n=null;else{switch(bt(r)){case 1:n=Ge;break;case 4:n=Xe;break;case 16:default:n=et;break;case 536870912:n=nt}n=Fc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(ec=-1,tc=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var r=dt(e,e===Fl?Tl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var a=Al;Al|=2;var i=gc();for(Fl===e&&Tl===t||(Hl=null,ql=Ke()+500,mc(e,t));;)try{xc();break}catch(l){hc(e,l)}Ds(),Cl.current=i,Al=a,null!==Pl?t=0:(Fl=null,Tl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t)throw n=Ml,mc(e,0),cc(e,r),sc(e,Ke()),n;if(6===t)cc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!ir(s(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vc(e,r))&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t))throw n=Ml,mc(e,0),cc(e,r),sc(e,Ke()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:kc(e,Ul,Hl);break;case 3:if(cc(e,r),(130023424&r)===r&&10<(t=Wl+500-Ke())){if(0!==dt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){nc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=sa(kc.bind(null,e,Ul,Hl),t);break}kc(e,Ul,Hl);break;case 4:if(cc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-st(r);i=1<<o,(o=t[o])>a&&(a=o),r&=~i}if(r=a,10<(r=(120>(r=Ke()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=sa(kc.bind(null,e,Ul,Hl),r);break}kc(e,Ul,Hl);break;default:throw Error(s(329))}}}return sc(e,Ke()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Ul,Ul=n,null!==t&&lc(t)),e}function lc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function cc(e,t){for(t&=~Bl,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Al))throw Error(s(327));jc();var t=dt(e,0);if(0===(1&t))return sc(e,Ke()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,mc(e,0),cc(e,t),sc(e,Ke()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Ul,Hl),sc(e,Ke()),null}function dc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=Ke()+500,Va&&qa())}}function fc(e){null!==Kl&&0===Kl.tag&&0===(6&Al)&&jc();var t=Al;Al|=1;var n=El.transition,r=vt;try{if(El.transition=null,vt=1,e)return e()}finally{vt=r,El.transition=n,0===(6&(Al=t))&&qa()}}function pc(){Ol=Il.current,Ca(Il)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ia(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(rs(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ia();break;case 3:Gs(),Ca(Fa),Ca(Aa),ai();break;case 5:ei(r);break;case 4:Gs();break;case 13:case 19:Ca(ti);break;case 10:Es(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Fl=e,Pl=e=Ic(e.current,null),Tl=Ol=t,Rl=0,Ml=null,Bl=zl=Ll=0,Ul=Vl=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var i=s.next;s.next=a,r.next=i}n.pending=r}Ts=null}return e}function hc(e,t){for(;;){var n=Pl;try{if(Ds(),si.current=Xi,di){for(var r=li.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}di=!1}if(oi=0,ui=ci=li=null,fi=!1,pi=0,Dl.current=null,null===n||null===n.return){Rl=1,Ml=t,Pl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=vo(o);if(null!==m){m.flags&=-257,bo(m,o,l,0,t),1&m.mode&&yo(i,u,t),c=u;var h=(t=m).updateQueue;if(null===h){var g=new Set;g.add(c),t.updateQueue=g}else h.add(c);break e}if(0===(1&t)){yo(i,u,t),yc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=vo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),bo(y,o,l,0,t),gs(uo(c,l));break e}}i=c=uo(c,l),4!==Rl&&(Rl=2),null===Vl?Vl=[i]:Vl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ws(i,ho(0,c,t));break e;case 1:l=c;var v=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Jl||!Jl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Ws(i,go(i,l,t));break e}}i=i.return}while(null!==i)}wc(n)}catch(x){t=x,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function gc(){var e=Cl.current;return Cl.current=Xi,null===e?Xi:e}function yc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Fl||0===(268435455&Ll)&&0===(268435455&zl)||cc(Fl,Tl)}function vc(e,t){var n=Al;Al|=2;var r=gc();for(Fl===e&&Tl===t||(Hl=null,mc(e,t));;)try{bc();break}catch(a){hc(e,a)}if(Ds(),Al=n,Cl.current=r,null!==Pl)throw Error(s(261));return Fl=null,Tl=0,Rl}function bc(){for(;null!==Pl;)_c(Pl)}function xc(){for(;null!==Pl&&!Je();)_c(Pl)}function _c(e){var t=Nl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?wc(e):Pl=t,Dl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Rl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Rl&&(Rl=5)}function kc(e,t,n){var r=vt,a=El.transition;try{El.transition=null,vt=1,function(e,t,n,r){do{jc()}while(null!==Kl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-st(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,i),e===Fl&&(Pl=Fl=null,Tl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Fc(et,function(){return jc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=El.transition,El.transition=null;var o=vt;vt=1;var l=Al;Al|=4,Dl.current=null,function(e,t){if(ea=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(_){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var m;f!==n||0!==a&&3!==f.nodeType||(l=o+a),f!==i||0!==r&&3!==f.nodeType||(c=o+r),3===f.nodeType&&(o+=f.nodeValue.length),null!==(m=f.firstChild);)p=f,f=m;for(;;){if(f===e)break t;if(p===n&&++u===a&&(l=o),p===i&&++d===r&&(c=o),null!==(m=f.nextSibling))break;p=(f=p).parentNode}f=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(na={focusedElem:e,selectionRange:n},Wt=!1,el=t;null!==el;)if(e=(t=el).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,el=e;else for(;null!==el;){t=el;try{var h=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var g=h.memoizedProps,y=h.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ro(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(_){Sc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,el=e;break}el=t.return}h=rl,rl=!1}(e,n),vl(n,e),pr(na),Wt=!!ea,na=ea=null,e.current=n,xl(n,e,a),Ye(),Al=l,vt=o,El.transition=i}else e.current=n;if(Yl&&(Yl=!1,Kl=e,Ql=a),i=e.pendingLanes,0===i&&(Jl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Ke()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if($l)throw $l=!1,e=Zl,Zl=null,e;0!==(1&Ql)&&0!==e.tag&&jc(),i=e.pendingLanes,0!==(1&i)?e===Xl?Gl++:(Gl=0,Xl=e):Gl=0,qa()}(e,t,n,r)}finally{El.transition=a,vt=r}return null}function jc(){if(null!==Kl){var e=bt(Ql),t=El.transition,n=vt;try{if(El.transition=null,vt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Ql=0,0!==(6&Al))throw Error(s(331));var a=Al;for(Al|=4,el=e.current;null!==el;){var i=el,o=i.child;if(0!==(16&el.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(el=u;null!==el;){var d=el;switch(d.tag){case 0:case 11:case 15:al(8,d,i)}var f=d.child;if(null!==f)f.return=d,el=f;else for(;null!==el;){var p=(d=el).sibling,m=d.return;if(ol(d),d===u){el=null;break}if(null!==p){p.return=m,el=p;break}el=m}}}var h=i.alternate;if(null!==h){var g=h.child;if(null!==g){h.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}el=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,el=o;else e:for(;null!==el;){if(0!==(2048&(i=el).flags))switch(i.tag){case 0:case 11:case 15:al(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,el=v;break e}el=i.return}}var b=e.current;for(el=b;null!==el;){var x=(o=el).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,el=x;else e:for(o=b;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(w){Sc(l,l.return,w)}if(l===o){el=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,el=_;break e}el=l.return}}if(Al=a,qa(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(rt,e)}catch(w){}r=!0}return r}finally{vt=n,El.transition=t}}return!1}function Nc(e,t,n){e=Vs(e,t=ho(0,t=uo(n,t),1),1),t=nc(),null!==e&&(gt(e,1,t),sc(e,t))}function Sc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Jl||!Jl.has(r))){t=Vs(t,e=go(t,e=uo(n,e),1),1),e=nc(),null!==t&&(gt(t,1,e),sc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Fl===e&&(Tl&n)===n&&(4===Rl||3===Rl&&(130023424&Tl)===Tl&&500>Ke()-Wl?mc(e,0):Bl|=n),sc(e,t)}function Dc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=nc();null!==(e=Rs(e,t))&&(gt(e,t,n),sc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Dc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Dc(e,n)}function Fc(e,t){return $e(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,r){return new Pc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,a,i){var o=2;if(r=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Mc(n.children,a,i,t);case j:o=8,a|=8;break;case N:return(e=Tc(12,n,t,2|a)).elementType=N,e.lanes=i,e;case E:return(e=Tc(13,n,t,a)).elementType=E,e.lanes=i,e;case A:return(e=Tc(19,n,t,a)).elementType=A,e.lanes=i,e;case T:return Lc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case D:o=11;break e;case F:o=14;break e;case P:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Tc(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Mc(e,t,n,r){return(e=Tc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Tc(22,e,r,t)).elementType=T,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ht(0),this.expirationTimes=ht(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ht(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,a,s,i,o,l){return e=new Vc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Tc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Wc(e){if(!e)return Ea;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oa(n))return Ma(e,n,t)}return t}function qc(e,t,n,r,a,s,i,o,l){return(e=Uc(n,r,!0,e,0,s,0,o,l)).context=Wc(null),n=e.current,(s=Bs(r=nc(),a=rc(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,a),e.current.lanes=a,gt(e,a,r),sc(e,r),e}function Hc(e,t,n,r){var a=t.current,s=nc(),i=rc(a);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bs(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vs(a,t,i))&&(ac(e,a,i,s),Us(e,a,i)),i}function $c(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Zc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Jc(e,t){Zc(e,t),(e=e.alternate)&&Zc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Fa.current)_o=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _o=!1,function(e,t,n){switch(t.tag){case 3:Fo(t),hs();break;case 5:Xs(t);break;case 1:Oa(t.type)&&La(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Da(js,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Da(ti,1&ti.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zo(e,t,n):(Da(ti,1&ti.current),null!==(e=$o(e,t,n))?e.sibling:null);Da(ti,1&ti.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Da(ti,ti.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return $o(e,t,n)}(e,t,n);_o=0!==(131072&e.flags)}else _o=!1,is&&0!==(1048576&t.flags)&&ts(t,Ja,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var a=Ta(t,Aa.current);Fs(t,n),a=yi(null,t,r,e,a,n);var i=vi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oa(r)?(i=!0,La(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ls(t),a.updater=so,t.stateNode=a,a._reactInternals=t,co(t,r,e,n),t=Ao(null,t,r,!0,i,n)):(t.tag=0,is&&i&&ns(t),wo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===D)return 11;if(e===F)return 14}return 2}(r),e=ro(r,e),a){case 0:t=Do(null,t,r,e,n);break e;case 1:t=Eo(null,t,r,e,n);break e;case 11:t=ko(null,t,r,e,n);break e;case 14:t=jo(null,t,r,ro(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Do(e,t,r,a=t.elementType===r?a:ro(r,a),n);case 1:return r=t.type,a=t.pendingProps,Eo(e,t,r,a=t.elementType===r?a:ro(r,a),n);case 3:e:{if(Fo(t),null===e)throw Error(s(387));r=t.pendingProps,a=(i=t.memoizedState).element,zs(e,t),qs(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Po(e,t,r,n,a=uo(Error(s(423)),t));break e}if(r!==a){t=Po(e,t,r,n,a=uo(Error(s(424)),t));break e}for(ss=da(t.stateNode.containerInfo.firstChild),as=t,is=!0,os=null,n=ks(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hs(),r===a){t=$o(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&ds(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,ra(r,a)?o=null:null!==i&&ra(r,i)&&(t.flags|=32),Co(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&ds(t),null;case 13:return zo(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ko(e,t,r,a=t.elementType===r?a:ro(r,a),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Da(js,r._currentValue),r._currentValue=o,null!==i)if(ir(i.value,o)){if(i.children===a.children&&!Fa.current){t=$o(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Bs(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),As(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),As(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}wo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Fs(t,n),r=r(a=Ps(a)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return a=ro(r=t.type,t.pendingProps),jo(e,t,r,a=ro(r.type,a),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ro(r,a),Ho(e,t),t.tag=1,Oa(r)?(e=!0,La(t)):e=!1,Fs(t,n),oo(t,r,a),co(t,r,a,n),Ao(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return So(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eu(){}function tu(e,t,n,r,a){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=$c(i);o.call(e)}}Hc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var s=r;r=function(){var e=$c(i);s.call(e)}}var i=qc(t,r,e,0,null,!1,0,"",eu);return e._reactRootContainer=i,e[ga]=i.current,Ur(8===e.nodeType?e.parentNode:e),fc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=$c(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",eu);return e._reactRootContainer=l,e[ga]=l.current,Ur(8===e.nodeType?e.parentNode:e),fc(function(){Hc(t,l,n,r)}),l}(n,t,e,a,r);return $c(i)}Qc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Qc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc(function(){Hc(null,e,null,null)}),t[ga]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Rt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),sc(t,Ke()),0===(6&Al)&&(ql=Ke()+500,qa()))}break;case 13:fc(function(){var t=Rs(e,1);if(null!==t){var n=nc();ac(t,e,1,n)}}),Jc(e,1)}},_t=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)ac(t,e,134217728,nc());Jc(e,134217728)}},wt=function(e){if(13===e.tag){var t=rc(e),n=Rs(e,t);if(null!==n)ac(n,e,t,nc());Jc(e,t)}},kt=function(){return vt},jt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},_e=function(e,t,n){switch(t){case"input":if(G(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ka(r);if(!a)throw Error(s(90));Z(r),G(r,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=dc,De=fc;var nu={usingClientEntryPoint:!1,Events:[_a,wa,ka,Ne,Se,dc]},ru={findFiberByHostInstance:xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},au={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{rt=su.inject(au),at=su}catch(aa){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(s(299));var n=!1,r="",a=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,a),e[ga]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return tu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,a,0,i,o),e[ga]=t.current,Ur(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Qc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return tu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(fc(function(){tu(null,null,e,!1,function(){e._reactRootContainer=null,e[ga]=null})}),!0)},t.unstable_batchedUpdates=dc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return tu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".d8870b9e.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="law-entry-app:";n.l=(r,a,s,i)=>{if(e[r])e[r].push(a);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[a];var f=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach(e=>e(n)),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=f.bind(null,o.onerror),o.onload=f.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var s=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=s);var i=n.p+n.u(t),o=new Error;n.l(i,r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,a[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,s,i=r[0],o=r[1],l=r[2],c=0;if(i.some(t=>0!==e[t])){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)l(n)}for(t&&t(r);c<i.length;c++)s=i[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunklaw_entry_app=self.webpackChunklaw_entry_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),a=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const d=["sri"],f=["page"],p=["page","matches"],m=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],h=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var y="popstate";function v(){return N(function(e,t){let{pathname:n,search:r,hash:a}=e.location;return w("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:k(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function x(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function _(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?j(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function k(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function j(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function N(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:s=!1}=r,i=a.history,o="POP",l=null,u=d();function d(){return(i.state||{idx:null}).idx}function f(){o="POP";let e=d(),t=null==e?null:e-u;u=e,l&&l({action:o,location:m.location,delta:t})}function p(e){return S(e)}null==u&&(u=0,i.replaceState(c(c({},i.state),{},{idx:u}),""));let m={get action(){return o},get location(){return e(a,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(y,f),l=e,()=>{a.removeEventListener(y,f),l=null}},createHref:e=>t(a,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=w(m.location,e,t);n&&n(r,e),u=d()+1;let c=_(r,u),f=m.createHref(r);try{i.pushState(c,"",f)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;a.location.assign(f)}s&&l&&l({action:o,location:m.location,delta:1})},replace:function(e,t){o="REPLACE";let r=w(m.location,e,t);n&&n(r,e),u=d();let a=_(r,u),c=m.createHref(r);i.replaceState(a,"",c),s&&l&&l({action:o,location:m.location,delta:0})},go:e=>i.go(e)};return m}function S(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),b(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:k(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function C(e,t){return D(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function D(e,t,n,r){let a=W(("string"===typeof t?j(t):t).pathname||"/",n);if(null==a)return null;let s=E(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=U(a);i=z(s[o],e,r)}return i}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&i)return;b(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=J([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),E(e.children,t,u,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:L(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of A(e.path))s(e,t,!0,r);else s(e,t)}),t}function A(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return a?[s,""]:[s];let i=A(r.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var F=/^:[\w-]+$/,P=3,T=2,O=1,I=10,R=-2,M=e=>"*"===e;function L(e,t){let n=e.split("/"),r=n.length;return n.some(M)&&(r+=R),t&&(r+=T),n.filter(e=>!M(e)).reduce((e,t)=>e+(F.test(t)?P:""===t?O:I),r)}function z(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,a={},s="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:J([s,u.pathname]),pathnameBase:Y(J([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=J([s,u.pathnameBase]))}return i}function B(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=V(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[n]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:i,pattern:e}}function V(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return x(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function W(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function q(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function H(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function $(e){let t=H(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Z(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=j(e):(r=c({},e),b(!r.pathname||!r.pathname.includes("?"),q("?","pathname","search",r)),b(!r.pathname||!r.pathname.includes("#"),q("#","pathname","hash",r)),b(!r.search||!r.search.includes("#"),q("#","search","hash",r)));let s,i=""===e||""===r.pathname,o=i?"/":r.pathname;if(null==o)s=n;else{let e=t.length-1;if(!a&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:a=""}="string"===typeof e?j(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:K(r),hash:Q(a)}}(r,s),u=o&&"/"!==o&&o.endsWith("/"),d=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var J=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function G(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var X=["POST","PUT","PATCH","DELETE"],ee=(new Set(X),["GET",...X]);new Set(ee),Symbol("ResetLoaderData");var te=r.createContext(null);te.displayName="DataRouter";var ne=r.createContext(null);ne.displayName="DataRouterState";var re=r.createContext(!1);var ae=r.createContext({isTransitioning:!1});ae.displayName="ViewTransition";var se=r.createContext(new Map);se.displayName="Fetchers";var ie=r.createContext(null);ie.displayName="Await";var oe=r.createContext(null);oe.displayName="Navigation";var le=r.createContext(null);le.displayName="Location";var ce=r.createContext({outlet:null,matches:[],isDataRoute:!1});ce.displayName="Route";var ue=r.createContext(null);ue.displayName="RouteError";function de(){return null!=r.useContext(le)}function fe(){return b(de(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(le).location}var pe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function me(e){r.useContext(oe).static||r.useLayoutEffect(e)}function he(){let{isDataRoute:e}=r.useContext(ce);return e?function(){let{router:e}=Ne("useNavigate"),t=Ce("useNavigate"),n=r.useRef(!1);me(()=>{n.current=!0});let a=r.useCallback(async function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(n.current,pe),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,c({fromRouteId:t},a)))},[e,t]);return a}():function(){b(de(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(te),{basename:t,navigator:n}=r.useContext(oe),{matches:a}=r.useContext(ce),{pathname:s}=fe(),i=JSON.stringify($(a)),o=r.useRef(!1);me(()=>{o.current=!0});let l=r.useCallback(function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x(o.current,pe),!o.current)return;if("number"===typeof r)return void n.go(r);let l=Z(r,JSON.parse(i),s,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:J([t,l.pathname])),(a.replace?n.replace:n.push)(l,a.state,a)},[t,n,i,s,e]);return l}()}r.createContext(null);function ge(){let{matches:e}=r.useContext(ce),t=e[e.length-1];return t?t.params:{}}function ye(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(ce),{pathname:a}=fe(),s=JSON.stringify($(n));return r.useMemo(()=>Z(e,JSON.parse(s),a,"path"===t),[e,s,a,t])}function ve(e,t,n,a,s){b(de(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=r.useContext(oe),{matches:o}=r.useContext(ce),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let e=p&&p.path||"";Ae(d,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let m,h=fe();if(t){var g;let e="string"===typeof t?j(t):t;b("/"===f||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(f)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(f,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),m=e}else m=h;let y=m.pathname||"/",v=y;if("/"!==f){let e=f.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=C(e,{pathname:v});x(p||null!=_,'No routes matched location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" ')),x(null==_||void 0!==_[_.length-1].route.element||void 0!==_[_.length-1].route.Component||void 0!==_[_.length-1].route.lazy,'Matched leaf route at location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=ke(_&&_.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:J([f,i.encodeLocation?i.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?f:J([f,i.encodeLocation?i.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,n,a,s);return t&&w?r.createElement(le.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:"POP"}},w):w}function be(){let e=De(),t=G(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:i},"ErrorBoundary")," or"," ",r.createElement("code",{style:i},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,o)}var xe=r.createElement(be,null),_e=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?r.createElement(ce.Provider,{value:this.props.routeContext},r.createElement(ue.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function we(e){let{routeContext:t,match:n,children:a}=e,s=r.useContext(te);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ce.Provider,{value:t},a)}function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,i=null===n||void 0===n?void 0:n.errors;if(null!=i){let e=s.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let o=!1,l=-1;if(n)for(let r=0;r<s.length;r++){let e=s[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){o=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((e,c,u)=>{let d,f=!1,p=null,m=null;n&&(d=i&&c.route.id?i[c.route.id]:void 0,p=c.route.errorElement||xe,o&&(l<0&&0===u?(Ae("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,m=null):l===u&&(f=!0,m=c.route.hydrateFallbackElement||null)));let h=t.concat(s.slice(0,u+1)),g=()=>{let t;return t=d?p:f?m:c.route.Component?r.createElement(c.route.Component,null):c.route.element?c.route.element:e,r.createElement(we,{match:c,routeContext:{outlet:e,matches:h,isDataRoute:null!=n},children:t})};return n&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?r.createElement(_e,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:g(),routeContext:{outlet:null,matches:h,isDataRoute:!0},unstable_onError:a}):g()},null)}function je(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ne(e){let t=r.useContext(te);return b(t,je(e)),t}function Se(e){let t=r.useContext(ne);return b(t,je(e)),t}function Ce(e){let t=function(e){let t=r.useContext(ce);return b(t,je(e)),t}(e),n=t.matches[t.matches.length-1];return b(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function De(){var e;let t=r.useContext(ue),n=Se("useRouteError"),a=Ce("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[a]}var Ee={};function Ae(e,t,n){t||Ee[e]||(Ee[e]=!0,x(!1,n))}var Fe={};function Pe(e,t){e||Fe[t]||(Fe[t]=!0,console.warn(t))}r.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:a}=e;return ve(t,void 0,r,a,n)});function Te(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oe(e){let{basename:t="/",children:n=null,location:a,navigationType:s="POP",navigator:i,static:o=!1}=e;b(!de(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=r.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);"string"===typeof a&&(a=j(a));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:m="default"}=a,h=r.useMemo(()=>{let e=W(u,l);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:m},navigationType:s}},[l,u,d,f,p,m,s]);return x(null!=h,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==h?null:r.createElement(oe.Provider,{value:c},r.createElement(le.Provider,{children:n,value:h}))}function Ie(e){let{children:t,location:n}=e;return ve(Re(t),n)}r.Component;function Re(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,a)=>{if(!r.isValidElement(e))return;let s=[...t,a];if(e.type===r.Fragment)return void n.push.apply(n,Re(e.props.children,s));b(e.type===Te,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Re(e.props.children,s)),n.push(i)}),n}var Me="get",Le="application/x-www-form-urlencoded";function ze(e){return null!=e&&"string"===typeof e.tagName}var Be=null;var Ve=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ue(e){return null==e||Ve.has(e)?e:(x(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Le,'"')),null)}function We(e,t){let n,r,a,s,i;if(ze(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?W(i,t):null,n=e.getAttribute("method")||Me,a=Ue(e.getAttribute("enctype"))||Le,s=new FormData(e)}else if(function(e){return ze(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return ze(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(r=o?W(o,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||Me,a=Ue(e.getAttribute("formenctype"))||Ue(i.getAttribute("enctype"))||Le,s=new FormData(i,e),!function(){if(null===Be)try{new FormData(document.createElement("form"),0),Be=!1}catch(e){Be=!0}return Be}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if(ze(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Me,r=null,a=Le,i=e}var o;return s&&"text/plain"===a&&(i=s,s=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:s,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function qe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function He(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===W(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function $e(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ze(e){return null!=e&&"string"===typeof e.page}function Je(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ye(e,t,n,r,a,s){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(i(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Ke(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1),[...new Set(r)];var r}function Qe(e,t){let n=new Set,r=new Set(t);return e.reduce((e,a)=>{if(t&&!Ze(a)&&"script"===a.as&&a.href&&r.has(a.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(a));return n.has(s)||(n.add(s),e.push({key:s,link:a})),e},[])}function Ge(e,t){return"lazy"===e.mode&&!0===t}function Xe(){let e=r.useContext(te);return qe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function et(){let e=r.useContext(ne);return qe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var tt=r.createContext(void 0);function nt(){let e=r.useContext(tt);return qe(e,"You must render this element inside a <HydratedRouter> element"),e}function rt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function at(e,t,n){if(n&&!lt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}tt.displayName="FrameworkContext";function st(e){let{page:t}=e,n=u(e,f),{router:a}=Xe(),s=r.useMemo(()=>C(a.routes,t,a.basename),[a.routes,t,a.basename]);return s?r.createElement(ot,c({page:t,matches:s},n)):null}function it(e){let{manifest:t,routeModules:n}=nt(),[a,s]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return Qe((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await $e(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Je).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||s(e)}),()=>{r=!0}},[e,t,n]),a}function ot(e){let{page:t,matches:n}=e,a=u(e,p),s=fe(),{manifest:i,routeModules:o}=nt(),{basename:l}=Xe(),{loaderData:d,matches:f}=et(),m=r.useMemo(()=>Ye(t,n,f,i,s,"data"),[t,n,f,i,s]),h=r.useMemo(()=>Ye(t,n,f,i,s,"assets"),[t,n,f,i,s]),g=r.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let a=i.routes[t.route.id];a&&a.hasLoader&&(!m.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(n=o[t.route.id])&&void 0!==n&&n.shouldRevalidate||a.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let a=He(t,l,"data");return r&&e.size>0&&a.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[a.pathname+a.search]},[l,d,s,i,m,n,t,o]),y=r.useMemo(()=>Ke(h,i),[h,i]),v=it(h);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",c({key:e,rel:"prefetch",as:"fetch",href:e},a))),y.map(e=>r.createElement("link",c({key:e,rel:"modulepreload",href:e},a))),v.map(e=>{let{key:t,link:n}=e;return r.createElement("link",c({key:t,nonce:a.nonce},n))}))}var lt=!1;function ct(e){let{manifest:t,serverHandoffString:n,isSpaMode:a,renderMeta:s,routeDiscovery:i,ssr:o}=nt(),{router:l,static:f,staticContext:p}=Xe(),{matches:m}=et(),h=r.useContext(re),g=Ge(i,o);s&&(s.didRenderScripts=!0);let y=at(m,null,a);r.useEffect(()=>{lt=!0},[]);let v=r.useMemo(()=>{var a;if(h)return null;let s=p?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",i=f?"".concat(null!==(a=t.hmr)&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(y.map((e,n)=>{let r="route".concat(n),a=t.routes[e.route.id];qe(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:i,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=a,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...i?[{module:i,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=u(e,d),a=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),i=["/"];for(s.pop();s.length>0;)i.push("/".concat(s.join("/"))),s.pop();i.forEach(e=>{let n=C(t.routes,e,t.basename);n&&n.forEach(e=>a.add(e.route.id))});let o=[...a].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return c(c({},r),{},{routes:o,sri:!!n||void 0})}(t,l),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:void 0})),r.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:i},type:"module",async:!0})))},[]),b=lt||h?[]:(x=t.entry.imports.concat(Ke(y,t,{includeHydrateFallback:!0})),[...new Set(x)]);var x;let _="object"===typeof t.sri?t.sri:{};return Pe(!h,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),lt||h?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:_})}}):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:_[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:_[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:_[t],suppressHydrationWarning:!0})),v)}function ut(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function dt(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let a,s=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(G(t))return r.createElement(ft,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)a=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);a=new Error(e)}return r.createElement(ft,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),s)}function ft(e){var t;let{title:n,renderScripts:a,isOutsideRemixApp:s,children:i}=e,{routeModules:o}=nt();return null!==(t=o.root)&&void 0!==t&&t.Layout&&!s?i:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,a?r.createElement(ct,null):null)))}var pt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{pt&&(window.__reactRouterVersion="7.9.3")}catch(ou){}function mt(e){let{basename:t,children:n,window:a}=e,s=r.useRef();null==s.current&&(s.current=v({window:a,v5Compat:!0}));let i=s.current,[o,l]=r.useState({action:i.action,location:i.location}),c=r.useCallback(e=>{r.startTransition(()=>l(e))},[l]);return r.useLayoutEffect(()=>i.listen(c),[i,c]),r.createElement(Oe,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:i})}var ht=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gt=r.forwardRef(function(e,t){let n,{onClick:a,discover:s="render",prefetch:i="none",relative:o,reloadDocument:l,replace:d,state:f,target:p,to:h,preventScrollReset:g,viewTransition:y}=e,v=u(e,m),{basename:_}=r.useContext(oe),w="string"===typeof h&&ht.test(h),j=!1;if("string"===typeof h&&w&&(n=h,pt))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=W(t.pathname,_);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:j=!0}catch(ou){x(!1,'<Link to="'.concat(h,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let N=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(de(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=r.useContext(oe),{hash:s,pathname:i,search:o}=ye(e,{relative:t}),l=i;return"/"!==n&&(l="/"===i?n:J([n,i])),a.createHref({pathname:l,search:o,hash:s})}(h,{relative:o}),[S,C,D]=function(e,t){let n=r.useContext(tt),[a,s]=r.useState(!1),[i,o]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,p=r.useRef(null);r.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(a){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[a]);let m=()=>{s(!0)},h=()=>{s(!1),o(!1)};return n?"intent"!==e?[i,p,{}]:[i,p,{onFocus:rt(l,m),onBlur:rt(c,h),onMouseEnter:rt(u,m),onMouseLeave:rt(d,h),onTouchStart:rt(f,m)}]:[!1,p,{}]}(i,v),E=function(e){let{target:t,replace:n,state:a,preventScrollReset:s,relative:i,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=he(),c=fe(),u=ye(e,{relative:i});return r.useCallback(r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==n?n:k(c)===k(u);l(e,{replace:t,state:a,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,u,n,a,t,e,s,i,o])}(h,{replace:d,state:f,target:p,preventScrollReset:g,relative:o,viewTransition:y});let A=r.createElement("a",c(c(c({},v),D),{},{href:n||N,onClick:j||l?a:function(e){a&&a(e),e.defaultPrevented||E(e)},ref:ut(t,C),target:p,"data-discover":w||"render"!==s?void 0:"true"}));return S&&!w?r.createElement(r.Fragment,null,A,r.createElement(st,{page:N})):A});gt.displayName="Link",r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:a=!1,className:s="",end:i=!1,style:o,to:l,viewTransition:d,children:f}=e,p=u(e,h),m=ye(l,{relative:p.relative}),g=fe(),y=r.useContext(ne),{navigator:v,basename:x}=r.useContext(oe),_=null!=y&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(ae);b(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=bt("useViewTransitionState"),s=ye(e,{relative:t});if(!n.isTransitioning)return!1;let i=W(n.currentLocation.pathname,a)||n.currentLocation.pathname,o=W(n.nextLocation.pathname,a)||n.nextLocation.pathname;return null!=B(s.pathname,o)||null!=B(s.pathname,i)}(m)&&!0===d,w=v.encodeLocation?v.encodeLocation(m).pathname:m.pathname,k=g.pathname,j=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(k=k.toLowerCase(),j=j?j.toLowerCase():null,w=w.toLowerCase()),j&&x&&(j=W(j,x)||j);const N="/"!==w&&w.endsWith("/")?w.length-1:w.length;let S,C=k===w||!i&&k.startsWith(w)&&"/"===k.charAt(N),D=null!=j&&(j===w||!i&&j.startsWith(w)&&"/"===j.charAt(w.length)),E={isActive:C,isPending:D,isTransitioning:_},A=C?n:void 0;S="function"===typeof s?s(E):[s,C?"active":null,D?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let F="function"===typeof o?o(E):o;return r.createElement(gt,c(c({},p),{},{"aria-current":A,className:S,ref:t,style:F,to:l,viewTransition:d}),"function"===typeof f?f(E):f)}).displayName="NavLink";var yt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:a,navigate:s,reloadDocument:i,replace:o,state:l,method:d=Me,action:f,onSubmit:p,relative:m,preventScrollReset:h,viewTransition:y}=e,v=u(e,g),x=wt(),_=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(oe),a=r.useContext(ce);b(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),i=c({},ye(e||".",{relative:t})),o=fe();if(null==e){i.search=o.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();i.search=n?"?".concat(n):""}}e&&"."!==e||!s.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(i.pathname="/"===i.pathname?n:J([n,i.pathname]));return k(i)}(f,{relative:m}),w="get"===d.toLowerCase()?"get":"post",j="string"===typeof f&&ht.test(f);return r.createElement("form",c(c({ref:t,method:w,action:_,onSubmit:i?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;x(t||e.currentTarget,{fetcherKey:a,method:n,navigate:s,replace:o,state:l,relative:m,preventScrollReset:h,viewTransition:y})}},v),{},{"data-discover":j||"render"!==n?void 0:"true"}))});function vt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function bt(e){let t=r.useContext(te);return b(t,vt(e)),t}yt.displayName="Form";var xt=0,_t=()=>"__".concat(String(++xt),"__");function wt(){let{router:e}=bt("useSubmit"),{basename:t}=r.useContext(oe),n=Ce("useRouteId");return r.useCallback(async function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:i,encType:o,formData:l,body:c}=We(r,t);if(!1===a.navigate){let t=a.fetcherKey||_t();await e.fetch(t,n,a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||i,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||i,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}const kt=["verified","verified_by","verified_at"],jt="".concat("http://localhost:4000","/api/kb");async function Nt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;try{const n=localStorage.getItem("auth_token"),r=await fetch("".concat(jt,"/search"),{method:"POST",headers:c({"Content-Type":"application/json"},n?{Authorization:"Bearer ".concat(n)}:{}),body:JSON.stringify({query:e,limit:t})});return await r.json()}catch(ou){return{success:!1,error:String((null===ou||void 0===ou?void 0:ou.message)||ou)}}}async function St(e){try{const t=localStorage.getItem("auth_token"),n=await fetch("".concat(jt,"/entries/").concat(encodeURIComponent(e)),{method:"DELETE",headers:c({},t?{Authorization:"Bearer ".concat(t)}:{})});return await n.json()}catch(ou){return{success:!1,error:String((null===ou||void 0===ou?void 0:ou.message)||ou)}}}async function Ct(e,t){try{const n=new URL("".concat(jt,"/entries"));e&&n.searchParams.set("date",e),t&&n.searchParams.set("status",t);const r=localStorage.getItem("auth_token"),a=await fetch(n.toString(),{method:"DELETE",headers:c({},r?{Authorization:"Bearer ".concat(r)}:{})});return await a.json()}catch(ou){return{success:!1,error:String((null===ou||void 0===ou?void 0:ou.message)||ou)}}}class Dt{constructor(){this.drafts=new Map,this.entries=new Map}static getInstance(){return Dt.instance||(Dt.instance=new Dt),Dt.instance}async saveDraft(e){try{await new Promise(e=>setTimeout(e,500));const t="draft_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));this.drafts.set(t,e);const n=JSON.parse(localStorage.getItem("kb_drafts")||"{}");return n[t]=e,localStorage.setItem("kb_drafts",JSON.stringify(n)),{success:!0,draftId:t,message:"Draft saved successfully"}}catch(t){return{success:!1,draftId:"",message:"Failed to save draft"}}}async submitForReview(e){try{await new Promise(e=>setTimeout(e,1e3));const t=e.entry_id;return this.entries.set(t,e),{success:!0,entryId:t,message:"Entry submitted for review successfully"}}catch(t){return{success:!1,entryId:"",message:"Failed to submit entry for review"}}}async publishEntry(e){try{await new Promise(e=>setTimeout(e,1500));const t=e.entry_id;return this.entries.set(t,e),{success:!0,entryId:t,message:"Entry published successfully"}}catch(t){return{success:!1,entryId:"",message:"Failed to publish entry"}}}async loadDraft(e){try{const t=JSON.parse(localStorage.getItem("kb_drafts")||"{}")[e];return t||(this.drafts.get(e)||null)}catch(t){return console.error("Failed to load draft:",t),null}}async searchExistingEntries(e){try{await new Promise(e=>setTimeout(e,300));return[{entry_id:"RPC-Art308",title:"RPC Art. 308 \u2014 Theft",type:"statute_section"},{entry_id:"ROC-Rule113-Sec5",title:"Rule 113 Sec. 5 \u2014 Arrest without warrant",type:"rule_of_court"},{entry_id:"INC-DUI-001",title:"DUI Apprehension",type:"incident_checklist"}].filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.entry_id.toLowerCase().includes(e.toLowerCase()))}catch(t){return console.error("Failed to search entries:",t),[]}}async uploadSnapshot(e){try{await new Promise(e=>setTimeout(e,2e3));return{success:!0,url:"https://storage.example.com/snapshots/".concat(e.name),message:"File uploaded successfully"}}catch(t){return{success:!1,message:"Failed to upload file"}}}}Dt.instance=void 0;Dt.getInstance();const Et="http://localhost:4000",At="".concat(Et.endsWith("/api")?Et:Et+"/api","/kb");async function Ft(){try{const e=localStorage.getItem("auth_token"),t=await fetch("".concat(At,"/entries"),{headers:c(c({},e?{Authorization:"Bearer ".concat(e)}:{}),{},{"Cache-Control":"no-cache"}),cache:"no-store"}),n=await t.json();return null!==n&&void 0!==n&&n.success&&n.entries||[]}catch(e){return[]}}async function Pt(e){try{const t=localStorage.getItem("auth_token"),n=await fetch("".concat(At,"/entries/").concat(encodeURIComponent(e)),{headers:c(c({},t?{Authorization:"Bearer ".concat(t)}:{}),{},{"Cache-Control":"no-cache"}),cache:"no-store"}),r=await n.json();return null!==r&&void 0!==r&&r.success&&r.entry||null}catch(t){return null}}const Tt="http://localhost:4000",Ot="".concat(Tt.endsWith("/api")?Tt:Tt+"/api","/scraping");async function It(){const e=await fetch("".concat(Ot,"/batches"),{cache:"no-store"}),t=await e.json();if(!e.ok)throw new Error((null===t||void 0===t?void 0:t.error)||"Failed to list batches");return t}async function Rt(e,t){const n=t?JSON.stringify({limit:t}):void 0,r=await fetch("".concat(Ot,"/batch/").concat(encodeURIComponent(e),"/generate-entries"),{method:"POST",headers:n?{"Content-Type":"application/json"}:void 0,body:n}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((null===a||void 0===a?void 0:a.error)||"Failed to generate entries");return a}async function Mt(e){const t=localStorage.getItem("auth_token"),n=new URLSearchParams;n.set("query",e.query||""),e.type&&n.set("type",e.type),e.jurisdiction&&n.set("jurisdiction",e.jurisdiction),e.status&&n.set("status",e.status),e.verified&&n.set("verified",e.verified),null!=e.team_member_id&&n.set("team_member_id",String(e.team_member_id)),null!=e.limit&&n.set("limit",String(e.limit)),e.explain&&n.set("explain","true");const r=await fetch("".concat(At,"/search?").concat(n.toString()),{headers:c({},t?{Authorization:"Bearer ".concat(t)}:{}),cache:"no-store"});if(!r.ok)throw new Error("Search failed: ".concat(r.status));const a=await r.json();return{results:a.results||[],cursor:a.cursor||null}}var Lt=n(484);const zt=(e,t,n)=>"kbprog:".concat(e,":").concat(t,":").concat(n),Bt="kbprog:day1";function Vt(e,t,n){try{var r;return Number(null!==(r=localStorage.getItem(zt(e,t,n)))&&void 0!==r?r:"0")}catch(a){return 0}}function Ut(e,t,n,r){try{localStorage.setItem(zt(e,t,n),String(Math.max(0,r)))}catch(a){}}const Wt=["id","entry_id"],qt="team_progress",Ht="daily_quotas",$t=()=>{const[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),[l,d]=(0,r.useState)({}),[f,p]=(0,r.useState)({});(0,r.useEffect)(()=>{try{const e=localStorage.getItem(qt),t=localStorage.getItem(Ht);if(e){const t=JSON.parse(e);d(t)}if(t){const e=JSON.parse(t);p(e)}}catch(e){console.error("Error loading data from localStorage:",e)}finally{s(!1)}},[]),(0,r.useEffect)(()=>{(async()=>{try{const e=await Ft();if(Array.isArray(e)){const n=e.map(e=>c(c({},e),{},{id:e.entry_id}));t(n)}}catch(e){console.warn("DB fetch failed; no local cache used",e)}})()},[]),(0,r.useEffect)(()=>{const e=e=>{const n=(e&&e.detail&&Array.isArray(e.detail.entries)?e.detail.entries:[]).map(e=>c(c({},e),{},{id:e.entry_id}));t(n)},n=async()=>{try{const n=await Ft(),r=Array.isArray(n)?n.map(e=>c(c({},e),{},{id:e.entry_id})):[];t(r);try{window.dispatchEvent(new Event("entries-refreshed"))}catch(e){}}catch(n){}},r=()=>t([]);return window.addEventListener("replace-entries",e),window.addEventListener("force-refresh-entries",n),window.addEventListener("clear-entries",r),()=>{window.removeEventListener("replace-entries",e),window.removeEventListener("force-refresh-entries",n),window.removeEventListener("clear-entries",r)}},[]),(0,r.useEffect)(()=>{if(!a)try{localStorage.setItem(qt,JSON.stringify(l)),i&&i.includes("storage")&&o(null)}catch(e){console.error("Error saving team progress to localStorage:",e)}},[l,a,i]),(0,r.useEffect)(()=>{if(!a)try{localStorage.setItem(Ht,JSON.stringify(f)),i&&i.includes("storage")&&o(null)}catch(e){console.error("Error saving daily quotas to localStorage:",e)}},[f,a,i]),(0,r.useEffect)(()=>{if(!a){const e=()=>{const e=(new Date).toISOString().split("T")[0];f.lastReset!==e&&(console.log("New day detected, resetting daily quotas"),y())};e();const t=setInterval(e,6e4);return()=>clearInterval(t)}},[a,f.lastReset]);const m=(0,r.useMemo)(()=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[...e];if(t&&t.trim()){const e=e=>{if(!e)return"";let t=String(e);try{t=t.normalize("NFKD")}catch(n){}return t=t.replace(/[\u0300-\u036f]/g,""),t=t.toLowerCase(),t=t.replace(/[\u201c\u201d\u201e\u201f\u275b\u275c\u275d\u275e]/g,'"').replace(/[\u2018\u2019\u201a\u201b]/g,"'").replace(/[\u2013\u2014\u2015]/g,"-"),t=t.replace(/[&/]/g," and "),t=t.replace(/\xa7/g," section ").replace(/\bg\.?\s*r\.?\s*no\.?\b/g," gr number ").replace(/\bgr\.?\s*no\.?\b/g," gr number ").replace(/\bblg\.?\b/g," bilang "),t=t.replace(/\bart\.?\b/g,"article").replace(/\bart\.\s*/g,"article ").replace(/\barticulo\b/g,"article").replace(/\bsec\.?\b/g,"section").replace(/\bsec\.\s*/g,"section ").replace(/\bpar\.?\b/g,"paragraph").replace(/\bsubsec\.?\b/g,"subsection").replace(/\bsub\.\b/g,"subsection").replace(/\br\.?a\.?\b/g,"republic act").replace(/\bra\b/g,"republic act").replace(/\bno\.?\b/g,"number"),t=t.replace(/[^a-z0-9\s]/g," "),t=t.replace(/\s+/g," ").trim(),t=t.split(" ").map(e=>e.length>3&&/s$/.test(e)&&!/ss$/.test(e)?e.slice(0,-1):e).join(" "),t};let n=e(t);const a=n.split(/\s+/).filter(Boolean),s={m:1e3,d:500,c:100,l:50,x:10,v:5,i:1},i=e=>/^[ivxlcdm]+$/.test(e),o=e=>{if(!i(e))return null;let t=0,n=0;for(let r=e.length-1;r>=0;r--){const a=s[e[r]]||0;a<n?t-=a:t+=a,n=a}return t>0?String(t):null},l=e=>{const t=Number(e);if(!Number.isFinite(t)||t<=0||t>=4e3)return null;const n=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]];let r=t,a="";for(const[s,i]of n)for(;r>=s;)a+=i,r-=s;return a||null},c=new Set(["graft","trafficking","terrorism","wiretapping","fencing","hazing","money-laundering","moneylaundering","red-tape","redtape","trafficking-in-persons","carnapping","illegal-drugs","dangerous-drugs","terrorism-financing"]),u=e=>{if(!(e.startsWith("anti")&&e.length>4))return e;const t=e.replace(/^anti[-\s]?/,""),n=t.replace(/\s+/g,"-");return c.has(t)||c.has(n)?t:e},d=e=>{const t=new Set([e]);t.add(u(e)),"vs"!==e&&"vs."!==e&&"versus"!==e||t.add("v"),"v"===e&&t.add("vs");const n={rpc:["revised","penal","code","revised penal code"],ord:["ordinance"],ordinance:["ord"],ca:["commonwealth","act","commonwealth act"],"c.a.":["commonwealth","act","commonwealth act"],bp:["batas","pambansa","batas pambansa"],"b.p.":["batas","pambansa","batas pambansa"],blg:["bilang"],pd:["presidential","decree","presidential decree"],"p.d.":["presidential","decree","presidential decree"],irr:["implementing","rules","regulations","implementing rules and regulations"],roc:["rules","of","court","rules of court"],doj:["department","of","justice","department of justice"],brgy:["barangay"],bir:["bureau","of","internal","revenue","bureau of internal revenue"],nbi:["national","bureau","of","investigation","national bureau of investigation"],dilg:["department","of","the","interior","and","local","government","department of the interior and local government"],ltfrb:["land","transportation","franchising","and","regulatory","board","land transportation franchising and regulatory board"],dotr:["department","of","transportation","department of transportation"],dhsud:["department","of","human","settlements","and","urban","development","department of human settlements and urban development"]};if(n[e]&&n[e].forEach(e=>t.add(e)),/^\d+$/.test(e)){const n=l(e);n&&t.add(n)}else if(i(e)){const n=o(e);n&&t.add(n)}return Array.from(t).filter(Boolean)};let f=new Set(a.flatMap(d));for(let t=0;t<a.length-1;t++){const e=a[t],n=a[t+1];if(/^\d+$/.test(e)&&/^[a-z]$/.test(n)&&(f.add("".concat(e).concat(n)),f.add("".concat(e,"(").concat(n,")")),f.add("".concat(e,"-").concat(n))),i&&"function"===typeof i&&i(e)&&/^[a-z]$/.test(n)){f.add("".concat(e).concat(n)),f.add("".concat(e,"(").concat(n,")")),f.add("".concat(e,"-").concat(n));const t=o&&o(e);t&&(f.add("".concat(t).concat(n)),f.add("".concat(t,"(").concat(n,")")),f.add("".concat(t,"-").concat(n)))}}const p=n.replace(/\s+/g,""),m=n.replace(/\b(\d+)\s*([a-z])\b/g,"$1($2)").replace(/\b(\d+)\s*\(\s*([a-z])\s*\)\b/g,"$1($2)"),h=(e,t)=>{if(!e||!t||t.length<2)return!1;let n=0;const r=[];for(const a of t){const t=e.indexOf(a,n);if(-1===t)return!1;r.push(t),n=t+a.length}return r[r.length-1]-r[0]<=40},g=(t,n)=>{if(!t||!n)return!1;const r=e(t),s=r.replace(/\s+/g,""),i=String(n).replace(/\s+/g,"");if(r===n)return!0;if(r.startsWith(n))return!0;if(r.includes(n))return!0;if(s.includes(i))return!0;const o=n.replace(/\b(\d+)\s*([a-z])\b/g,"$1$2");if(r.includes(o)||s.includes(o))return!0;const l=r.split(/\s+/);for(const e of l)if(e.startsWith(n)||n.startsWith(e))return!0;return a.length>1&&a.every(e=>r.includes(e)||l.some(t=>t.startsWith(e)||e.startsWith(t)))},y=r.map(t=>{const r=Array.isArray(t.tags)?t.tags.join(" "):"",s=t.title&&t.canonical_citation?"".concat(t.title," ").concat(t.canonical_citation):"",i=t.title&&t.canonical_citation?"".concat(t.canonical_citation," ").concat(t.title):"",o=[t.title,t.canonical_citation,t.section_id,t.law_family,r,t.summary].filter(Boolean).join(" "),l=[{text:t.title,weight:12},{text:s,weight:13},{text:i,weight:12},{text:t.canonical_citation,weight:9},{text:t.section_id,weight:6},{text:t.law_family,weight:5},{text:r,weight:4},{text:t.entry_id,weight:5},{text:o,weight:3},{text:t.summary,weight:3},{text:t.effective_date,weight:3},{text:t.text,weight:2},{text:t.text_raw,weight:2}];let c=0,u=!1,y=!1;try{const t=t=>e(t);(s&&t(s)===n||i&&t(i)===n)&&(c+=1e3,u=!0)}catch(v){}for(const{text:b,weight:x}of l){if(!b)continue;const r=e(b),s=r.replace(/\s+/g,""),i=r.split(/\s+/).filter(Boolean),o=new Set(i.flatMap(d));if(r===n)c+=3*x,u=!0;else if(r.startsWith(n))c+=2*x,u=!0;else if(r.includes(n))c+=x,u=!0,!y&&a.length>1&&(x>=12||b===t.summary)&&(c+=Math.min(20,Math.round(1.5*x)),y=!0),a.length>1&&x>=9&&h(r,a)&&(c+=Math.min(10,Math.round(.5*x)));else if(s.includes(p))c+=.9*x,u=!0;else if(r.includes(m))c+=.9*x,u=!0;else{const e=Array.from(f).filter(e=>Array.from(o).some(t=>t.includes(e)||e.includes(t))),t=e.length/Math.max(1,a.length);t>=.6?(c+=x*(.6+.4*Math.min(1,t)),u=!0):e.length>=1?(c+=.4*x,u=!0):g(b,n)&&(c+=.5*x,u=!0)}if(!u&&(x>=12||x>=6)){const e=a.filter(e=>e.length>=3&&e.length<=6);if(e.length){const t=e.some(e=>i.some(t=>{const n=e.length,r=t.length;if(Math.abs(n-r)>1)return!1;let a=0,s=0,i=0;for(;a<n&&s<r;)if(e[a]!==t[s]){if(1===i)return!1;i++,n>r?a++:(r>n||a++,s++)}else a++,s++;return(a<n||s<r)&&i++,i<=1}));t&&(c+=.6*x,u=!0)}}}return{entry:t,score:c,hasMatch:u}}),v=1e-6;r=y.filter(e=>{let{hasMatch:t}=e;return t}).sort((e,t)=>{if(Math.abs(t.score-e.score)>v)return t.score-e.score;const n=!0===e.entry.verified?1:0,r=!0===t.entry.verified?1:0;if(r!==n)return r-n;const a="active"===String(e.entry.status||"").toLowerCase()?1:0,s="active"===String(t.entry.status||"").toLowerCase()?1:0;if(s!==a)return s-a;const i=e.entry.effective_date?Date.parse(e.entry.effective_date):0,o=t.entry.effective_date?Date.parse(t.entry.effective_date):0;if(o!==i)return o-i;const l=(e.entry.title||"").length,c=(t.entry.title||"").length;if(l!==c)return l-c;const u=String(e.entry.entry_id||e.entry.id||""),d=String(t.entry.entry_id||t.entry.id||"");return u.localeCompare(d)}).map(e=>{let{entry:t}=e;return t})}return n.type&&"all"!==n.type&&(r=r.filter(e=>e.type===n.type)),n.subtype&&"all"!==n.subtype&&n.type&&"all"!==n.type&&(r=r.filter(e=>e.entry_subtype===n.subtype)),n.jurisdiction&&"all"!==n.jurisdiction&&(r=r.filter(e=>e.jurisdiction===n.jurisdiction)),n.status&&"all"!==n.status&&(r=r.filter(e=>"released"===n.status?null!==e.published_at&&void 0!==e.published_at:"unreleased"!==n.status||(null===e.published_at||void 0===e.published_at))),n.tags&&n.tags.length>0&&(r=r.filter(e=>e.tags&&n.tags.some(t=>e.tags.includes(t)))),void 0!==n.offline_pack&&(r=r.filter(e=>e.offline&&e.offline.pack_include===n.offline_pack)),r},[e]),h=()=>e.filter(e=>e.offline&&e.offline.pack_include),g=(e,t)=>{const n=(new Date).toISOString().split("T")[0],r="".concat(e,"_").concat(n);d(e=>{var n,a;return c(c({},e),{},{[r]:c(c({},e[r]),{},{[t]:Math.max(0,((null===(n=e[r])||void 0===n?void 0:n[t])||0)-1),total:Math.max(0,((null===(a=e[r])||void 0===a?void 0:a.total)||0)-1)})})})},y=()=>{const{getPlanDate:e,toISODate:t}=n(484),r=t(e(new Date));p(e=>c(c({},e),{},{lastReset:r}));const a=new Date;a.setDate(a.getDate()-7);const s=a.toISOString().split("T")[0];d(e=>{const t={};return Object.keys(e).forEach(n=>{n.split("_")[1]>=s&&(t[n]=e[n])}),t}),console.log("Daily quotas reset for",r)};return{entries:e,setEntries:t,loading:a,error:i,clearError:()=>o(null),addEntry:async e=>{try{if(!e.entry_id)throw new Error("entry_id is required");const n={entry_id:e.entry_id,type:e.type,title:e.title,canonical_citation:e.canonical_citation,summary:e.summary,text:e.text,tags:e.tags,jurisdiction:e.jurisdiction,law_family:e.law_family,section_id:e.section_id,status:e.status,effective_date:e.effective_date,amendment_date:e.amendment_date,last_reviewed:e.last_reviewed,visibility:e.visibility,source_urls:e.source_urls,elements:e.elements,penalties:e.penalties,defenses:e.defenses,prescriptive_period:e.prescriptive_period,standard_of_proof:e.standard_of_proof,rule_no:e.rule_no,section_no:e.section_no,triggers:e.triggers,time_limits:e.time_limits,required_forms:e.required_forms,circular_no:e.circular_no,applicability:e.applicability,issuance_no:e.issuance_no,instrument_no:e.instrument_no,supersedes:e.supersedes,steps_brief:e.steps_brief,forms_required:e.forms_required,failure_states:e.failure_states,violation_code:e.violation_code,violation_name:e.violation_name,license_action:e.license_action,fine_schedule:e.fine_schedule,apprehension_flow:e.apprehension_flow,incident:e.incident,phases:e.phases,forms:e.forms,handoff:e.handoff,rights_callouts:e.rights_callouts,rights_scope:e.rights_scope,advice_points:e.advice_points,topics:e.topics,jurisprudence:e.jurisprudence,legal_bases:e.legal_bases,related_sections:e.related_sections,created_by:e.created_by,created_by_name:e.created_by_name},r=await async function(e){try{const t=localStorage.getItem("auth_token"),n=e||{},{verified:r,verified_by:a,verified_at:s}=n,i=u(n,kt),o=await fetch("".concat(jt,"/entries"),{method:"POST",headers:c({"Content-Type":"application/json"},t?{Authorization:"Bearer ".concat(t)}:{}),body:JSON.stringify(i)});return await o.json()}catch(ou){return{success:!1,error:String((null===ou||void 0===ou?void 0:ou.message)||ou)}}}(n);if(null===r||void 0===r||!r.success)throw new Error((null===r||void 0===r?void 0:r.error)||"Upsert failed");const a=await Ft();if(Array.isArray(a)){const e=a.map(e=>c(c({},e),{},{id:e.entry_id}));t(e),o(null)}const s=String(e.created_by_username||e.created_by_name||e.team_member_id||"").trim();if(s){!function(e,t,n){try{const r=String(t).trim(),a=Vt(e,r,n)+1;return Ut(e,r,n,a),console.log("Updated progress for ".concat(r," on ").concat(e,": ").concat(n," = ").concat(a," (ENTRY CREATION ONLY)")),a}catch(i){return console.error("Failed to update progress for entry:",i),0}}(e.created_at?new Date(e.created_at).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],s,e.type)}return n}catch(n){throw console.error("Error adding entry:",n),o("Failed to add entry"),n}},updateEntry:async(n,r)=>{try{const a=e.find(e=>e.id===n);if(!a)throw new Error("Entry not found");const s=c(c({},a),r);if(!s.entry_id)throw new Error("entry_id is required");const i=e=>null===e||void 0===e?"":String(e),l={constitution_provision:["topics","related_sections","jurisprudence"],statute_section:["elements","penalties","defenses","prescriptive_period","standard_of_proof","related_sections","legal_bases"],city_ordinance_section:["elements","penalties","defenses","related_sections","legal_bases"],rule_of_court:["rule_no","section_no","triggers","time_limits","required_forms","related_sections"],agency_circular:["circular_no","section_no","applicability","legal_bases","supersedes"],doj_issuance:["issuance_no","applicability","legal_bases","supersedes"],executive_issuance:["instrument_no","applicability","legal_bases","supersedes"],rights_advisory:["rights_scope","advice_points","legal_bases","related_sections"]}[s.type]||[],u={entry_id:s.entry_id,type:s.type,title:i(s.title),canonical_citation:i(s.canonical_citation),summary:i(s.summary),text:i(s.text),tags:s.tags,jurisdiction:s.jurisdiction,law_family:i(s.law_family),section_id:i(s.section_id),status:i(s.status),effective_date:s.effective_date,amendment_date:s.amendment_date,last_reviewed:s.last_reviewed,visibility:s.visibility,source_urls:s.source_urls,legal_bases:s.legal_bases,related_sections:s.related_sections};l.includes("elements")&&(u.elements=s.elements),l.includes("penalties")&&(u.penalties=s.penalties),l.includes("defenses")&&(u.defenses=s.defenses),l.includes("prescriptive_period")&&(u.prescriptive_period=s.prescriptive_period),l.includes("standard_of_proof")&&(u.standard_of_proof=i(s.standard_of_proof)),l.includes("rule_no")&&(u.rule_no=i(s.rule_no)),l.includes("section_no")&&(u.section_no=i(s.section_no)),l.includes("triggers")&&(u.triggers=s.triggers),l.includes("time_limits")&&(u.time_limits=s.time_limits),l.includes("required_forms")&&(u.required_forms=s.required_forms),l.includes("circular_no")&&(u.circular_no=i(s.circular_no)),l.includes("applicability")&&(u.applicability=s.applicability),l.includes("issuance_no")&&(u.issuance_no=i(s.issuance_no)),l.includes("instrument_no")&&(u.instrument_no=i(s.instrument_no)),l.includes("supersedes")&&(u.supersedes=s.supersedes),l.includes("steps_brief")&&(u.steps_brief=s.steps_brief),l.includes("forms_required")&&(u.forms_required=s.forms_required),l.includes("failure_states")&&(u.failure_states=s.failure_states),l.includes("violation_code")&&(u.violation_code=i(s.violation_code)),l.includes("violation_name")&&(u.violation_name=i(s.violation_name)),l.includes("license_action")&&(u.license_action=i(s.license_action)),l.includes("fine_schedule")&&(u.fine_schedule=s.fine_schedule),l.includes("apprehension_flow")&&(u.apprehension_flow=s.apprehension_flow),l.includes("incident")&&(u.incident=i(s.incident)),l.includes("phases")&&(u.phases=s.phases),l.includes("forms")&&(u.forms=s.forms),l.includes("handoff")&&(u.handoff=s.handoff),l.includes("rights_callouts")&&(u.rights_callouts=s.rights_callouts),l.includes("rights_scope")&&(u.rights_scope=i(s.rights_scope)),l.includes("advice_points")&&(u.advice_points=s.advice_points),l.includes("topics")&&(u.topics=s.topics),l.includes("jurisprudence")&&(u.jurisprudence=s.jurisprudence),console.log("\ud83d\udd27 Update Entry - Type:",s.type),console.log("\ud83d\udd27 Update Entry - Relevant fields:",l),console.log("\ud83d\udd27 Update Entry - Payload keys:",Object.keys(u)),console.log("\ud83d\udd27 Update Entry - Has standard_of_proof:","standard_of_proof"in u);const d=await fetch("".concat("http://localhost:4000","/api/kb/entries/").concat(s.entry_id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))},body:JSON.stringify(u)});if(!d.ok){const e=await d.json();throw new Error(e.error||"Update failed")}const f=await d.json();if(null===f||void 0===f||!f.success)throw new Error((null===f||void 0===f?void 0:f.error)||"Update failed");const p=await Ft();if(Array.isArray(p)){const e=p.map(e=>c(c({},e),{},{id:e.entry_id}));t(e),o(null)}console.log("Entry updated successfully:",f)}catch(a){throw console.error("Error updating entry:",a),o("Failed to update entry"),a}},deleteEntry:async n=>{try{const r=e.find(e=>e.id===n);if(!r||!r.entry_id)throw new Error("Entry not found");await St(r.entry_id);const a=await Ft();if(Array.isArray(a)){const e=a.map(e=>c(c({},e),{},{id:e.entry_id}));t(e)}r&&r.team_member_id&&g(r.team_member_id,r.type)}catch(r){throw console.error("Error deleting entry:",r),o("Failed to delete entry"),r}},getEntryById:t=>e.find(e=>e.id===t),getEntryByEntryId:t=>e.find(e=>e.entry_id===t),searchEntries:m,getEntriesByType:t=>e.filter(e=>e.type===t),getOfflinePackEntries:h,exportEntries:()=>{let t=e;try{const n=localStorage.getItem("entry_filter_snapshot"),r=localStorage.getItem("entry_search_query"),a=n?JSON.parse(n):{},s=r?String(r):"",i=!!a&&Object.keys(a).some(e=>{const t=a[e];return void 0!==t&&null!==t&&(("string"!==typeof t||""!==t.trim())&&(("string"!==typeof t||"all"!==t)&&(!Array.isArray(t)||0!==t.length)))}),o="string"===typeof s&&s.trim().length>0;if(i||o){t=((t,n)=>{let r=[...e];try{if("function"===typeof m)return m(t,n)}catch(a){}return r})(s,a)}}catch(ou){t=e}const n=JSON.stringify(t,null,2),r=new Blob([n],{type:"application/json"}),a=URL.createObjectURL(r),s=document.createElement("a");s.href=a;const i=t&&t.length?"".concat(t.length,"-items"):"all";s.download="KB-existing-entries-".concat(i,"-").concat((new Date).toISOString().split("T")[0],".json"),s.click(),URL.revokeObjectURL(a)},exportSingleEntry:e=>{if(!e)return;const t=JSON.stringify([e],null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download="".concat(e.entry_id,"_").concat((new Date).toISOString().split("T")[0],".json"),a.click(),URL.revokeObjectURL(r)},importEntries:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const r=JSON.parse(e),a=Array.isArray(r)?r:[r];if(!a||0===a.length)return{success:!1,error:"No entries found in file"};const s=a[0];if(!s||"object"!==typeof s)return{success:!1,error:"Invalid entry format"};if(!(s.title||s.citation||s.entry_id||s.url))return{success:!1,error:"Entry must have at least one of: title, citation, entry_id, or url"};if(s.entry_id)try{const e=await Ft();if(new Set((e||[]).map(e=>e.entry_id)).has(s.entry_id))return{success:!1,error:'Entry with ID "'.concat(s.entry_id,'" already exists')}}catch(n){console.warn("Could not check for existing entries, proceeding with import:",n)}const{id:i,entry_id:o}=s,l=c(c({},u(s,Wt)),{},{created_by:null!==t&&void 0!==t&&t.personId?Number(String(t.personId).replace("P","")):s.created_by&&0!==s.created_by?s.created_by:5,created_by_name:(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.username)||s.created_by_name||"Imported User",created_by_username:null===t||void 0===t?void 0:t.username,verified:!1,verified_at:null,verified_by:null,last_reviewed:(new Date).toISOString().slice(0,10)});try{localStorage.removeItem("kb_entry_draft"),localStorage.removeItem("kb_draft"),localStorage.removeItem("kb_drafts"),localStorage.setItem("kb_entry_draft",JSON.stringify(l)),console.log("Cleared all existing drafts and set imported entry as new draft")}catch(ou){console.error("Failed to clear/set draft:",ou)}return console.log("Import successful, returning form data:",l),{success:!0,data:l}}catch(n){throw console.error("Error importing entries:",n),new Error("Failed to import entries")}},clearAllEntries:()=>{t([]);try{localStorage.removeItem("law_entries")}catch(e){}d({}),p({})},getStorageStats:()=>{const t=e.length,n=h().length,r=new Blob([JSON.stringify(e)]).size;return{totalEntries:t,offlinePackEntries:n,sizeInKB:Math.round(r/1024),progressPercentage:Math.min(t/1500*100,100),remainingEntries:Math.max(0,1500-t)}},getTeamMemberProgress:e=>{const t=(new Date).toISOString().split("T")[0],n="".concat(e,"_").concat(t);return l[n]||{total:0}},getAllTeamProgress:()=>{const e=(new Date).toISOString().split("T")[0],t={};for(let n=1;n<=5;n++){const r="".concat(n,"_").concat(e);t[n]=l[r]||{total:0}}return t},resetDailyQuotas:y,updateTeamProgress:(e,t)=>{const n=(new Date).toISOString().split("T")[0],r="".concat(e,"_").concat(n);d(e=>{var n,a;return c(c({},e),{},{[r]:c(c({},e[r]),{},{[t]:((null===(n=e[r])||void 0===n?void 0:n[t])||0)+1,total:((null===(a=e[r])||void 0===a?void 0:a.total)||0)+1})})})},decrementTeamProgress:g,getYesterdayTeamProgress:()=>{const e=new Date;e.setDate(e.getDate()-1);const t=e.toISOString().split("T")[0],n={};for(let r=1;r<=5;r++){const e="".concat(r,"_").concat(t);n[r]=l[e]||{total:0}}return n},checkDailyCompletion:(e,t)=>{const{getPlanDate:r,toISODate:a,computeDayIndex:s,rowsForDay:i}=n(484),o=a(r(new Date)),c="".concat(e,"_").concat(o),u=l[c]||{total:0},d="undefined"!==typeof window&&window.__KB_DAY1__?window.__KB_DAY1__:n(488).j.toISOString().split("T")[0],f=s(new Date,d),p=i(window.__KB_PLAN__&&Array.isArray(window.__KB_PLAN__)?window.__KB_PLAN__:[],f),m="P".concat(e),h=p.find(e=>String(e.Person).trim().toUpperCase()===m);if(!h)return!1;const g={statute_section:Number(h.statute_section||0),rule_of_court:Number(h.rule_of_court||0),rights_advisory:Number(h.rights_advisory||0),constitution_provision:Number(h.constitution_provision||0),agency_circular:Number(h.agency_circular||0),doj_issuance:Number(h.doj_issuance||0),executive_issuance:Number(h.executive_issuance||0),city_ordinance_section:Number(h.city_ordinance_section||0)},y=Object.values(g).reduce((e,t)=>e+(Number(t)||0),0),v=(u.total||0)+1,b=(u[t]||0)+1;return v===y||!(!g[t]||b!==g[t])}}},Zt=["children"],Jt=["_f"],Yt=["name"],Kt=["_f"],Qt=["ref","message","type"],Gt=["formControl"];var Xt=e=>"checkbox"===e.type,en=e=>e instanceof Date,tn=e=>null==e;const nn=e=>"object"===typeof e;var rn=e=>!tn(e)&&!Array.isArray(e)&&nn(e)&&!en(e),an=e=>rn(e)&&e.target?Xt(e.target)?e.target.checked:e.target.value:e,sn=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),on="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function ln(e){let t;const n=Array.isArray(e),r="undefined"!==typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(on&&(e instanceof Blob||r)||!n&&!rn(e))return e;if(t=n?[]:Object.create(Object.getPrototypeOf(e)),n||(e=>{const t=e.constructor&&e.constructor.prototype;return rn(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=ln(e[n]));else t=e}return t}var cn=e=>/^\w*$/.test(e),un=e=>void 0===e,dn=e=>Array.isArray(e)?e.filter(Boolean):[],fn=e=>dn(e.replace(/["|']|\]/g,"").split(/\.|\[/)),pn=(e,t,n)=>{if(!t||!rn(e))return n;const r=(cn(t)?[t]:fn(t)).reduce((e,t)=>tn(e)?e:e[t],e);return un(r)||r===e?un(e[t])?n:e[t]:r},mn=e=>"boolean"===typeof e,hn=(e,t,n)=>{let r=-1;const a=cn(t)?[t]:fn(t),s=a.length,i=s-1;for(;++r<s;){const t=a[r];let s=n;if(r!==i){const n=e[t];s=rn(n)||Array.isArray(n)?n:isNaN(+a[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=s,e=e[t]}};const gn="blur",yn="focusout",vn="change",bn="onBlur",xn="onChange",_n="onSubmit",wn="onTouched",kn="all",jn="max",Nn="min",Sn="maxLength",Cn="minLength",Dn="pattern",En="required",An="validate",Fn=r.createContext(null);Fn.displayName="HookFormContext";const Pn=()=>r.useContext(Fn),Tn=e=>{const{children:t}=e,n=u(e,Zt);return r.createElement(Fn.Provider,{value:n},t)};var On=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const a=s;return t._proxyFormState[a]!==kn&&(t._proxyFormState[a]=!r||kn),n&&(n[a]=!0),e[a]}});return a};const In="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;var Rn=e=>"string"===typeof e,Mn=(e,t,n,r,a)=>Rn(e)?(r&&t.watch.add(e),pn(n,e,a)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),pn(n,e))):(r&&(t.watchAll=!0),n),Ln=e=>tn(e)||!nn(e);function zn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;if(Ln(e)||Ln(t))return e===t;if(en(e)&&en(t))return e.getTime()===t.getTime();const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const s of r){const r=e[s];if(!a.includes(s))return!1;if("ref"!==s){const e=t[s];if(en(r)&&en(e)||rn(r)&&rn(e)||Array.isArray(r)&&Array.isArray(e)?!zn(r,e,n):r!==e)return!1}}return!0}function Bn(e){const t=Pn(),{control:n=t.control,name:a,defaultValue:s,disabled:i,exact:o,compute:l}=e||{},c=r.useRef(s),u=r.useRef(l),d=r.useRef(void 0);u.current=l;const f=r.useMemo(()=>n._getWatch(a,c.current),[n,a]),[p,m]=r.useState(u.current?u.current(f):f);return In(()=>n._subscribe({name:a,formState:{values:!0},exact:o,callback:e=>{if(!i){const t=Mn(a,n._names,e.values||n._formValues,!1,c.current);if(u.current){const e=u.current(t);zn(e,d.current)||(m(e),d.current=e)}else m(t)}}}),[n,i,a,o]),r.useEffect(()=>n._removeUnmounted()),p}function Vn(e){const t=Pn(),{name:n,disabled:a,control:s=t.control,shouldUnregister:i,defaultValue:o}=e,l=sn(s._names.array,n),u=r.useMemo(()=>pn(s._formValues,n,pn(s._defaultValues,n,o)),[s,n,o]),d=Bn({control:s,name:n,defaultValue:u,exact:!0}),f=function(e){const t=Pn(),{control:n=t.control,disabled:a,name:s,exact:i}=e||{},[o,l]=r.useState(n._formState),u=r.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return In(()=>n._subscribe({name:s,formState:u.current,exact:i,callback:e=>{!a&&l(c(c({},n._formState),e))}}),[s,a,i]),r.useEffect(()=>{u.current.isValid&&n._setValid(!0)},[n]),r.useMemo(()=>On(o,n,u.current,!1),[o,n])}({control:s,name:n,exact:!0}),p=r.useRef(e),m=r.useRef(void 0),h=r.useRef(s.register(n,c(c({},e.rules),{},{value:d},mn(e.disabled)?{disabled:e.disabled}:{})));p.current=e;const g=r.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!pn(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!pn(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!pn(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!pn(f.validatingFields,n)},error:{enumerable:!0,get:()=>pn(f.errors,n)}}),[f,n]),y=r.useCallback(e=>h.current.onChange({target:{value:an(e),name:n},type:vn}),[n]),v=r.useCallback(()=>h.current.onBlur({target:{value:pn(s._formValues,n),name:n},type:gn}),[n,s._formValues]),b=r.useCallback(e=>{const t=pn(s._fields,n);t&&e&&(t._f.ref={focus:()=>e.focus&&e.focus(),select:()=>e.select&&e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})},[s._fields,n]),x=r.useMemo(()=>c(c({name:n,value:d},mn(a)||f.disabled?{disabled:f.disabled||a}:{}),{},{onChange:y,onBlur:v,ref:b}),[n,a,f.disabled,y,v,b,d]);return r.useEffect(()=>{const e=s._options.shouldUnregister||i,t=m.current;t&&t!==n&&!l&&s.unregister(t),s.register(n,c(c({},p.current.rules),mn(p.current.disabled)?{disabled:p.current.disabled}:{}));const r=(e,t)=>{const n=pn(s._fields,e);n&&n._f&&(n._f.mount=t)};if(r(n,!0),e){const e=ln(pn(s._options.defaultValues,n,p.current.defaultValue));hn(s._defaultValues,n,e),un(pn(s._formValues,n))&&hn(s._formValues,n,e)}return!l&&s.register(n),m.current=n,()=>{(l?e&&!s._state.action:e)?s.unregister(n):r(n,!1)}},[n,s,l,i]),r.useEffect(()=>{s._setDisabledField({disabled:a,name:n})},[a,n,s]),r.useMemo(()=>({field:x,formState:f,fieldState:g}),[x,f,g])}const Un=e=>e.render(Vn(e));var Wn=(e,t,n,r,a)=>t?c(c({},n[e]),{},{types:c(c({},n[e]&&n[e].types?n[e].types:{}),{},{[r]:a||!0})}):{},qn=e=>Array.isArray(e)?e:[e],Hn=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function $n(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const a=e[r],s=t[r];if(a&&rn(a)&&s){const e=$n(a,s);rn(e)&&(n[r]=e)}else e[r]&&(n[r]=s)}return n}var Zn=e=>rn(e)&&!Object.keys(e).length,Jn=e=>"file"===e.type,Yn=e=>"function"===typeof e,Kn=e=>{if(!on)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Qn=e=>"select-multiple"===e.type,Gn=e=>"radio"===e.type,Xn=e=>Kn(e)&&e.isConnected;function er(e,t){const n=Array.isArray(t)?t:cn(t)?[t]:fn(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=un(e)?r++:e[t[r++]];return e}(e,n),a=n.length-1,s=n[a];return r&&delete r[s],0!==a&&(rn(r)&&Zn(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!un(e[t]))return!1;return!0}(r))&&er(e,n.slice(0,-1)),e}function tr(e){return Array.isArray(e)||rn(e)&&!(e=>{for(const t in e)if(Yn(e[t]))return!0;return!1})(e)}function nr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n in e)tr(e[n])?(t[n]=Array.isArray(e[n])?[]:{},nr(e[n],t[n])):tn(e[n])||(t[n]=!0);return t}function rr(e,t,n){n||(n=nr(t));for(const r in e)tr(e[r])?un(t)||Ln(n[r])?n[r]=nr(e[r],Array.isArray(e[r])?[]:{}):rr(e[r],tn(t)?{}:t[r],n[r]):n[r]=!zn(e[r],t[r]);return n}const ar={value:!1,isValid:!1},sr={value:!0,isValid:!0};var ir=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!un(e[0].attributes.value)?un(e[0].value)||""===e[0].value?sr:{value:e[0].value,isValid:!0}:sr:ar}return ar},or=(e,t)=>{let{valueAsNumber:n,valueAsDate:r,setValueAs:a}=t;return un(e)?e:n?""===e?NaN:e?+e:e:r&&Rn(e)?new Date(e):a?a(e):e};const lr={isValid:!1,value:null};var cr=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,lr):lr;function ur(e){const t=e.ref;return Jn(t)?t.files:Gn(t)?cr(e.refs).value:Qn(t)?[...t.selectedOptions].map(e=>{let{value:t}=e;return t}):Xt(t)?ir(e.refs).value:or(un(t.value)?e.ref.value:t.value,e)}var dr=e=>e instanceof RegExp,fr=e=>un(e)?e:dr(e)?e.source:rn(e)?dr(e.value)?e.value.source:e.value:e,pr=e=>({isOnSubmit:!e||e===_n,isOnBlur:e===bn,isOnChange:e===xn,isOnAll:e===kn,isOnTouch:e===wn});const mr="AsyncFunction";var hr=e=>!!e&&!!e.validate&&!!(Yn(e.validate)&&e.validate.constructor.name===mr||rn(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===mr)),gr=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const yr=(e,t,n,r)=>{for(const a of n||Object.keys(e)){const n=pn(e,a);if(n){const{_f:e}=n,s=u(n,Jt);if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],a)&&!r)return!0;if(e.ref&&t(e.ref,e.name)&&!r)return!0;if(yr(s,t))break}else if(rn(s)&&yr(s,t))break}}};function vr(e,t,n){const r=pn(e,n);if(r||cn(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const r=a.join("."),s=pn(t,r),i=pn(e,r);if(s&&!Array.isArray(s)&&n!==r)return{name:n};if(i&&i.type)return{name:r,error:i};if(i&&i.root&&i.root.type)return{name:"".concat(r,".root"),error:i.root};a.pop()}return{name:n}}var br=(e,t,n)=>{const r=qn(pn(e,n));return hn(r,"root",t[n]),hn(e,n,r),e};function xr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(Rn(e)||Array.isArray(e)&&e.every(Rn)||mn(e)&&!e)return{type:n,message:Rn(e)?e:"",ref:t}}var _r=e=>rn(e)&&!dr(e)?e:{value:e,message:""},wr=async(e,t,n,r,a,s)=>{const{ref:i,refs:o,required:l,maxLength:u,minLength:d,min:f,max:p,pattern:m,validate:h,name:g,valueAsNumber:y,mount:v}=e._f,b=pn(n,g);if(!v||t.has(g))return{};const x=o?o[0]:i,_=e=>{a&&x.reportValidity&&(x.setCustomValidity(mn(e)?"":e||""),x.reportValidity())},w={},k=Gn(i),j=Xt(i),N=k||j,S=(y||Jn(i))&&un(i.value)&&un(b)||Kn(i)&&""===i.value||""===b||Array.isArray(b)&&!b.length,C=Wn.bind(null,g,r,w),D=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Sn,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Cn;const s=e?t:n;w[g]=c({type:e?r:a,message:s,ref:i},C(e?r:a,s))};if(s?!Array.isArray(b)||!b.length:l&&(!N&&(S||tn(b))||mn(b)&&!b||j&&!ir(o).isValid||k&&!cr(o).isValid)){const{value:e,message:t}=Rn(l)?{value:!!l,message:l}:_r(l);if(e&&(w[g]=c({type:En,message:t,ref:x},C(En,t)),!r))return _(t),w}if(!S&&(!tn(f)||!tn(p))){let e,t;const n=_r(p),a=_r(f);if(tn(b)||isNaN(b)){const r=i.valueAsDate||new Date(b),s=e=>new Date((new Date).toDateString()+" "+e),o="time"==i.type,l="week"==i.type;Rn(n.value)&&b&&(e=o?s(b)>s(n.value):l?b>n.value:r>new Date(n.value)),Rn(a.value)&&b&&(t=o?s(b)<s(a.value):l?b<a.value:r<new Date(a.value))}else{const r=i.valueAsNumber||(b?+b:b);tn(n.value)||(e=r>n.value),tn(a.value)||(t=r<a.value)}if((e||t)&&(D(!!e,n.message,a.message,jn,Nn),!r))return _(w[g].message),w}if((u||d)&&!S&&(Rn(b)||s&&Array.isArray(b))){const e=_r(u),t=_r(d),n=!tn(e.value)&&b.length>+e.value,a=!tn(t.value)&&b.length<+t.value;if((n||a)&&(D(n,e.message,t.message),!r))return _(w[g].message),w}if(m&&!S&&Rn(b)){const{value:e,message:t}=_r(m);if(dr(e)&&!b.match(e)&&(w[g]=c({type:Dn,message:t,ref:i},C(Dn,t)),!r))return _(t),w}if(h)if(Yn(h)){const e=xr(await h(b,n),x);if(e&&(w[g]=c(c({},e),C(An,e.message)),!r))return _(e.message),w}else if(rn(h)){let e={};for(const t in h){if(!Zn(e)&&!r)break;const a=xr(await h[t](b,n),x,t);a&&(e=c(c({},a),C(t,a.message)),_(a.message),r&&(w[g]=e))}if(!Zn(e)&&(w[g]=c({ref:x},e),!r))return w}return _(!0),w};const kr={mode:_n,reValidateMode:xn,shouldFocusError:!0};function jr(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=c(c({},kr),t),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Yn(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},a={},s=(rn(n.defaultValues)||rn(n.values))&&ln(n.defaultValues||n.values)||{},i=n.shouldUnregister?{}:ln(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p=c({},f);const m={array:Hn(),state:Hn()},h=n.criteriaMode===kn,g=async e=>{if(!n.disabled&&(f.isValid||p.isValid||e)){const e=n.resolver?Zn((await _()).errors):await w(a,!0);e!==r.isValid&&m.state.next({isValid:e})}},y=(e,t)=>{!n.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?hn(r.validatingFields,e,t):er(r.validatingFields,e))}),m.state.next({validatingFields:r.validatingFields,isValidating:!Zn(r.validatingFields)}))},v=(e,t,n,r)=>{const l=pn(a,e);if(l){const a=pn(i,e,un(n)?pn(s,e):n);un(a)||r&&r.defaultChecked||t?hn(i,e,t?a:ur(l._f)):N(e,a),o.mount&&g()}},b=(e,t,a,i,o)=>{let l=!1,c=!1;const u={name:e};if(!n.disabled){if(!a||i){(f.isDirty||p.isDirty)&&(c=r.isDirty,r.isDirty=u.isDirty=k(),l=c!==u.isDirty);const n=zn(pn(s,e),t);c=!!pn(r.dirtyFields,e),n?er(r.dirtyFields,e):hn(r.dirtyFields,e,!0),u.dirtyFields=r.dirtyFields,l=l||(f.dirtyFields||p.dirtyFields)&&c!==!n}if(a){const t=pn(r.touchedFields,e);t||(hn(r.touchedFields,e,a),u.touchedFields=r.touchedFields,l=l||(f.touchedFields||p.touchedFields)&&t!==a)}l&&o&&m.state.next(u)}return l?u:{}},x=(t,a,s,i)=>{const o=pn(r.errors,t),l=(f.isValid||p.isValid)&&mn(a)&&r.isValid!==a;var u;if(n.delayError&&s?(u=()=>((e,t)=>{hn(r.errors,e,t),m.state.next({errors:r.errors})})(t,s),e=e=>{clearTimeout(d),d=setTimeout(u,e)},e(n.delayError)):(clearTimeout(d),e=null,s?hn(r.errors,t,s):er(r.errors,t)),(s?!zn(o,s):o)||!Zn(i)||l){const e=c(c(c({},i),l&&mn(a)?{isValid:a}:{}),{},{errors:r.errors,name:t});r=c(c({},r),e),m.state.next(e)}},_=async e=>{y(e,!0);const t=await n.resolver(i,n.context,((e,t,n,r)=>{const a={};for(const s of e){const e=pn(t,s);e&&hn(a,s,e._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:r}})(e||l.mount,a,n.criteriaMode,n.shouldUseNativeValidation));return y(e),t},w=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const s in e){const o=e[s];if(o){const{_f:e}=o,s=u(o,Kt);if(e){const s=l.array.has(e.name),c=o._f&&hr(o._f);c&&f.validatingFields&&y([e.name],!0);const u=await wr(o,l.disabled,i,h,n.shouldUseNativeValidation&&!t,s);if(c&&f.validatingFields&&y([e.name]),u[e.name]&&(a.valid=!1,t))break;!t&&(pn(u,e.name)?s?br(r.errors,u,e.name):hn(r.errors,e.name,u[e.name]):er(r.errors,e.name))}!Zn(s)&&await w(s,t,a)}}return a.valid},k=(e,t)=>!n.disabled&&(e&&t&&hn(i,e,t),!zn(F(),s)),j=(e,t,n)=>Mn(e,l,c({},o.mount?i:un(t)?s:Rn(e)?{[e]:t}:t),n,t),N=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=pn(a,e);let s=t;if(r){const n=r._f;n&&(!n.disabled&&hn(i,e,or(t,n)),s=Kn(n.ref)&&tn(t)?"":t,Qn(n.ref)?[...n.ref.options].forEach(e=>e.selected=s.includes(e.value)):n.refs?Xt(n.ref)?n.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(s)?e.checked=!!s.find(t=>t===e.value):e.checked=s===e.value||!!s)}):n.refs.forEach(e=>e.checked=e.value===s):Jn(n.ref)?n.ref.value="":(n.ref.value=s,n.ref.type||m.state.next({name:e,values:ln(i)})))}(n.shouldDirty||n.shouldTouch)&&b(e,s,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&A(e)},S=(e,t,n)=>{for(const r in t){if(!t.hasOwnProperty(r))return;const s=t[r],i=e+"."+r,o=pn(a,i);(l.array.has(e)||rn(s)||o&&!o._f)&&!en(s)?S(i,s,n):N(i,s,n)}},C=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const u=pn(a,e),d=l.array.has(e),h=ln(t);hn(i,e,h),d?(m.array.next({name:e,values:ln(i)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&n.shouldDirty&&m.state.next({name:e,dirtyFields:rr(s,i),isDirty:k(e,h)})):!u||u._f||tn(h)?N(e,h,n):S(e,h,n),gr(e,l)&&m.state.next(c(c({},r),{},{name:e})),m.state.next({name:o.mount?e:void 0,values:ln(i)})},D=async t=>{o.mount=!0;const s=t.target;let u=s.name,d=!0;const v=pn(a,u),k=e=>{d=Number.isNaN(e)||en(e)&&isNaN(e.getTime())||zn(e,pn(i,u,e))},j=pr(n.mode),N=pr(n.reValidateMode);if(v){let o,C;const D=s.type?ur(v._f):an(t),E=t.type===gn||t.type===yn,F=!((S=v._f).mount&&(S.required||S.min||S.max||S.maxLength||S.minLength||S.pattern||S.validate))&&!n.resolver&&!pn(r.errors,u)&&!v._f.deps||((e,t,n,r,a)=>!a.isOnAll&&(!n&&a.isOnTouch?!(t||e):(n?r.isOnBlur:a.isOnBlur)?!e:!(n?r.isOnChange:a.isOnChange)||e))(E,pn(r.touchedFields,u),r.isSubmitted,N,j),P=gr(u,l,E);hn(i,u,D),E?s&&s.readOnly||(v._f.onBlur&&v._f.onBlur(t),e&&e(0)):v._f.onChange&&v._f.onChange(t);const T=b(u,D,E),O=!Zn(T)||P;if(!E&&m.state.next({name:u,type:t.type,values:ln(i)}),F)return(f.isValid||p.isValid)&&("onBlur"===n.mode?E&&g():E||g()),O&&m.state.next(c({name:u},P?{}:T));if(!E&&P&&m.state.next(c({},r)),n.resolver){const{errors:e}=await _([u]);if(k(D),d){const t=vr(r.errors,a,u),n=vr(e,a,t.name||u);o=n.error,u=n.name,C=Zn(e)}}else y([u],!0),o=(await wr(v,l.disabled,i,h,n.shouldUseNativeValidation))[u],y([u]),k(D),d&&(o?C=!1:(f.isValid||p.isValid)&&(C=await w(a,!0)));d&&(v._f.deps&&(!Array.isArray(v._f.deps)||v._f.deps.length>0)&&A(v._f.deps),x(u,C,o,T))}var S},E=(e,t)=>{if(pn(r.errors,t)&&e.focus)return e.focus(),1},A=async function(e){let t,s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=qn(e);if(n.resolver){const n=await(async e=>{const{errors:t}=await _(e);if(e)for(const n of e){const e=pn(t,n);e?hn(r.errors,n,e):er(r.errors,n)}else r.errors=t;return t})(un(e)?e:o);t=Zn(n),s=e?!o.some(e=>pn(n,e)):t}else e?(s=(await Promise.all(o.map(async e=>{const t=pn(a,e);return await w(t&&t._f?{[e]:t}:t)}))).every(Boolean),(s||r.isValid)&&g()):s=t=await w(a);return m.state.next(c(c(c({},!Rn(e)||(f.isValid||p.isValid)&&t!==r.isValid?{}:{name:e}),n.resolver||!e?{isValid:t}:{}),{},{errors:r.errors})),i.shouldFocus&&!s&&yr(a,E,e?o:l.mount),s},F=(e,t)=>{let n=c({},o.mount?i:s);return t&&(n=$n(t.dirtyFields?r.dirtyFields:r.touchedFields,n)),un(e)?n:Rn(e)?pn(n,e):e.map(e=>pn(n,e))},P=(e,t)=>({invalid:!!pn((t||r).errors,e),isDirty:!!pn((t||r).dirtyFields,e),error:pn((t||r).errors,e),isValidating:!!pn(r.validatingFields,e),isTouched:!!pn((t||r).touchedFields,e)}),T=(e,t,n)=>{const s=(pn(a,e,{_f:{}})._f||{}).ref,i=pn(r.errors,e)||{},{ref:o,message:l,type:d}=i,f=u(i,Qt);hn(r.errors,e,c(c(c({},f),t),{},{ref:s})),m.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&s&&s.focus&&s.focus()},O=e=>m.state.subscribe({next:t=>{var n,a,o;n=e.name,a=t.name,o=e.exact,n&&a&&n!==a&&!qn(n).some(e=>e&&(o?e===a:e.startsWith(a)||a.startsWith(e)))||!((e,t,n,r)=>{n(e);const{name:a}=e,s=u(e,Yt);return Zn(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(e=>t[e]===(!r||kn))})(t,e.formState||f,U,e.reRenderRoot)||e.callback(c(c(c({values:c({},i)},r),t),{},{defaultValues:s}))}}).unsubscribe,I=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const o of e?qn(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(er(a,o),er(i,o)),!t.keepError&&er(r.errors,o),!t.keepDirty&&er(r.dirtyFields,o),!t.keepTouched&&er(r.touchedFields,o),!t.keepIsValidating&&er(r.validatingFields,o),!n.shouldUnregister&&!t.keepDefaultValue&&er(s,o);m.state.next({values:ln(i)}),m.state.next(c(c({},r),t.keepDirty?{isDirty:k()}:{})),!t.keepIsValid&&g()},R=e=>{let{disabled:t,name:n}=e;(mn(t)&&o.mount||t||l.disabled.has(n))&&(t?l.disabled.add(n):l.disabled.delete(n))},M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=pn(a,e);const i=mn(t.disabled)||mn(n.disabled);return hn(a,e,c(c({},r||{}),{},{_f:c(c({},r&&r._f?r._f:{ref:{name:e}}),{},{name:e,mount:!0},t)})),l.mount.add(e),r?R({disabled:mn(t.disabled)?t.disabled:n.disabled,name:e}):v(e,!0,t.value),c(c(c({},i?{disabled:t.disabled||n.disabled}:{}),n.progressive?{required:!!t.required,min:fr(t.min),max:fr(t.max),minLength:fr(t.minLength),maxLength:fr(t.maxLength),pattern:fr(t.pattern)}:{}),{},{name:e,onChange:D,onBlur:D,ref:i=>{if(i){M(e,t),r=pn(a,e);const n=un(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,o=(e=>Gn(e)||Xt(e))(n),l=r._f.refs||[];if(o?l.find(e=>e===n):n===r._f.ref)return;hn(a,e,{_f:c(c({},r._f),o?{refs:[...l.filter(Xn),n,...Array.isArray(pn(s,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n})}),v(e,!1,void 0,n)}else r=pn(a,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!sn(l.array,e)||!o.action)&&l.unMount.add(e)}})},L=()=>n.shouldFocusError&&yr(a,E,l.mount),z=(e,t)=>async s=>{let o;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let u=ln(i);if(m.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await _();r.errors=e,u=ln(t)}else await w(a);if(l.disabled.size)for(const e of l.disabled)er(u,e);if(er(r.errors,"root"),Zn(r.errors)){m.state.next({errors:{}});try{await e(u,s)}catch(d){o=d}}else t&&await t(c({},r.errors),s),L(),setTimeout(L);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Zn(r.errors)&&!o,submitCount:r.submitCount+1,errors:r.errors}),o)throw o},B=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=e?ln(e):s,d=ln(u),p=Zn(e),h=p?s:d;if(t.keepDefaultValues||(s=u),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(rr(s,i))]);for(const t of Array.from(e))pn(r.dirtyFields,t)?hn(h,t,pn(i,t)):C(t,pn(h,t))}else{if(on&&un(e))for(const e of l.mount){const t=pn(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Kn(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)C(e,pn(h,e));else a={}}i=n.shouldUnregister?t.keepDefaultValues?ln(s):{}:ln(h),m.array.next({values:c({},h)}),m.state.next({values:c({},h)})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!t.keepIsValid||!!t.keepDirtyValues,o.watch=!!n.shouldUnregister,m.state.next({submitCount:t.keepSubmitCount?r.submitCount:0,isDirty:!p&&(t.keepDirty?r.isDirty:!(!t.keepDefaultValues||zn(e,s))),isSubmitted:!!t.keepIsSubmitted&&r.isSubmitted,dirtyFields:p?{}:t.keepDirtyValues?t.keepDefaultValues&&i?rr(s,i):r.dirtyFields:t.keepDefaultValues&&e?rr(s,e):t.keepDirty?r.dirtyFields:{},touchedFields:t.keepTouched?r.touchedFields:{},errors:t.keepErrors?r.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1,defaultValues:s})},V=(e,t)=>B(Yn(e)?e(i):e,t),U=e=>{r=c(c({},r),e)},W={control:{register:M,unregister:I,getFieldState:P,handleSubmit:z,setError:T,_subscribe:O,_runSchema:_,_focusError:L,_getWatch:j,_getDirty:k,_setValid:g,_setFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,u=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(c&&l&&!n.disabled){if(o.action=!0,d&&Array.isArray(pn(a,e))){const t=l(pn(a,e),c.argA,c.argB);u&&hn(a,e,t)}if(d&&Array.isArray(pn(r.errors,e))){const t=l(pn(r.errors,e),c.argA,c.argB);u&&hn(r.errors,e,t),((e,t)=>{!dn(pn(e,t)).length&&er(e,t)})(r.errors,e)}if((f.touchedFields||p.touchedFields)&&d&&Array.isArray(pn(r.touchedFields,e))){const t=l(pn(r.touchedFields,e),c.argA,c.argB);u&&hn(r.touchedFields,e,t)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=rr(s,i)),m.state.next({name:e,isDirty:k(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else hn(i,e,t)},_setDisabledField:R,_setErrors:e=>{r.errors=e,m.state.next({errors:r.errors,isValid:!1})},_getFieldArray:e=>dn(pn(o.mount?i:s,e,n.shouldUnregister?pn(s,e,[]):[])),_reset:B,_resetDefaultValues:()=>Yn(n.defaultValues)&&n.defaultValues().then(e=>{V(e,n.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=pn(a,e);t&&(t._f.refs?t._f.refs.every(e=>!Xn(e)):!Xn(t._f.ref))&&I(e)}l.unMount=new Set},_disableForm:e=>{mn(e)&&(m.state.next({disabled:e}),yr(a,(t,n)=>{const r=pn(a,n);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:m,_proxyFormState:f,get _fields(){return a},get _formValues(){return i},get _state(){return o},set _state(e){o=e},get _defaultValues(){return s},get _names(){return l},set _names(e){l=e},get _formState(){return r},get _options(){return n},set _options(e){n=c(c({},n),e)}},subscribe:e=>(o.mount=!0,p=c(c({},p),e.formState),O(c(c({},e),{},{formState:p}))),trigger:A,register:M,handleSubmit:z,watch:(e,t)=>Yn(e)?m.state.subscribe({next:n=>"values"in n&&e(j(void 0,t),n)}):j(e,t,!0),setValue:C,getValues:F,reset:V,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pn(a,e)&&(un(t.defaultValue)?C(e,ln(pn(s,e))):(C(e,t.defaultValue),hn(s,e,ln(t.defaultValue))),t.keepTouched||er(r.touchedFields,e),t.keepDirty||(er(r.dirtyFields,e),r.isDirty=t.defaultValue?k(e,ln(pn(s,e))):k()),t.keepError||(er(r.errors,e),f.isValid&&g()),m.state.next(c({},r)))},clearErrors:e=>{e&&qn(e).forEach(e=>er(r.errors,e)),m.state.next({errors:e?r.errors:{}})},unregister:I,setError:T,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=pn(a,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&Yn(e.select)&&e.select())}},getFieldState:P};return c(c({},W),{},{formControl:W})}var Nr=()=>{if("undefined"!==typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const e="undefined"===typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(16*Math.random()+e)%16|0;return("x"==t?n:3&n|8).toString(16)})},Sr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.shouldFocus||un(n.shouldFocus)?n.focusName||"".concat(e,".").concat(un(n.focusIndex)?t:n.focusIndex,"."):""},Cr=(e,t)=>[...e,...qn(t)],Dr=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Er(e,t,n){return[...e.slice(0,t),...qn(n),...e.slice(t)]}var Ar=(e,t,n)=>Array.isArray(e)?(un(e[n])&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]),e):[],Fr=(e,t)=>[...qn(t),...qn(e)];var Pr=(e,t)=>un(t)?[]:function(e,t){let n=0;const r=[...e];for(const a of t)r.splice(a-n,1),n++;return dn(r).length?r:[]}(e,qn(t).sort((e,t)=>e-t)),Tr=(e,t,n)=>{[e[t],e[n]]=[e[n],e[t]]},Or=(e,t,n)=>(e[t]=n,e);function Ir(e){const t=Pn(),{control:n=t.control,name:a,keyName:s="id",shouldUnregister:i,rules:o}=e,[l,u]=r.useState(n._getFieldArray(a)),d=r.useRef(n._getFieldArray(a).map(Nr)),f=r.useRef(!1);n._names.array.add(a),r.useMemo(()=>o&&n.register(a,o),[n,o,a]),In(()=>n._subjects.array.subscribe({next:e=>{let{values:t,name:n}=e;if(n===a||!n){const e=pn(t,a);Array.isArray(e)&&(u(e),d.current=e.map(Nr))}}}).unsubscribe,[n,a]);const p=r.useCallback(e=>{f.current=!0,n._setFieldArray(a,e)},[n,a]);return r.useEffect(()=>{if(n._state.action=!1,gr(a,n._names)&&n._subjects.state.next(c({},n._formState)),f.current&&(!pr(n._options.mode).isOnSubmit||n._formState.isSubmitted)&&!pr(n._options.reValidateMode).isOnSubmit)if(n._options.resolver)n._runSchema([a]).then(e=>{const t=pn(e.errors,a),r=pn(n._formState.errors,a);(r?!t&&r.type||t&&(r.type!==t.type||r.message!==t.message):t&&t.type)&&(t?hn(n._formState.errors,a,t):er(n._formState.errors,a),n._subjects.state.next({errors:n._formState.errors}))});else{const e=pn(n._fields,a);!e||!e._f||pr(n._options.reValidateMode).isOnSubmit&&pr(n._options.mode).isOnSubmit||wr(e,n._names.disabled,n._formValues,n._options.criteriaMode===kn,n._options.shouldUseNativeValidation,!0).then(e=>!Zn(e)&&n._subjects.state.next({errors:br(n._formState.errors,e,a)}))}n._subjects.state.next({name:a,values:ln(n._formValues)}),n._names.focus&&yr(n._fields,(e,t)=>{if(n._names.focus&&t.startsWith(n._names.focus)&&e.focus)return e.focus(),1}),n._names.focus="",n._setValid(),f.current=!1},[l,a,n]),r.useEffect(()=>(!pn(n._formValues,a)&&n._setFieldArray(a),()=>{n._options.shouldUnregister||i?n.unregister(a):((e,t)=>{const r=pn(n._fields,e);r&&r._f&&(r._f.mount=t)})(a,!1)}),[a,n,s,i]),{swap:r.useCallback((e,t)=>{const r=n._getFieldArray(a);Tr(r,e,t),Tr(d.current,e,t),p(r),u(r),n._setFieldArray(a,r,Tr,{argA:e,argB:t},!1)},[p,a,n]),move:r.useCallback((e,t)=>{const r=n._getFieldArray(a);Ar(r,e,t),Ar(d.current,e,t),p(r),u(r),n._setFieldArray(a,r,Ar,{argA:e,argB:t},!1)},[p,a,n]),prepend:r.useCallback((e,t)=>{const r=qn(ln(e)),s=Fr(n._getFieldArray(a),r);n._names.focus=Sr(a,0,t),d.current=Fr(d.current,r.map(Nr)),p(s),u(s),n._setFieldArray(a,s,Fr,{argA:Dr(e)})},[p,a,n]),append:r.useCallback((e,t)=>{const r=qn(ln(e)),s=Cr(n._getFieldArray(a),r);n._names.focus=Sr(a,s.length-1,t),d.current=Cr(d.current,r.map(Nr)),p(s),u(s),n._setFieldArray(a,s,Cr,{argA:Dr(e)})},[p,a,n]),remove:r.useCallback(e=>{const t=Pr(n._getFieldArray(a),e);d.current=Pr(d.current,e),p(t),u(t),!Array.isArray(pn(n._fields,a))&&hn(n._fields,a,void 0),n._setFieldArray(a,t,Pr,{argA:e})},[p,a,n]),insert:r.useCallback((e,t,r)=>{const s=qn(ln(t)),i=Er(n._getFieldArray(a),e,s);n._names.focus=Sr(a,e,r),d.current=Er(d.current,e,s.map(Nr)),p(i),u(i),n._setFieldArray(a,i,Er,{argA:e,argB:Dr(t)})},[p,a,n]),update:r.useCallback((e,t)=>{const r=ln(t),s=Or(n._getFieldArray(a),e,r);d.current=[...s].map((t,n)=>t&&n!==e?d.current[n]:Nr()),p(s),u([...s]),n._setFieldArray(a,s,Or,{argA:e,argB:r},!0,!1)},[p,a,n]),replace:r.useCallback(e=>{const t=qn(ln(e));d.current=t.map(Nr),p([...t]),u([...t]),n._setFieldArray(a,[...t],e=>e,{},!0,!1)},[p,a,n]),fields:r.useMemo(()=>l.map((e,t)=>c(c({},e),{},{[s]:d.current[t]||Nr()})),[l,s])}}const Rr=(e,t,n)=>{if(e&&"reportValidity"in e){const r=pn(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},Mr=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?Rr(r.ref,n,e):r&&r.refs&&r.refs.forEach(t=>Rr(t,n,e))}},Lr=(e,t)=>{t.shouldUseNativeValidation&&Mr(e,t);const n={};for(const r in e){const a=pn(t.fields,r),s=Object.assign(e[r]||{},{ref:a&&a.ref});if(zr(t.names||Object.keys(e),r)){const e=Object.assign({},pn(n,r));hn(e,"root",s),hn(n,r,e)}else hn(n,r,s)}return n},zr=(e,t)=>{const n=Br(t);return e.some(e=>Br(e).match("^".concat(n,"\\.\\d+")))};function Br(e){return e.replace(/\]|\[/g,"")}Object.freeze({status:"aborted"});function Vr(e,t,n){var r;function a(n,r){var a,s,i;Object.defineProperty(n,"_zod",{value:null!==(a=n._zod)&&void 0!==a?a:{},enumerable:!1}),null!==(s=(i=n._zod).traits)&&void 0!==s||(i.traits=new Set),n._zod.traits.add(e),t(n,r);for(const e in o.prototype)e in n||Object.defineProperty(n,e,{value:o.prototype[e].bind(n)});n._zod.constr=o,n._zod.def=r}const s=null!==(r=null===n||void 0===n?void 0:n.Parent)&&void 0!==r?r:Object;class i extends s{}function o(e){var t,r;const s=null!==n&&void 0!==n&&n.Parent?new i:this;a(s,e),null!==(t=(r=s._zod).deferred)&&void 0!==t||(r.deferred=[]);for(const n of s._zod.deferred)n();return s}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(o,"init",{value:a}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>{var r;return!!(null!==n&&void 0!==n&&n.Parent&&t instanceof n.Parent)||(null===t||void 0===t||null===(r=t._zod)||void 0===r||null===(r=r.traits)||void 0===r?void 0:r.has(e))}}),Object.defineProperty(o,"name",{value:e}),o}Symbol("zod_brand");class Ur extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Wr={};function qr(e){return e&&Object.assign(Wr,e),Wr}function Hr(e,t){return"bigint"===typeof t?t.toString():t}const $r=Error.captureStackTrace?Error.captureStackTrace:function(){};Zr=()=>{var e;if("undefined"!==typeof navigator&&null!==(e=navigator)&&void 0!==e&&null!==(e=e.userAgent)&&void 0!==e&&e.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(t){return!1}};var Zr;new Set(["string","number","symbol"]),new Set(["string","number","bigint","boolean","symbol","undefined"]);Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_VALUE,Number.MAX_VALUE;function Jr(e){return"string"===typeof e?e:null===e||void 0===e?void 0:e.message}function Yr(e,t,n){var r;const a=c(c({},e),{},{path:null!==(r=e.path)&&void 0!==r?r:[]});if(!e.message){var s,i,o,l,u,d,f,p,m;const r=null!==(s=null!==(i=null!==(o=null!==(l=Jr(null===(u=e.inst)||void 0===u||null===(u=u._zod.def)||void 0===u||null===(d=u.error)||void 0===d?void 0:d.call(u,e)))&&void 0!==l?l:Jr(null===t||void 0===t||null===(f=t.error)||void 0===f?void 0:f.call(t,e)))&&void 0!==o?o:Jr(null===(p=n.customError)||void 0===p?void 0:p.call(n,e)))&&void 0!==i?i:Jr(null===(m=n.localeError)||void 0===m?void 0:m.call(n,e)))&&void 0!==s?s:"Invalid input";a.message=r}return delete a.inst,delete a.continue,null!==t&&void 0!==t&&t.reportInput||delete a.input,a}const Kr=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,Hr,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Qr=Vr("$ZodError",Kr),Gr=Vr("$ZodError",Kr,{Parent:Error});const Xr=(e=>(t,n,r,a)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new Ur;if(i.issues.length){var o;const t=new(null!==(o=null===a||void 0===a?void 0:a.Err)&&void 0!==o?o:e)(i.issues.map(e=>Yr(e,s,qr())));throw $r(t,null===a||void 0===a?void 0:a.callee),t}return i.value})(Gr),ea=(e=>async(t,n,r,a)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise&&(i=await i),i.issues.length){var o;const t=new(null!==(o=null===a||void 0===a?void 0:a.Err)&&void 0!==o?o:e)(i.issues.map(e=>Yr(e,s,qr())));throw $r(t,null===a||void 0===a?void 0:a.callee),t}return i.value})(Gr);function ta(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function na(e,t){for(var n={};e.length;){var r=e[0],a=r.code,s=r.message,i=r.path.join(".");if(!n[i])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];n[i]={message:o.message,type:o.code}}else n[i]={message:s,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=n[i].types,c=l&&l[r.code];n[i]=Wn(i,t,n,a,c?[].concat(c,r.message):r.message)}e.shift()}return n}function ra(e,t){for(var n={};e.length;){var r=e[0],a=r.code,s=r.message,i=r.path.join(".");if(!n[i])if("invalid_union"===r.code&&r.errors.length>0){var o=r.errors[0][0];n[i]={message:o.message,type:o.code}}else n[i]={message:s,type:a};if("invalid_union"===r.code&&r.errors.forEach(function(t){return t.forEach(function(t){return e.push(t)})}),t){var l=n[i].types,c=l&&l[r.code];n[i]=Wn(i,t,n,a,c?[].concat(c,r.message):r.message)}e.shift()}return n}function aa(e,t,n){if(void 0===n&&(n={}),function(e){return"_def"in e&&"object"==typeof e._def&&"typeName"in e._def}(e))return function(r,a,s){try{return Promise.resolve(ta(function(){return Promise.resolve(e["sync"===n.mode?"parse":"parseAsync"](r,t)).then(function(e){return s.shouldUseNativeValidation&&Mr({},s),{errors:{},values:n.raw?Object.assign({},r):e}})},function(e){if(function(e){return Array.isArray(null==e?void 0:e.issues)}(e))return{values:{},errors:Lr(na(e.errors,!s.shouldUseNativeValidation&&"all"===s.criteriaMode),s)};throw e}))}catch(Rr){return Promise.reject(Rr)}};if(function(e){return"_zod"in e&&"object"==typeof e._zod}(e))return function(r,a,s){try{return Promise.resolve(ta(function(){return Promise.resolve(("sync"===n.mode?Xr:ea)(e,r,t)).then(function(e){return s.shouldUseNativeValidation&&Mr({},s),{errors:{},values:n.raw?Object.assign({},r):e}})},function(e){if(function(e){return e instanceof Qr}(e))return{values:{},errors:Lr(ra(e.issues,!s.shouldUseNativeValidation&&"all"===s.criteriaMode),s)};throw e}))}catch(Rr){return Promise.reject(Rr)}};throw new Error("Invalid input: not a Zod schema")}var sa,ia;!function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter(e=>"number"!==typeof t[t[e]]),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"===typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"===typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"===typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map(e=>"string"===typeof e?"'".concat(e,"'"):e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"===typeof t?t.toString():t}(sa||(sa={})),function(e){e.mergeShapes=(e,t)=>c(c({},e),t)}(ia||(ia={}));const oa=sa.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),la=e=>{switch(typeof e){case"undefined":return oa.undefined;case"string":return oa.string;case"number":return Number.isNaN(e)?oa.nan:oa.number;case"boolean":return oa.boolean;case"function":return oa.function;case"bigint":return oa.bigint;case"symbol":return oa.symbol;case"object":return Array.isArray(e)?oa.array:null===e?oa.null:e.then&&"function"===typeof e.then&&e.catch&&"function"===typeof e.catch?oa.promise:"undefined"!==typeof Map&&e instanceof Map?oa.map:"undefined"!==typeof Set&&e instanceof Set?oa.set:"undefined"!==typeof Date&&e instanceof Date?oa.date:oa.object;default:return oa.unknown}},ca=sa.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ua extends Error{get errors(){return this.issues}constructor(e){var t;super(),t=this,this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.issues=[...t.issues,...e]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,r=0;for(;r<a.path.length;){const n=a.path[r];r===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof ua))throw new Error("Not a ZodError: ".concat(e))}toString(){return this.message}get message(){return JSON.stringify(this.issues,sa.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.message;const t={},n=[];for(const r of this.issues)if(r.path.length>0){const n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ua.create=e=>new ua(e);const da=(e,t)=>{let n;switch(e.code){case ca.invalid_type:n=e.received===oa.undefined?"Required":"Expected ".concat(e.expected,", received ").concat(e.received);break;case ca.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(e.expected,sa.jsonStringifyReplacer));break;case ca.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(sa.joinValues(e.keys,", "));break;case ca.invalid_union:n="Invalid input";break;case ca.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(sa.joinValues(e.options));break;case ca.invalid_enum_value:n="Invalid enum value. Expected ".concat(sa.joinValues(e.options),", received '").concat(e.received,"'");break;case ca.invalid_arguments:n="Invalid function arguments";break;case ca.invalid_return_type:n="Invalid function return type";break;case ca.invalid_date:n="Invalid date";break;case ca.invalid_string:"object"===typeof e.validation?"includes"in e.validation?(n='Invalid input: must include "'.concat(e.validation.includes,'"'),"number"===typeof e.validation.position&&(n="".concat(n," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?n='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?n='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):sa.assertNever(e.validation):n="regex"!==e.validation?"Invalid ".concat(e.validation):"Invalid";break;case ca.too_small:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):"number"===e.type||"bigint"===e.type?"Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):"date"===e.type?"Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):"Invalid input";break;case ca.too_big:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"bigint"===e.type?"BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"date"===e.type?"Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):"Invalid input";break;case ca.custom:n="Invalid input";break;case ca.invalid_intersection_types:n="Intersection results could not be merged";break;case ca.not_multiple_of:n="Number must be a multiple of ".concat(e.multipleOf);break;case ca.not_finite:n="Number must be finite";break;default:n=t.defaultError,sa.assertNever(e)}return{message:n}};let fa=da;function pa(){return fa}var ma;!function(e){e.errToObj=e=>"string"===typeof e?{message:e}:e||{},e.toString=e=>"string"===typeof e?e:null===e||void 0===e?void 0:e.message}(ma||(ma={}));const ha=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,s=[...n,...a.path||[]],i=c(c({},a),{},{path:s});if(void 0!==a.message)return c(c({},a),{},{path:s,message:a.message});let o="";const l=r.filter(e=>!!e).slice().reverse();for(const c of l)o=c(i,{data:t,defaultError:o}).message;return c(c({},a),{},{path:s,message:o})};function ga(e,t){const n=pa(),r=ha({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===da?void 0:da].filter(e=>!!e)});e.common.issues.push(r)}class ya{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return va;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const e=await r.key,t=await r.value;n.push({key:e,value:t})}return ya.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:a}=r;if("aborted"===t.status)return va;if("aborted"===a.status)return va;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||"undefined"===typeof a.value&&!r.alwaysSet||(n[t.value]=a.value)}return{status:e.value,value:n}}}const va=Object.freeze({status:"aborted"}),ba=e=>({status:"dirty",value:e}),xa=e=>({status:"valid",value:e}),_a=e=>"aborted"===e.status,wa=e=>"dirty"===e.status,ka=e=>"valid"===e.status,ja=e=>"undefined"!==typeof Promise&&e instanceof Promise;class Na{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Sa=(e,t)=>{if(ka(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ua(e.common.issues);return this._error=t,this._error}}};function Ca(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{var s;const{message:i}=e;return"invalid_enum_value"===t.code?{message:null!==i&&void 0!==i?i:a.defaultError}:"undefined"===typeof a.data?{message:null!==(o=null!==i&&void 0!==i?i:r)&&void 0!==o?o:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(s=null!==i&&void 0!==i?i:n)&&void 0!==s?s:a.defaultError};var o},description:a}}class Da{get description(){return this._def.description}_getType(e){return la(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:la(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ya,ctx:{common:e.parent.common,data:e.data,parsedType:la(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(ja(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null===t||void 0===t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null===t||void 0===t?void 0:t.errorMap},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:la(e)},a=this._parseSync({data:e,path:r.path,parent:r});return Sa(r,a)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:la(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:t});return ka(n)?{value:n.value}:{issues:t.common.issues}}catch(r){var n;null!==r&&void 0!==r&&null!==(n=r.message)&&void 0!==n&&null!==(n=n.toLowerCase())&&void 0!==n&&n.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>ka(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null===t||void 0===t?void 0:t.errorMap,async:!0},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:la(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await(ja(r)?r:Promise.resolve(r));return Sa(n,a)}refine(e,t){return this._refinement((n,r)=>{const a=e(n),s=()=>r.addIssue(c({code:ca.custom},(e=>"string"===typeof t||"undefined"===typeof t?{message:t}:"function"===typeof t?t(e):t)(n)));return"undefined"!==typeof Promise&&a instanceof Promise?a.then(e=>!!e||(s(),!1)):!!a||(s(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"===typeof t?t(n,r):t),!1))}_refinement(e){return new Ds({schema:this,typeName:Ms.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Es.create(this,this._def)}nullable(){return As.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ds.create(this)}promise(){return Cs.create(this,this._def)}or(e){return ms.create([this,e],this._def)}and(e){return vs.create(this,e,this._def)}transform(e){return new Ds(c(c({},Ca(this._def)),{},{schema:this,typeName:Ms.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const t="function"===typeof e?e:()=>e;return new Fs(c(c({},Ca(this._def)),{},{innerType:this,defaultValue:t,typeName:Ms.ZodDefault}))}brand(){return new Os(c({typeName:Ms.ZodBranded,type:this},Ca(this._def)))}catch(e){const t="function"===typeof e?e:()=>e;return new Ps(c(c({},Ca(this._def)),{},{innerType:this,catchValue:t,typeName:Ms.ZodCatch}))}describe(e){return new(0,this.constructor)(c(c({},this._def),{},{description:e}))}pipe(e){return Is.create(this,e)}readonly(){return Rs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ea=/^c[^\s-]{8,}$/i,Aa=/^[0-9a-z]+$/,Fa=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Pa=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ta=/^[a-z0-9_-]{21}$/i,Oa=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ia=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ra=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Ma;const La=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,za=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Ba=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Va=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ua=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Wa=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,qa="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ha=new RegExp("^".concat(qa,"$"));function $a(e){let t="[0-5]\\d";e.precision?t="".concat(t,"\\.\\d{").concat(e.precision,"}"):null==e.precision&&(t="".concat(t,"(\\.\\d+)?"));const n=e.precision?"+":"?";return"([01]\\d|2[0-3]):[0-5]\\d(:".concat(t,")").concat(n)}function Za(e){return new RegExp("^".concat($a(e),"$"))}function Ja(e){let t="".concat(qa,"T").concat($a(e));const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t="".concat(t,"(").concat(n.join("|"),")"),new RegExp("^".concat(t,"$"))}function Ya(e,t){return!("v4"!==t&&t||!La.test(e))||!("v6"!==t&&t||!Ba.test(e))}function Ka(e,t){if(!Oa.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return"object"===typeof a&&null!==a&&((!("typ"in a)||"JWT"===(null===a||void 0===a?void 0:a.typ))&&(!!a.alg&&(!t||a.alg===t)))}catch(n){return!1}}function Qa(e,t){return!("v4"!==t&&t||!za.test(e))||!("v6"!==t&&t||!Va.test(e))}class Ga extends Da{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==oa.string){const t=this._getOrReturnCtx(e);return ga(t,{code:ca.invalid_type,expected:oa.string,received:t.parsedType}),va}const t=new ya;let n;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),ga(n,{code:ca.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),ga(n,{code:ca.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const r=e.data.length>a.value,s=e.data.length<a.value;(r||s)&&(n=this._getOrReturnCtx(e,n),r?ga(n,{code:ca.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):s&&ga(n,{code:ca.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)Ra.test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"email",code:ca.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)Ma||(Ma=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ma.test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"emoji",code:ca.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)Pa.test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"uuid",code:ca.invalid_string,message:a.message}),t.dirty());else if("nanoid"===a.kind)Ta.test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"nanoid",code:ca.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)Ea.test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"cuid",code:ca.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)Aa.test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"cuid2",code:ca.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)Fa.test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"ulid",code:ca.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(r){n=this._getOrReturnCtx(e,n),ga(n,{validation:"url",code:ca.invalid_string,message:a.message}),t.dirty()}else if("regex"===a.kind){a.regex.lastIndex=0;a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"regex",code:ca.invalid_string,message:a.message}),t.dirty())}else if("trim"===a.kind)e.data=e.data.trim();else if("includes"===a.kind)e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),ga(n,{code:ca.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty());else if("toLowerCase"===a.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===a.kind)e.data=e.data.toUpperCase();else if("startsWith"===a.kind)e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),ga(n,{code:ca.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty());else if("endsWith"===a.kind)e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),ga(n,{code:ca.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty());else if("datetime"===a.kind){Ja(a).test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{code:ca.invalid_string,validation:"datetime",message:a.message}),t.dirty())}else if("date"===a.kind){Ha.test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{code:ca.invalid_string,validation:"date",message:a.message}),t.dirty())}else if("time"===a.kind){Za(a).test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{code:ca.invalid_string,validation:"time",message:a.message}),t.dirty())}else"duration"===a.kind?Ia.test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"duration",code:ca.invalid_string,message:a.message}),t.dirty()):"ip"===a.kind?Ya(e.data,a.version)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"ip",code:ca.invalid_string,message:a.message}),t.dirty()):"jwt"===a.kind?Ka(e.data,a.alg)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"jwt",code:ca.invalid_string,message:a.message}),t.dirty()):"cidr"===a.kind?Qa(e.data,a.version)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"cidr",code:ca.invalid_string,message:a.message}),t.dirty()):"base64"===a.kind?Ua.test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"base64",code:ca.invalid_string,message:a.message}),t.dirty()):"base64url"===a.kind?Wa.test(e.data)||(n=this._getOrReturnCtx(e,n),ga(n,{validation:"base64url",code:ca.invalid_string,message:a.message}),t.dirty()):sa.assertNever(a);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),c({validation:t,code:ca.invalid_string},ma.errToObj(n)))}_addCheck(e){return new Ga(c(c({},this._def),{},{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(c({kind:"email"},ma.errToObj(e)))}url(e){return this._addCheck(c({kind:"url"},ma.errToObj(e)))}emoji(e){return this._addCheck(c({kind:"emoji"},ma.errToObj(e)))}uuid(e){return this._addCheck(c({kind:"uuid"},ma.errToObj(e)))}nanoid(e){return this._addCheck(c({kind:"nanoid"},ma.errToObj(e)))}cuid(e){return this._addCheck(c({kind:"cuid"},ma.errToObj(e)))}cuid2(e){return this._addCheck(c({kind:"cuid2"},ma.errToObj(e)))}ulid(e){return this._addCheck(c({kind:"ulid"},ma.errToObj(e)))}base64(e){return this._addCheck(c({kind:"base64"},ma.errToObj(e)))}base64url(e){return this._addCheck(c({kind:"base64url"},ma.errToObj(e)))}jwt(e){return this._addCheck(c({kind:"jwt"},ma.errToObj(e)))}ip(e){return this._addCheck(c({kind:"ip"},ma.errToObj(e)))}cidr(e){return this._addCheck(c({kind:"cidr"},ma.errToObj(e)))}datetime(e){var t,n;return"string"===typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(c({kind:"datetime",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,offset:null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null===e||void 0===e?void 0:e.local)&&void 0!==n&&n},ma.errToObj(null===e||void 0===e?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"===typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(c({kind:"time",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision},ma.errToObj(null===e||void 0===e?void 0:e.message)))}duration(e){return this._addCheck(c({kind:"duration"},ma.errToObj(e)))}regex(e,t){return this._addCheck(c({kind:"regex",regex:e},ma.errToObj(t)))}includes(e,t){return this._addCheck(c({kind:"includes",value:e,position:null===t||void 0===t?void 0:t.position},ma.errToObj(null===t||void 0===t?void 0:t.message)))}startsWith(e,t){return this._addCheck(c({kind:"startsWith",value:e},ma.errToObj(t)))}endsWith(e,t){return this._addCheck(c({kind:"endsWith",value:e},ma.errToObj(t)))}min(e,t){return this._addCheck(c({kind:"min",value:e},ma.errToObj(t)))}max(e,t){return this._addCheck(c({kind:"max",value:e},ma.errToObj(t)))}length(e,t){return this._addCheck(c({kind:"length",value:e},ma.errToObj(t)))}nonempty(e){return this.min(1,ma.errToObj(e))}trim(){return new Ga(c(c({},this._def),{},{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new Ga(c(c({},this._def),{},{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new Ga(c(c({},this._def),{},{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Xa(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}Ga.create=e=>{var t;return new Ga(c({checks:[],typeName:Ms.ZodString,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t},Ca(e)))};class es extends Da{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==oa.number){const t=this._getOrReturnCtx(e);return ga(t,{code:ca.invalid_type,expected:oa.number,received:t.parsedType}),va}let t;const n=new ya;for(const r of this._def.checks)if("int"===r.kind)sa.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),ga(t,{code:ca.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),ga(t,{code:ca.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),ga(t,{code:ca.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Xa(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),ga(t,{code:ca.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),ga(t,{code:ca.not_finite,message:r.message}),n.dirty()):sa.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ma.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ma.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ma.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ma.toString(t))}setLimit(e,t,n,r){return new es(c(c({},this._def),{},{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ma.toString(r)}]}))}_addCheck(e){return new es(c(c({},this._def),{},{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:ma.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ma.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ma.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ma.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ma.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ma.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ma.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ma.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ma.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&sa.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}es.create=e=>new es(c({checks:[],typeName:Ms.ZodNumber,coerce:(null===e||void 0===e?void 0:e.coerce)||!1},Ca(e)));class ts extends Da{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(r){return this._getInvalidInput(e)}if(this._getType(e)!==oa.bigint)return this._getInvalidInput(e);let t;const n=new ya;for(const a of this._def.checks)if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),ga(t,{code:ca.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),ga(t,{code:ca.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),ga(t,{code:ca.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):sa.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return ga(t,{code:ca.invalid_type,expected:oa.bigint,received:t.parsedType}),va}gte(e,t){return this.setLimit("min",e,!0,ma.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ma.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ma.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ma.toString(t))}setLimit(e,t,n,r){return new ts(c(c({},this._def),{},{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ma.toString(r)}]}))}_addCheck(e){return new ts(c(c({},this._def),{},{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ma.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ma.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ma.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ma.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ma.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ts.create=e=>{var t;return new ts(c({checks:[],typeName:Ms.ZodBigInt,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t},Ca(e)))};class ns extends Da{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==oa.boolean){const t=this._getOrReturnCtx(e);return ga(t,{code:ca.invalid_type,expected:oa.boolean,received:t.parsedType}),va}return xa(e.data)}}ns.create=e=>new ns(c({typeName:Ms.ZodBoolean,coerce:(null===e||void 0===e?void 0:e.coerce)||!1},Ca(e)));class rs extends Da{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==oa.date){const t=this._getOrReturnCtx(e);return ga(t,{code:ca.invalid_type,expected:oa.date,received:t.parsedType}),va}if(Number.isNaN(e.data.getTime())){return ga(this._getOrReturnCtx(e),{code:ca.invalid_date}),va}const t=new ya;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),ga(n,{code:ca.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),ga(n,{code:ca.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):sa.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new rs(c(c({},this._def),{},{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ma.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ma.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}rs.create=e=>new rs(c({checks:[],coerce:(null===e||void 0===e?void 0:e.coerce)||!1,typeName:Ms.ZodDate},Ca(e)));class as extends Da{_parse(e){if(this._getType(e)!==oa.symbol){const t=this._getOrReturnCtx(e);return ga(t,{code:ca.invalid_type,expected:oa.symbol,received:t.parsedType}),va}return xa(e.data)}}as.create=e=>new as(c({typeName:Ms.ZodSymbol},Ca(e)));class ss extends Da{_parse(e){if(this._getType(e)!==oa.undefined){const t=this._getOrReturnCtx(e);return ga(t,{code:ca.invalid_type,expected:oa.undefined,received:t.parsedType}),va}return xa(e.data)}}ss.create=e=>new ss(c({typeName:Ms.ZodUndefined},Ca(e)));class is extends Da{_parse(e){if(this._getType(e)!==oa.null){const t=this._getOrReturnCtx(e);return ga(t,{code:ca.invalid_type,expected:oa.null,received:t.parsedType}),va}return xa(e.data)}}is.create=e=>new is(c({typeName:Ms.ZodNull},Ca(e)));class os extends Da{constructor(){super(...arguments),this._any=!0}_parse(e){return xa(e.data)}}os.create=e=>new os(c({typeName:Ms.ZodAny},Ca(e)));class ls extends Da{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xa(e.data)}}ls.create=e=>new ls(c({typeName:Ms.ZodUnknown},Ca(e)));class cs extends Da{_parse(e){const t=this._getOrReturnCtx(e);return ga(t,{code:ca.invalid_type,expected:oa.never,received:t.parsedType}),va}}cs.create=e=>new cs(c({typeName:Ms.ZodNever},Ca(e)));class us extends Da{_parse(e){if(this._getType(e)!==oa.undefined){const t=this._getOrReturnCtx(e);return ga(t,{code:ca.invalid_type,expected:oa.void,received:t.parsedType}),va}return xa(e.data)}}us.create=e=>new us(c({typeName:Ms.ZodVoid},Ca(e)));class ds extends Da{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==oa.array)return ga(t,{code:ca.invalid_type,expected:oa.array,received:t.parsedType}),va;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(ga(t,{code:e?ca.too_big:ca.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(ga(t,{code:ca.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(ga(t,{code:ca.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new Na(t,e,t.path,n)))).then(e=>ya.mergeArray(n,e));const a=[...t.data].map((e,n)=>r.type._parseSync(new Na(t,e,t.path,n)));return ya.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new ds(c(c({},this._def),{},{minLength:{value:e,message:ma.toString(t)}}))}max(e,t){return new ds(c(c({},this._def),{},{maxLength:{value:e,message:ma.toString(t)}}))}length(e,t){return new ds(c(c({},this._def),{},{exactLength:{value:e,message:ma.toString(t)}}))}nonempty(e){return this.min(1,e)}}function fs(e){if(e instanceof ps){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Es.create(fs(r))}return new ps(c(c({},e._def),{},{shape:()=>t}))}return e instanceof ds?new ds(c(c({},e._def),{},{type:fs(e.element)})):e instanceof Es?Es.create(fs(e.unwrap())):e instanceof As?As.create(fs(e.unwrap())):e instanceof bs?bs.create(e.items.map(e=>fs(e))):e}ds.create=(e,t)=>new ds(c({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ms.ZodArray},Ca(t)));class ps extends Da{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=sa.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==oa.object){const t=this._getOrReturnCtx(e);return ga(t,{code:ca.invalid_type,expected:oa.object,received:t.parsedType}),va}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof cs&&"strip"===this._def.unknownKeys))for(const o in n.data)a.includes(o)||s.push(o);const i=[];for(const o of a){const e=r[o],t=n.data[o];i.push({key:{status:"valid",value:o},value:e._parse(new Na(n,t,n.path,o)),alwaysSet:o in n.data})}if(this._def.catchall instanceof cs){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of s)i.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)s.length>0&&(ga(n,{code:ca.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const r=n.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new Na(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of i){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>ya.mergeObjectSync(t,e)):ya.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return ma.errToObj,new ps(c(c({},this._def),{},{unknownKeys:"strict"},void 0!==e?{errorMap:(t,n)=>{var r,a,s,i;const o=null!==(r=null===(a=(s=this._def).errorMap)||void 0===a?void 0:a.call(s,t,n).message)&&void 0!==r?r:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(i=ma.errToObj(e).message)&&void 0!==i?i:o}:{message:o}}}:{}))}strip(){return new ps(c(c({},this._def),{},{unknownKeys:"strip"}))}passthrough(){return new ps(c(c({},this._def),{},{unknownKeys:"passthrough"}))}extend(e){return new ps(c(c({},this._def),{},{shape:()=>c(c({},this._def.shape()),e)}))}merge(e){return new ps({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>c(c({},this._def.shape()),e._def.shape()),typeName:Ms.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ps(c(c({},this._def),{},{catchall:e}))}pick(e){const t={};for(const n of sa.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new ps(c(c({},this._def),{},{shape:()=>t}))}omit(e){const t={};for(const n of sa.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new ps(c(c({},this._def),{},{shape:()=>t}))}deepPartial(){return fs(this)}partial(e){const t={};for(const n of sa.objectKeys(this.shape)){const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}return new ps(c(c({},this._def),{},{shape:()=>t}))}required(e){const t={};for(const n of sa.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Es;)e=e._def.innerType;t[n]=e}return new ps(c(c({},this._def),{},{shape:()=>t}))}keyof(){return js(sa.objectKeys(this.shape))}}ps.create=(e,t)=>new ps(c({shape:()=>e,unknownKeys:"strip",catchall:cs.create(),typeName:Ms.ZodObject},Ca(t))),ps.strictCreate=(e,t)=>new ps(c({shape:()=>e,unknownKeys:"strict",catchall:cs.create(),typeName:Ms.ZodObject},Ca(t))),ps.lazycreate=(e,t)=>new ps(c({shape:e,unknownKeys:"strip",catchall:cs.create(),typeName:Ms.ZodObject},Ca(t)));class ms extends Da{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{const n=c(c({},t),{},{common:c(c({},t.common),{},{issues:[]}),parent:null});return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const n=e.map(e=>new ua(e.ctx.common.issues));return ga(t,{code:ca.invalid_union,unionErrors:n}),va});{let e;const r=[];for(const s of n){const n=c(c({},t),{},{common:c(c({},t.common),{},{issues:[]}),parent:null}),a=s._parseSync({data:t.data,path:t.path,parent:n});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=r.map(e=>new ua(e));return ga(t,{code:ca.invalid_union,unionErrors:a}),va}}get options(){return this._def.options}}ms.create=(e,t)=>new ms(c({options:e,typeName:Ms.ZodUnion},Ca(t)));const hs=e=>e instanceof ws?hs(e.schema):e instanceof Ds?hs(e.innerType()):e instanceof ks?[e.value]:e instanceof Ns?e.options:e instanceof Ss?sa.objectValues(e.enum):e instanceof Fs?hs(e._def.innerType):e instanceof ss?[void 0]:e instanceof is?[null]:e instanceof Es?[void 0,...hs(e.unwrap())]:e instanceof As?[null,...hs(e.unwrap())]:e instanceof Os||e instanceof Rs?hs(e.unwrap()):e instanceof Ps?hs(e._def.innerType):[];class gs extends Da{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oa.object)return ga(t,{code:ca.invalid_type,expected:oa.object,received:t.parsedType}),va;const n=this.discriminator,r=t.data[n],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(ga(t,{code:ca.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),va)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const a of t){const t=hs(a.shape[e]);if(!t.length)throw new Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));for(const n of t){if(r.has(n))throw new Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(n)));r.set(n,a)}}return new gs(c({typeName:Ms.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r},Ca(n)))}}function ys(e,t){const n=la(e),r=la(t);if(e===t)return{valid:!0,data:e};if(n===oa.object&&r===oa.object){const n=sa.objectKeys(t),r=sa.objectKeys(e).filter(e=>-1!==n.indexOf(e)),a=c(c({},e),t);for(const s of r){const n=ys(e[s],t[s]);if(!n.valid)return{valid:!1};a[s]=n.data}return{valid:!0,data:a}}if(n===oa.array&&r===oa.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const a=ys(e[r],t[r]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}return n===oa.date&&r===oa.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class vs extends Da{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(_a(e)||_a(r))return va;const a=ys(e.value,r.value);return a.valid?((wa(e)||wa(r))&&t.dirty(),{status:t.value,value:a.data}):(ga(n,{code:ca.invalid_intersection_types}),va)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(e=>{let[t,n]=e;return r(t,n)}):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}vs.create=(e,t,n)=>new vs(c({left:e,right:t,typeName:Ms.ZodIntersection},Ca(n)));class bs extends Da{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oa.array)return ga(n,{code:ca.invalid_type,expected:oa.array,received:n.parsedType}),va;if(n.data.length<this._def.items.length)return ga(n,{code:ca.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),va;!this._def.rest&&n.data.length>this._def.items.length&&(ga(n,{code:ca.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new Na(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>ya.mergeArray(t,e)):ya.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new bs(c(c({},this._def),{},{rest:e}))}}bs.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new bs(c({items:e,typeName:Ms.ZodTuple,rest:null},Ca(t)))};class xs extends Da{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oa.map)return ga(n,{code:ca.invalid_type,expected:oa.map,received:n.parsedType}),va;const r=this._def.keyType,a=this._def.valueType,s=[...n.data.entries()].map((e,t)=>{let[s,i]=e;return{key:r._parse(new Na(n,s,n.path,[t,"key"])),value:a._parse(new Na(n,i,n.path,[t,"value"]))}});if(n.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const n of s){const r=await n.key,a=await n.value;if("aborted"===r.status||"aborted"===a.status)return va;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}})}{const e=new Map;for(const n of s){const r=n.key,a=n.value;if("aborted"===r.status||"aborted"===a.status)return va;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}}xs.create=(e,t,n)=>new xs(c({valueType:t,keyType:e,typeName:Ms.ZodMap},Ca(n)));class _s extends Da{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oa.set)return ga(n,{code:ca.invalid_type,expected:oa.set,received:n.parsedType}),va;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(ga(n,{code:ca.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(ga(n,{code:ca.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function s(e){const n=new Set;for(const r of e){if("aborted"===r.status)return va;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const i=[...n.data.values()].map((e,t)=>a._parse(new Na(n,e,n.path,t)));return n.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new _s(c(c({},this._def),{},{minSize:{value:e,message:ma.toString(t)}}))}max(e,t){return new _s(c(c({},this._def),{},{maxSize:{value:e,message:ma.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}_s.create=(e,t)=>new _s(c({valueType:e,minSize:null,maxSize:null,typeName:Ms.ZodSet},Ca(t)));class ws extends Da{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ws.create=(e,t)=>new ws(c({getter:e,typeName:Ms.ZodLazy},Ca(t)));class ks extends Da{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ga(t,{received:t.data,code:ca.invalid_literal,expected:this._def.value}),va}return{status:"valid",value:e.data}}get value(){return this._def.value}}function js(e,t){return new Ns(c({values:e,typeName:Ms.ZodEnum},Ca(t)))}ks.create=(e,t)=>new ks(c({value:e,typeName:Ms.ZodLiteral},Ca(t)));class Ns extends Da{_parse(e){if("string"!==typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return ga(t,{expected:sa.joinValues(n),received:t.parsedType,code:ca.invalid_type}),va}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return ga(t,{received:t.data,code:ca.invalid_enum_value,options:n}),va}return xa(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return Ns.create(e,c(c({},this._def),t))}exclude(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return Ns.create(this.options.filter(t=>!e.includes(t)),c(c({},this._def),t))}}Ns.create=js;class Ss extends Da{_parse(e){const t=sa.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==oa.string&&n.parsedType!==oa.number){const e=sa.objectValues(t);return ga(n,{expected:sa.joinValues(e),received:n.parsedType,code:ca.invalid_type}),va}if(this._cache||(this._cache=new Set(sa.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=sa.objectValues(t);return ga(n,{received:n.data,code:ca.invalid_enum_value,options:e}),va}return xa(e.data)}get enum(){return this._def.values}}Ss.create=(e,t)=>new Ss(c({values:e,typeName:Ms.ZodNativeEnum},Ca(t)));class Cs extends Da{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oa.promise&&!1===t.common.async)return ga(t,{code:ca.invalid_type,expected:oa.promise,received:t.parsedType}),va;const n=t.parsedType===oa.promise?t.data:Promise.resolve(t.data);return xa(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Cs.create=(e,t)=>new Cs(c({type:e,typeName:Ms.ZodPromise},Ca(t)));class Ds extends Da{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ms.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:e=>{ga(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===r.type){const e=r.transform(n.data,a);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return va;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?va:"dirty"===r.status||"dirty"===t.value?ba(r.value):r});{if("aborted"===t.value)return va;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?va:"dirty"===r.status||"dirty"===t.value?ba(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?va:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?va:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ka(e))return va;const s=r.transform(e.value,a);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>ka(e)?Promise.resolve(r.transform(e.value,a)).then(e=>({status:t.value,value:e})):va)}sa.assertNever(r)}}Ds.create=(e,t,n)=>new Ds(c({schema:e,typeName:Ms.ZodEffects,effect:t},Ca(n))),Ds.createWithPreprocess=(e,t,n)=>new Ds(c({schema:t,effect:{type:"preprocess",transform:e},typeName:Ms.ZodEffects},Ca(n)));class Es extends Da{_parse(e){return this._getType(e)===oa.undefined?xa(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Es.create=(e,t)=>new Es(c({innerType:e,typeName:Ms.ZodOptional},Ca(t)));class As extends Da{_parse(e){return this._getType(e)===oa.null?xa(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}As.create=(e,t)=>new As(c({innerType:e,typeName:Ms.ZodNullable},Ca(t)));class Fs extends Da{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===oa.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Fs.create=(e,t)=>new Fs(c({innerType:e,typeName:Ms.ZodDefault,defaultValue:"function"===typeof t.default?t.default:()=>t.default},Ca(t)));class Ps extends Da{_parse(e){const{ctx:t}=this._processInputParams(e),n=c(c({},t),{},{common:c(c({},t.common),{},{issues:[]})}),r=this._def.innerType._parse({data:n.data,path:n.path,parent:c({},n)});return ja(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ua(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new ua(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ps.create=(e,t)=>new Ps(c({innerType:e,typeName:Ms.ZodCatch,catchValue:"function"===typeof t.catch?t.catch:()=>t.catch},Ca(t)));class Ts extends Da{_parse(e){if(this._getType(e)!==oa.nan){const t=this._getOrReturnCtx(e);return ga(t,{code:ca.invalid_type,expected:oa.nan,received:t.parsedType}),va}return{status:"valid",value:e.data}}}Ts.create=e=>new Ts(c({typeName:Ms.ZodNaN},Ca(e)));Symbol("zod_brand");class Os extends Da{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Is extends Da{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?va:"dirty"===e.status?(t.dirty(),ba(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?va:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Is({in:e,out:t,typeName:Ms.ZodPipeline})}}class Rs extends Da{_parse(e){const t=this._def.innerType._parse(e),n=e=>(ka(e)&&(e.value=Object.freeze(e.value)),e);return ja(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}Rs.create=(e,t)=>new Rs(c({innerType:e,typeName:Ms.ZodReadonly},Ca(t)));ps.lazycreate;var Ms;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Ms||(Ms={}));const Ls=Ga.create,zs=es.create,Bs=(Ts.create,ts.create,ns.create),Vs=(rs.create,as.create,ss.create,is.create,os.create,ls.create,cs.create,us.create,ds.create),Us=ps.create,Ws=(ps.strictCreate,ms.create),qs=gs.create,Hs=(vs.create,bs.create,xs.create,_s.create,ws.create,ks.create),$s=Ns.create,Zs=(Ss.create,Cs.create,Ds.create,Es.create,As.create,Ds.createWithPreprocess,Is.create,$s(["constitution_provision","statute_section","city_ordinance_section","rule_of_court","agency_circular","doj_issuance","executive_issuance","rights_advisory"])),Js=$s(["active","amended","repealed","draft","approved","published"]),Ys=Ls().min(3,"Enter a jurisdiction like 'Cavite' or 'Quezon City'").max(40,"Keep it under 40 characters").regex(/^[A-Za-z\xc0-\xff]+(?:[-' ]+[A-Za-z\xc0-\xff]+)*(?: City| Province)?$/,"Use title case, letters/spaces only (e.g., 'Cavite', 'Quezon City', 'Baguio')"),Ks=Ws([Hs("PH"),Ys]),Qs=Ls().url("Provide a valid URL"),Gs=Ls().regex(/^\d{4}-\d{2}-\d{2}$/,"Use YYYY-MM-DD"),Xs=qs("type",[Us({type:Hs("internal"),entry_id:Ls().min(1),note:Ls().optional()}),Us({type:Hs("external"),citation:Ls().min(1),url:Qs.optional(),note:Ls().optional()})]),ei=qs("type",[Us({type:Hs("internal"),entry_id:Ls().min(1),note:Ls().optional(),title:Ls().optional()}),Us({type:Hs("external"),citation:Ls().min(1),url:Qs.optional(),note:Ls().optional(),title:Ls().optional()})]),ti=(Us({offense_no:zs().int().gte(1),amount:zs().gte(0),currency:Ls().default("PHP")}),Us({text:Ls().min(1,"Step text is required"),condition:Ls().optional(),deadline:Ls().optional(),evidence_required:Vs(Ls()).default([]),legal_bases:Vs(ei).default([]),failure_state:Ls().optional()})),ni=(Us({name:Ls().min(1),steps:Vs(ti).min(1,"Add at least one step")}),Us({type:Zs,entry_id:Ls().min(1),title:Ls().min(1),jurisdiction:Ks.optional(),law_family:Ls().optional(),section_id:Ls().optional(),canonical_citation:Ls().optional(),status:Js.optional(),effective_date:Gs.optional(),amendment_date:Gs.nullable().optional(),summary:Ls().optional(),text:Ls().optional(),source_urls:Vs(Qs).default([]),tags:Vs(Ls()).default([]),last_reviewed:Gs.optional(),visibility:Us({gli:Bs().default(!0),cpa:Bs().default(!1)})})),ri=ni.extend({type:Hs("constitution_provision"),topics:Vs(Ls()).default([]),related_sections:Vs(Xs).default([]),jurisprudence:Vs(Ls()).default([]).optional()}),ai=ni.extend({type:Hs("statute_section"),elements:Vs(Ls()).default([]),penalties:Vs(Ls()).default([]),defenses:Vs(Ls()).default([]).optional(),prescriptive_period:Us({value:Ws([zs().positive(),Hs("NA")]),unit:$s(["days","months","years","NA"]).optional()}).optional(),standard_of_proof:Ls().optional(),related_sections:Vs(Xs).default([]),legal_bases:Vs(ei).default([])}),si=ni.extend({type:Hs("city_ordinance_section"),elements:Vs(Ls()).default([]),penalties:Vs(Ls()).default([]),defenses:Vs(Ls()).default([]).optional(),related_sections:Vs(Xs).default([]),legal_bases:Vs(ei).default([])}),ii=ni.extend({type:Hs("rule_of_court"),rule_no:Ls().min(1),section_no:Ls().min(1),triggers:Vs(Ls()).default([]),time_limits:Vs(Ls()).default([]),required_forms:Vs(Ls()).default([]).optional(),related_sections:Vs(Xs).default([])}),oi=ni.extend({type:Hs("agency_circular"),circular_no:Ls().optional(),section_no:Ls().optional(),applicability:Vs(Ls()).default([]),legal_bases:Vs(ei).default([]),supersedes:Vs(Xs).default([])}),li=ni.extend({type:Hs("doj_issuance"),issuance_no:Ls().optional(),applicability:Vs(Ls()).default([]),legal_bases:Vs(ei).default([]),supersedes:Vs(Xs).default([])}),ci=ni.extend({type:Hs("executive_issuance"),instrument_no:Ls().optional(),applicability:Vs(Ls()).default([]),legal_bases:Vs(ei).default([]),supersedes:Vs(Xs).default([])}),ui=ni.extend({type:Hs("rights_advisory"),rights_scope:Ws([$s(["arrest","search","detention","counsel","GBV","minors","privacy","traffic stop","protective orders","fair trial","freedom of expression","legal aid access","complaint filing","labor rights","consumer rights","housing/land rights","health/education"]),Ls().min(2).max(80)]).optional(),advice_points:Vs(Ls()).default([]),legal_bases:Vs(ei).default([]),related_sections:Vs(Xs).default([])}),di=qs("type",[ri,ai,si,ii,oi,li,ci,ui]);var fi=n(579);function pi(e){let{data:t}=e;const{title:n,canonical_citation:r,type:a,status:s,effective_date:i,amendment_date:o,last_reviewed:l,summary:c,tags:u=[],jurisdiction:d}=t||{},f=Boolean(c&&String(c).trim().length>0),p=Array.isArray(u)&&u.length>0;return(0,fi.jsxs)("aside",{className:"space-y-4",children:[(0,fi.jsxs)("div",{className:"p-4 pb-2",children:[(0,fi.jsx)("div",{className:"text-xs uppercase tracking-wide text-muted-foreground mb-1",children:"Preview"}),(0,fi.jsx)("div",{className:"text-xl font-semibold leading-tight",children:n||"Untitled entry"}),r&&(0,fi.jsx)("div",{className:"text-sm text-gray-600 mt-0.5",children:r})]}),(0,fi.jsxs)("div",{className:"p-4 pt-0",children:[(0,fi.jsx)("div",{className:"text-xs uppercase tracking-wide text-muted-foreground mt-2 mb-1",children:"Details"}),(0,fi.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,fi.jsxs)("div",{children:[(0,fi.jsx)("div",{className:"text-gray-500",children:"Type"}),(0,fi.jsx)("div",{className:"font-medium break-words",children:a||"\u2014"})]}),(0,fi.jsxs)("div",{children:[(0,fi.jsx)("div",{className:"text-gray-500",children:"Status"}),(0,fi.jsx)("div",{className:"font-medium",children:s||"\u2014"})]}),(0,fi.jsxs)("div",{children:[(0,fi.jsx)("div",{className:"text-gray-500",children:"Effective"}),(0,fi.jsx)("div",{className:"font-medium",children:i||"\u2014"})]}),(0,fi.jsxs)("div",{children:[(0,fi.jsx)("div",{className:"text-gray-500",children:"Jurisdiction"}),(0,fi.jsx)("div",{className:"font-medium",children:d||"\u2014"})]}),(0,fi.jsxs)("div",{className:"col-span-2",children:[(0,fi.jsx)("div",{className:"text-gray-500",children:"Last Reviewed"}),(0,fi.jsx)("div",{className:"font-medium",children:l||"\u2014"})]})]})]}),f&&(0,fi.jsxs)("div",{className:"p-4 pt-0",children:[(0,fi.jsx)("div",{className:"text-xs uppercase tracking-wide text-muted-foreground mt-1 mb-0",children:"Summary"}),(0,fi.jsx)("div",{className:"text-sm text-gray-800 whitespace-pre-wrap leading-snug",children:c})]}),p&&(0,fi.jsxs)("div",{className:"p-4 pt-0",children:[(0,fi.jsx)("div",{className:"text-xs uppercase tracking-wide text-muted-foreground mt-2 mb-2",children:"Tags"}),(0,fi.jsx)("div",{className:"flex gap-2 flex-wrap",children:u.map((e,t)=>(0,fi.jsxs)("span",{className:"kb-chip",children:["#",e]},t))})]})]})}const mi=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},hi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var gi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yi=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],vi=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:d}=e,f=u(e,yi);return(0,r.createElement)("svg",c(c(c({ref:t},gi),{},{width:a,height:a,stroke:n,strokeWidth:i?24*Number(s)/Number(a):s,className:hi("lucide",o)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(f)&&{"aria-hidden":"true"}),f),[...d.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),bi=["className"],xi=(e,t)=>{const n=(0,r.forwardRef)((n,a)=>{let{className:s}=n,i=u(n,bi);return(0,r.createElement)(vi,c({ref:a,iconNode:t,className:hi("lucide-".concat((o=mi(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),s)},i));var o});return n.displayName=mi(e),n},_i=xi("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),wi=xi("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),ki=xi("book-text",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]]),ji=xi("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),Ni=xi("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),Si=xi("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function Ci(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Ci(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Di(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Ci(e))&&(r&&(r+=" "),r+=t);return r}const Ei=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),s=a?Ei(e.slice(1),a):void 0;if(s)return s;if(0===t.validators.length)return;const i=e.join("-");return null===(n=t.validators.find(e=>{let{validator:t}=e;return t(i)}))||void 0===n?void 0:n.classGroupId},Ai=/^\[(.+)\]$/,Fi=e=>{if(Ai.test(e)){const t=Ai.exec(e)[1],n=null===t||void 0===t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Pi=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)Ti(n[a],r,a,t);return r},Ti=(e,t,n,r)=>{e.forEach(e=>{if("string"===typeof e){return void((""===e?t:Oi(t,e)).classGroupId=n)}if("function"===typeof e)return Ii(e)?void Ti(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(e=>{let[a,s]=e;Ti(s,Oi(t,a),n,r)})})},Oi=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},Ii=e=>e.isThemeGetter,Ri=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(a,s)=>{n.set(a,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(a(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):a(e,t)}}},Mi=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,a=0,s=0;for(let l=0;l<e.length;l++){let i=e[l];if(0===r&&0===a){if(":"===i){t.push(e.slice(s,l)),s=l+1;continue}if("/"===i){n=l;continue}}"["===i?r++:"]"===i?r--:"("===i?a++:")"===i&&a--}const i=0===t.length?e:e.substring(s),o=Li(i);return{modifiers:t,hasImportantModifier:o!==i,baseClassName:o,maybePostfixModifierPosition:n&&n>s?n-s:void 0}};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},Li=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,zi=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;const n=[];let r=[];return e.forEach(e=>{"["===e[0]||t[e]?(n.push(...r.sort(),e),r=[]):r.push(e)}),n.push(...r.sort()),n}},Bi=e=>c({cache:Ri(e.cacheSize),parseClassName:Mi(e),sortModifiers:zi(e)},(e=>{const t=Pi(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),Ei(n,t)||Fi(e)},getConflictingClassGroupIds:(e,t)=>{const a=n[e]||[];return t&&r[e]?[...a,...r[e]]:a}}})(e)),Vi=/\s+/;function Ui(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Wi(e))&&(r&&(r+=" "),r+=t);return r}const Wi=e=>{if("string"===typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Wi(e[r]))&&(n&&(n+=" "),n+=t);return n};function qi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let a,s,i,o=function(t){const r=n.reduce((e,t)=>t(e),e());return a=Bi(r),s=a.cache.get,i=a.cache.set,o=l,l(t)};function l(e){const t=s(e);if(t)return t;const n=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:s}=t,i=[],o=e.trim().split(Vi);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let m=!!p,h=r(m?f.substring(0,p):f);if(!h){if(!m){l=e+(l.length>0?" "+l:l);continue}if(h=r(f),!h){l=e+(l.length>0?" "+l:l);continue}m=!1}const g=s(u).join(":"),y=d?g+"!":g,v=y+h;if(i.includes(v))continue;i.push(v);const b=a(h,m);for(let n=0;n<b.length;++n){const e=b[n];i.push(y+e)}l=e+(l.length>0?" "+l:l)}return l})(e,a);return i(e,n),n}return function(){return o(Ui.apply(null,arguments))}}const Hi=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},$i=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Zi=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ji=/^\d+\/\d+$/,Yi=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ki=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qi=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Gi=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Xi=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,eo=e=>Ji.test(e),to=e=>!!e&&!Number.isNaN(Number(e)),no=e=>!!e&&Number.isInteger(Number(e)),ro=e=>e.endsWith("%")&&to(e.slice(0,-1)),ao=e=>Yi.test(e),so=()=>!0,io=e=>Ki.test(e)&&!Qi.test(e),oo=()=>!1,lo=e=>Gi.test(e),co=e=>Xi.test(e),uo=e=>!po(e)&&!bo(e),fo=e=>So(e,Ao,oo),po=e=>$i.test(e),mo=e=>So(e,Fo,io),ho=e=>So(e,Po,to),go=e=>So(e,Do,oo),yo=e=>So(e,Eo,co),vo=e=>So(e,Oo,lo),bo=e=>Zi.test(e),xo=e=>Co(e,Fo),_o=e=>Co(e,To),wo=e=>Co(e,Do),ko=e=>Co(e,Ao),jo=e=>Co(e,Eo),No=e=>Co(e,Oo,!0),So=(e,t,n)=>{const r=$i.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},Co=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Zi.exec(e);return!!r&&(r[1]?t(r[1]):n)},Do=e=>"position"===e||"percentage"===e,Eo=e=>"image"===e||"url"===e,Ao=e=>"length"===e||"size"===e||"bg-size"===e,Fo=e=>"length"===e,Po=e=>"number"===e,To=e=>"family-name"===e,Oo=e=>"shadow"===e,Io=(Symbol.toStringTag,()=>{const e=Hi("color"),t=Hi("font"),n=Hi("text"),r=Hi("font-weight"),a=Hi("tracking"),s=Hi("leading"),i=Hi("breakpoint"),o=Hi("container"),l=Hi("spacing"),c=Hi("radius"),u=Hi("shadow"),d=Hi("inset-shadow"),f=Hi("text-shadow"),p=Hi("drop-shadow"),m=Hi("blur"),h=Hi("perspective"),g=Hi("aspect"),y=Hi("ease"),v=Hi("animate"),b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",bo,po],x=()=>[bo,po,l],_=()=>[eo,"full","auto",...x()],w=()=>[no,"none","subgrid",bo,po],k=()=>["auto",{span:["full",no,bo,po]},no,bo,po],j=()=>[no,"auto",bo,po],N=()=>["auto","min","max","fr",bo,po],S=()=>["auto",...x()],C=()=>[eo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],D=()=>[e,bo,po],E=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",wo,go,{position:[bo,po]}],A=()=>["auto","cover","contain",ko,fo,{size:[bo,po]}],F=()=>[ro,xo,mo],P=()=>["","none","full",c,bo,po],T=()=>["",to,xo,mo],O=()=>[to,ro,wo,go],I=()=>["","none",m,bo,po],R=()=>["none",to,bo,po],M=()=>["none",to,bo,po],L=()=>[to,bo,po],z=()=>[eo,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ao],breakpoint:[ao],color:[so],container:[ao],"drop-shadow":[ao],ease:["in","out","in-out"],font:[uo],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ao],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ao],shadow:[ao],spacing:["px",to],text:[ao],"text-shadow":[ao],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",eo,po,bo,g]}],container:["container"],columns:[{columns:[to,po,bo,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:_()}],"inset-x":[{"inset-x":_()}],"inset-y":[{"inset-y":_()}],start:[{start:_()}],end:[{end:_()}],top:[{top:_()}],right:[{right:_()}],bottom:[{bottom:_()}],left:[{left:_()}],visibility:["visible","invisible","collapse"],z:[{z:[no,"auto",bo,po]}],basis:[{basis:[eo,"full","auto",o,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[to,eo,"auto","initial","none",po]}],grow:[{grow:["",to,bo,po]}],shrink:[{shrink:["",to,bo,po]}],order:[{order:[no,"first","last","none",bo,po]}],"grid-cols":[{"grid-cols":w()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":w()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":N()}],"auto-rows":[{"auto-rows":N()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:S()}],mx:[{mx:S()}],my:[{my:S()}],ms:[{ms:S()}],me:[{me:S()}],mt:[{mt:S()}],mr:[{mr:S()}],mb:[{mb:S()}],ml:[{ml:S()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:C()}],w:[{w:[o,"screen",...C()]}],"min-w":[{"min-w":[o,"screen","none",...C()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[i]},...C()]}],h:[{h:["screen","lh",...C()]}],"min-h":[{"min-h":["screen","lh","none",...C()]}],"max-h":[{"max-h":["screen","lh",...C()]}],"font-size":[{text:["base",n,xo,mo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,bo,ho]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ro,po]}],"font-family":[{font:[_o,po,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,bo,po]}],"line-clamp":[{"line-clamp":[to,"none",bo,ho]}],leading:[{leading:[s,...x()]}],"list-image":[{"list-image":["none",bo,po]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",bo,po]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:D()}],"text-color":[{text:D()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[to,"from-font","auto",bo,mo]}],"text-decoration-color":[{decoration:D()}],"underline-offset":[{"underline-offset":[to,"auto",bo,po]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",bo,po]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",bo,po]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:E()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},no,bo,po],radial:["",bo,po],conic:[no,bo,po]},jo,yo]}],"bg-color":[{bg:D()}],"gradient-from-pos":[{from:F()}],"gradient-via-pos":[{via:F()}],"gradient-to-pos":[{to:F()}],"gradient-from":[{from:D()}],"gradient-via":[{via:D()}],"gradient-to":[{to:D()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:T()}],"border-w-x":[{"border-x":T()}],"border-w-y":[{"border-y":T()}],"border-w-s":[{"border-s":T()}],"border-w-e":[{"border-e":T()}],"border-w-t":[{"border-t":T()}],"border-w-r":[{"border-r":T()}],"border-w-b":[{"border-b":T()}],"border-w-l":[{"border-l":T()}],"divide-x":[{"divide-x":T()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":T()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:D()}],"border-color-x":[{"border-x":D()}],"border-color-y":[{"border-y":D()}],"border-color-s":[{"border-s":D()}],"border-color-e":[{"border-e":D()}],"border-color-t":[{"border-t":D()}],"border-color-r":[{"border-r":D()}],"border-color-b":[{"border-b":D()}],"border-color-l":[{"border-l":D()}],"divide-color":[{divide:D()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[to,bo,po]}],"outline-w":[{outline:["",to,xo,mo]}],"outline-color":[{outline:D()}],shadow:[{shadow:["","none",u,No,vo]}],"shadow-color":[{shadow:D()}],"inset-shadow":[{"inset-shadow":["none",d,No,vo]}],"inset-shadow-color":[{"inset-shadow":D()}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:D()}],"ring-offset-w":[{"ring-offset":[to,mo]}],"ring-offset-color":[{"ring-offset":D()}],"inset-ring-w":[{"inset-ring":T()}],"inset-ring-color":[{"inset-ring":D()}],"text-shadow":[{"text-shadow":["none",f,No,vo]}],"text-shadow-color":[{"text-shadow":D()}],opacity:[{opacity:[to,bo,po]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[to]}],"mask-image-linear-from-pos":[{"mask-linear-from":O()}],"mask-image-linear-to-pos":[{"mask-linear-to":O()}],"mask-image-linear-from-color":[{"mask-linear-from":D()}],"mask-image-linear-to-color":[{"mask-linear-to":D()}],"mask-image-t-from-pos":[{"mask-t-from":O()}],"mask-image-t-to-pos":[{"mask-t-to":O()}],"mask-image-t-from-color":[{"mask-t-from":D()}],"mask-image-t-to-color":[{"mask-t-to":D()}],"mask-image-r-from-pos":[{"mask-r-from":O()}],"mask-image-r-to-pos":[{"mask-r-to":O()}],"mask-image-r-from-color":[{"mask-r-from":D()}],"mask-image-r-to-color":[{"mask-r-to":D()}],"mask-image-b-from-pos":[{"mask-b-from":O()}],"mask-image-b-to-pos":[{"mask-b-to":O()}],"mask-image-b-from-color":[{"mask-b-from":D()}],"mask-image-b-to-color":[{"mask-b-to":D()}],"mask-image-l-from-pos":[{"mask-l-from":O()}],"mask-image-l-to-pos":[{"mask-l-to":O()}],"mask-image-l-from-color":[{"mask-l-from":D()}],"mask-image-l-to-color":[{"mask-l-to":D()}],"mask-image-x-from-pos":[{"mask-x-from":O()}],"mask-image-x-to-pos":[{"mask-x-to":O()}],"mask-image-x-from-color":[{"mask-x-from":D()}],"mask-image-x-to-color":[{"mask-x-to":D()}],"mask-image-y-from-pos":[{"mask-y-from":O()}],"mask-image-y-to-pos":[{"mask-y-to":O()}],"mask-image-y-from-color":[{"mask-y-from":D()}],"mask-image-y-to-color":[{"mask-y-to":D()}],"mask-image-radial":[{"mask-radial":[bo,po]}],"mask-image-radial-from-pos":[{"mask-radial-from":O()}],"mask-image-radial-to-pos":[{"mask-radial-to":O()}],"mask-image-radial-from-color":[{"mask-radial-from":D()}],"mask-image-radial-to-color":[{"mask-radial-to":D()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[to]}],"mask-image-conic-from-pos":[{"mask-conic-from":O()}],"mask-image-conic-to-pos":[{"mask-conic-to":O()}],"mask-image-conic-from-color":[{"mask-conic-from":D()}],"mask-image-conic-to-color":[{"mask-conic-to":D()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:E()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",bo,po]}],filter:[{filter:["","none",bo,po]}],blur:[{blur:I()}],brightness:[{brightness:[to,bo,po]}],contrast:[{contrast:[to,bo,po]}],"drop-shadow":[{"drop-shadow":["","none",p,No,vo]}],"drop-shadow-color":[{"drop-shadow":D()}],grayscale:[{grayscale:["",to,bo,po]}],"hue-rotate":[{"hue-rotate":[to,bo,po]}],invert:[{invert:["",to,bo,po]}],saturate:[{saturate:[to,bo,po]}],sepia:[{sepia:["",to,bo,po]}],"backdrop-filter":[{"backdrop-filter":["","none",bo,po]}],"backdrop-blur":[{"backdrop-blur":I()}],"backdrop-brightness":[{"backdrop-brightness":[to,bo,po]}],"backdrop-contrast":[{"backdrop-contrast":[to,bo,po]}],"backdrop-grayscale":[{"backdrop-grayscale":["",to,bo,po]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[to,bo,po]}],"backdrop-invert":[{"backdrop-invert":["",to,bo,po]}],"backdrop-opacity":[{"backdrop-opacity":[to,bo,po]}],"backdrop-saturate":[{"backdrop-saturate":[to,bo,po]}],"backdrop-sepia":[{"backdrop-sepia":["",to,bo,po]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",bo,po]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[to,"initial",bo,po]}],ease:[{ease:["linear","initial",y,bo,po]}],delay:[{delay:[to,bo,po]}],animate:[{animate:["none",v,bo,po]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[h,bo,po]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:R()}],"rotate-x":[{"rotate-x":R()}],"rotate-y":[{"rotate-y":R()}],"rotate-z":[{"rotate-z":R()}],scale:[{scale:M()}],"scale-x":[{"scale-x":M()}],"scale-y":[{"scale-y":M()}],"scale-z":[{"scale-z":M()}],"scale-3d":["scale-3d"],skew:[{skew:L()}],"skew-x":[{"skew-x":L()}],"skew-y":[{"skew-y":L()}],transform:[{transform:[bo,po,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:z()}],"translate-x":[{"translate-x":z()}],"translate-y":[{"translate-y":z()}],"translate-z":[{"translate-z":z()}],"translate-none":["translate-none"],accent:[{accent:D()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:D()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",bo,po]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",bo,po]}],fill:[{fill:["none",...D()]}],"stroke-w":[{stroke:[to,xo,mo,ho]}],stroke:[{stroke:["none",...D()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),Ro=qi(Io);function Mo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ro(Di(t))}function Lo(e){let{steps:t,currentStep:n,onStepClick:r}=e;return(0,fi.jsx)("aside",{className:"h-full",children:(0,fi.jsx)("div",{children:(0,fi.jsxs)("div",{className:"ds-card rounded-2xl shadow-sm border p-5 h-full min-h-[360px] w-full",children:[(0,fi.jsx)("div",{className:"flex items-center gap-3 mb-8 -mt-1",children:(0,fi.jsx)("h3",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Progress"})}),(0,fi.jsx)("ul",{className:"space-y-6",children:t.map(e=>{const t=n===e.id,a=n>e.id,s=(e=>{switch(e){case 1:default:return(0,fi.jsx)(_i,{className:"h-4 w-4"});case 2:return(0,fi.jsx)(wi,{className:"h-4 w-4"});case 3:return(0,fi.jsx)(ki,{className:"h-4 w-4"});case 4:return(0,fi.jsx)(ji,{className:"h-4 w-4"});case 5:return(0,fi.jsx)(Ni,{className:"h-4 w-4"})}})(e.id);return(0,fi.jsxs)("li",{className:Mo("flex items-center gap-5 rounded-token px-4 py-3 my-2 cursor-pointer transition-all duration-200 ring-0",t&&"bg-primary/10 outline-none",a&&"opacity-90",!t&&!a&&"hover:bg-muted/60"),onClick:()=>r(e.id),tabIndex:0,children:[(0,fi.jsx)("div",{className:Mo("flex items-center justify-center w-10 h-10 rounded-full transition-all duration-200 mb-1",t?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:s}),(0,fi.jsxs)("div",{className:"flex-1 min-w-0 space-y-1 min-h-10 flex flex-col justify-center",children:[(0,fi.jsx)("div",{className:Mo("text-sm font-semibold leading-tight truncate",t?"text-primary":"text-foreground"),children:e.name}),(0,fi.jsx)("div",{className:"text-xs text-muted-foreground truncate leading-relaxed",children:e.description})]}),a&&(0,fi.jsx)("div",{className:"flex-shrink-0",children:(0,fi.jsx)(Si,{className:"h-5 w-5 text-primary"})})]},e.id)})}),(0,fi.jsxs)("div",{className:"mt-7 pt-0",children:[(0,fi.jsxs)("div",{className:"text-sm font-semibold text-foreground mt-3 mb-3",children:["Step ",n," of ",t.length]}),(0,fi.jsx)("div",{className:"w-full bg-muted rounded-full h-2 overflow-hidden mb-2",children:(0,fi.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(n/t.length*100,"%")}})})]})]})})})}const zo=["class","className"],Bo=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,Vo=Di,Uo=(e,t)=>n=>{var r;if(null==(null===t||void 0===t?void 0:t.variants))return Vo(e,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className);const{variants:a,defaultVariants:s}=t,i=Object.keys(a).map(e=>{const t=null===n||void 0===n?void 0:n[e],r=null===s||void 0===s?void 0:s[e];if(null===t)return null;const i=Bo(t)||Bo(r);return a[e][i]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null===t||void 0===t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r}=t,a=u(t,zo);return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes(c(c({},s),o)[t]):c(c({},s),o)[t]===n})?[...e,n,r]:e},[]);return Vo(e,i,l,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className)},Wo=["className","variant","size","asChild"],qo=Uo("inline-flex items-center justify-center rounded-xl text-base font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-orange-500 text-white hover:bg-orange-600 hover:shadow-md hover:-translate-y-[1px] active:bg-orange-700 shadow-sm",destructive:"bg-red-600 text-white hover:bg-red-700 hover:shadow-md hover:-translate-y-[1px] active:bg-red-800 shadow-sm",outline:"border-2 border-orange-500 text-orange-700 bg-transparent hover:bg-transparent hover:border-orange-600 hover:text-orange-800 hover:-translate-y-[1px] active:bg-transparent shadow-sm",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary",delete:"bg-red-600 text-white hover:bg-red-700 hover:shadow-md hover:-translate-y-[1px] active:bg-red-800 shadow-sm",success:"bg-green-600 text-white hover:bg-green-700 hover:shadow-md hover:-translate-y-[1px] active:bg-green-800 shadow-sm"},size:{default:"h-11 px-5",sm:"h-10 px-4 rounded-lg",lg:"h-12 px-6 rounded-2xl",icon:"h-11 w-11"}},defaultVariants:{variant:"default",size:"default"}}),Ho=r.forwardRef((e,t)=>{let{className:n,variant:r,size:a,asChild:s=!1}=e,i=u(e,Wo);return(0,fi.jsx)("button",c({className:Mo(qo({variant:r,size:a,className:n})),ref:t},i))});Ho.displayName="Button";const $o=xi("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Zo=["className","type","value"],Jo=r.forwardRef((e,t)=>{let{className:n,type:r,value:a}=e,s=u(e,Zo);const i=null===a?"":a;return(0,fi.jsx)("input",c({type:r,value:i,className:Mo("flex h-11 w-full rounded-xl border border-input bg-background px-4 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-200 focus:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t},s))});Jo.displayName="Input";const Yo=xi("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Ko=xi("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function Qo(e){let{control:t,name:n,label:a,help:s,placeholder:i="Enter item",enableTagParsing:o=!1}=e;const{register:l,setValue:u,watch:d}=Pn(),{fields:f,append:p,remove:m}=Ir({control:t,name:n}),[h,g]=(0,r.useState)(""),y=d(n)||[],v=e=>{if(!e.trim())return[];return e.split(",").flatMap(e=>e.split("_")).map(e=>e.trim()).filter(e=>e.length>0)},b=()=>{if(!h.trim())return;const e=v(h),t=new Set(y.map(e=>e.toLowerCase()));e.filter(e=>!t.has(e.toLowerCase())).forEach(e=>p(e)),g("")};return(0,fi.jsxs)("div",{className:"space-y-3",children:[(0,fi.jsxs)("div",{children:[(0,fi.jsx)("label",{className:"text-sm font-medium mb-2 block",children:a}),s&&(0,fi.jsx)("p",{className:"text-xs text-muted-foreground mt-1 mb-2",children:s})]}),o&&(0,fi.jsxs)("div",{className:"space-y-2",children:[(0,fi.jsxs)("div",{className:"flex gap-2",children:[(0,fi.jsx)(Jo,{value:h,onChange:e=>g(e.target.value),placeholder:"Paste multiple tags: national_territory, sovereignty, archipelagic_doctrine",className:"flex-1 h-11 pl-6 pr-4 text-base rounded-xl",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),b())}}),(0,fi.jsx)(Ho,{type:"button",variant:"outline",onClick:b,className:"shrink-0 h-11 px-4 rounded-xl",children:"Add All"})]}),(0,fi.jsx)("p",{className:"text-xs text-muted-foreground",children:"Separate with commas, underscores will be split automatically. Duplicates are ignored."})]}),(0,fi.jsxs)("div",{className:"space-y-2",children:[f.map((e,t)=>(0,fi.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,fi.jsx)(Jo,c(c({},l("".concat(n,".").concat(t))),{},{onChange:e=>((e,t)=>{if(o&&(e.includes(",")||e.includes("_"))){const r=v(e);if(r.length>0){setTimeout(()=>u("".concat(n,".").concat(t),r[0]),0);const e=new Set(y.map(e=>e.toLowerCase()));r.slice(1).filter(t=>!e.has(t.toLowerCase())).forEach(e=>p(e))}}else setTimeout(()=>u("".concat(n,".").concat(t),e),0)})(e.target.value,t),placeholder:i,className:"flex-1 h-11 pl-6 pr-4 text-base rounded-xl"})),(0,fi.jsx)(Ho,{type:"button",variant:"destructive",size:"icon",onClick:()=>m(t),className:"shrink-0 h-11 w-11 rounded-xl",children:(0,fi.jsx)(Yo,{className:"h-4 w-4"})})]},e.id)),(0,fi.jsxs)(Ho,{type:"button",variant:"success",onClick:()=>p(""),className:"w-full h-11 px-5 rounded-xl",children:[(0,fi.jsx)(Ko,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})]})}function Go(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function Xo(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function el(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map(t=>{const r=Xo(t,e);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"==typeof n?n():Xo(t[e],null)}}}}const tl=["children"],nl=["children"];function rl(e){const t=sl(e),n=r.forwardRef((e,n)=>{const{children:a}=e,s=u(e,tl),i=r.Children.toArray(a),o=i.find(ol);if(o){const e=o.props.children,a=i.map(t=>t===o?r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null:t);return(0,fi.jsx)(t,c(c({},s),{},{ref:n,children:r.isValidElement(e)?r.cloneElement(e,void 0,a):null}))}return(0,fi.jsx)(t,c(c({},s),{},{ref:n,children:a}))});return n.displayName="".concat(e,".Slot"),n}var al=rl("Slot");function sl(e){const t=r.forwardRef((e,t)=>{const{children:n}=e,a=u(e,nl);if(r.isValidElement(n)){const e=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n=c({},t);for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=function(){const e=s(...arguments);return a(...arguments),e}:a&&(n[r]=a):"style"===r?n[r]=c(c({},a),s):"className"===r&&(n[r]=[a,s].filter(Boolean).join(" "))}return c(c({},e),n)}(a,n.props);return n.type!==r.Fragment&&(s.ref=t?el(t,e):e),r.cloneElement(n,s)}return r.Children.count(n)>1?r.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var il=Symbol("radix.slottable");function ol(e){return r.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===il}n(950);const ll=["asChild"];var cl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=rl("Primitive.".concat(t)),a=r.forwardRef((e,r)=>{const{asChild:a}=e,s=u(e,ll),i=a?n:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,fi.jsx)(i,c(c({},s),{},{ref:r}))});return a.displayName="Primitive.".concat(t),c(c({},e),{},{[t]:a})},{});var ul=r.forwardRef((e,t)=>(0,fi.jsx)(cl.label,c(c({},e),{},{ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));ul.displayName="Label";var dl=ul;const fl=["className"],pl=Uo("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ml=r.forwardRef((e,t)=>{let{className:n}=e,r=u(e,fl);return(0,fi.jsx)(dl,c({ref:t,className:Mo(pl(),n)},r))});ml.displayName=dl.displayName;const hl=["className"],gl=["className"],yl=["className"],vl=["className","children"],bl=r.createContext({}),xl=e=>{let t=Object.assign({},(Go(e),e));return(0,fi.jsx)(bl.Provider,{value:{name:t.name},children:(0,fi.jsx)(Un,c({},t))})},_l=()=>{const e=r.useContext(bl),t=r.useContext(wl),{getFieldState:n,formState:a}=Pn(),s=n(e.name,a);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return c({id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message")},s)},wl=r.createContext({}),kl=r.forwardRef((e,t)=>{let{className:n}=e,a=u(e,hl);const s=r.useId();return(0,fi.jsx)(wl.Provider,{value:{id:s},children:(0,fi.jsx)("div",c({ref:t,className:Mo("space-y-2",n)},a))})});kl.displayName="FormItem";const jl=r.forwardRef((e,t)=>{let{className:n}=e,r=u(e,gl);const{error:a,formItemId:s}=_l();return(0,fi.jsx)(ml,c({ref:t,className:Mo("block text-sm font-medium",a&&"text-destructive",n),htmlFor:s},r))});jl.displayName="FormLabel";const Nl=r.forwardRef((e,t)=>{let n=Object.assign({},(Go(e),e));const{error:r,formItemId:a,formDescriptionId:s,formMessageId:i}=_l();return(0,fi.jsx)(al,c({ref:t,id:a,"aria-describedby":r?"".concat(s," ").concat(i):"".concat(s),"aria-invalid":!!r},n))});Nl.displayName="FormControl";const Sl=r.forwardRef((e,t)=>{let{className:n}=e,r=u(e,yl);const{formDescriptionId:a}=_l();return(0,fi.jsx)("p",c({ref:t,id:a,className:Mo("text-xs text-muted-foreground mb-2",n)},r))});Sl.displayName="FormDescription";const Cl=r.forwardRef((e,t)=>{let{className:n,children:r}=e,a=u(e,vl);const{error:s,formMessageId:i}=_l(),o=s?String(null===s||void 0===s?void 0:s.message):r;return!o||"string"===typeof o&&"required"===o.trim().toLowerCase()?null:(0,fi.jsx)("p",c(c({ref:t,id:i,className:Mo("text-xs text-destructive",n)},a),{},{children:o}))});Cl.displayName="FormMessage";const Dl=["className","options"],El=r.forwardRef((e,t)=>{let{className:n,options:r}=e,a=u(e,Dl);return(0,fi.jsxs)("select",c(c({className:Mo("flex h-11 w-full rounded-xl border border-input bg-background px-4 py-3 text-base ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 items-center",n),ref:t},a),{},{children:[(0,fi.jsx)("option",{value:"",children:"Type custom rights scope"}),r.map(e=>(0,fi.jsx)("option",{value:e.value,children:e.label},e.value))]}))});El.displayName="Select";const Al={constitution_provision:function(e){let{control:t}=e;return(0,fi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 md:gap-6",children:[(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"topics",label:"Topics",help:"e.g., ['arrest','search','detention','privacy']",placeholder:"Enter topic"})}),(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"jurisprudence",label:"Jurisprudence",help:"key case short cites (GR no., year, doctrine)",placeholder:"Enter jurisprudence"})})]})},statute_section:function(e){let{control:t}=e;return(0,fi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 md:gap-6",children:[(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"elements",label:"Elements",help:"Enumerated elements or requirements",placeholder:"e.g., actus_reus, mens_rea"})}),(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"penalties",label:"Penalties",help:"Human-readable penalties (ranges/qualifiers)",placeholder:"e.g., prision_correccional, fine_10k_50k"})}),(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"defenses",label:"Defenses",help:"Typical defenses/exceptions provided by law",placeholder:"e.g., self_defense, necessity"})}),(0,fi.jsx)(xl,{control:t,name:"prescriptive_period.value",render:e=>{let{field:t}=e;return(0,fi.jsxs)(kl,{className:"kb-field-spaced",children:[(0,fi.jsx)(jl,{className:"kb-form-label kb-label-spaced-sm",children:"Prescriptive Period Value"}),(0,fi.jsx)(Nl,{children:(0,fi.jsx)(Jo,c(c({},t),{},{type:"text",placeholder:"type NA if no prescription period",className:"kb-form-input",onChange:e=>{const n=e.target.value;if("NA"===n.trim().toUpperCase())t.onChange("NA");else if(""===n)t.onChange(void 0);else{const e=Number(n);t.onChange(isNaN(e)?n:e)}}}))}),(0,fi.jsx)(Cl,{})]})}}),"NA"===(null===(n=t._formValues)||void 0===n||null===(r=n.prescriptive_period)||void 0===r?void 0:r.value)?null:(0,fi.jsx)(xl,{control:t,name:"prescriptive_period.unit",render:e=>{let{field:t}=e;return(0,fi.jsxs)(kl,{className:"kb-field-spaced",children:[(0,fi.jsx)(jl,{className:"kb-form-label kb-label-spaced-sm",children:"Prescriptive Period Unit"}),(0,fi.jsx)(Nl,{children:(0,fi.jsx)(El,c(c({},t),{},{options:[{value:"days",label:"Days"},{value:"months",label:"Months"},{value:"years",label:"Years"},{value:"NA",label:"NA"}],className:"kb-form-select"}))}),(0,fi.jsx)(Cl,{})]})}}),(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(xl,{control:t,name:"standard_of_proof",render:e=>{let{field:t}=e;return(0,fi.jsxs)(kl,{className:"kb-field-spaced",children:[(0,fi.jsx)(jl,{className:"kb-form-label kb-label-spaced-sm",children:"Standard of Proof"}),(0,fi.jsx)(Nl,{children:(0,fi.jsx)(Jo,c(c({},t),{},{placeholder:"e.g., criminal: BRD | civil: preponderance",className:"kb-form-input"}))}),(0,fi.jsx)(Sl,{className:"kb-form-helper kb-helper-spaced",children:"Enter short descriptors; use any conventional shorthand."}),(0,fi.jsx)(Cl,{})]})}})})]});var n,r},city_ordinance_section:function(e){let{control:t}=e;return(0,fi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 md:gap-6",children:[(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"elements",label:"Elements",help:"enumerated elements/requirements",placeholder:"Enter element"})}),(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"penalties",label:"Penalties",help:"human-readable penalties (ranges/qualifiers)",placeholder:"Enter penalty"})}),(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"defenses",label:"Defenses",help:"typical statutory defenses/exceptions",placeholder:"Enter defense"})})]})},rule_of_court:function(e){let{control:t}=e;const n=(e,t)=>{const n=String(e||"").replace(/\D+/g,"");return n?"".concat(t," ").concat(n):"".concat(t," ")};return(0,fi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 md:gap-6",children:[(0,fi.jsx)(xl,{control:t,name:"rule_no",render:e=>{let{field:t}=e;return(0,fi.jsxs)(kl,{className:"kb-field-spaced",children:[(0,fi.jsx)(jl,{className:"kb-form-label kb-label-spaced-sm",children:"Rule Number"}),(0,fi.jsx)(Nl,{children:(0,fi.jsx)(Jo,c(c({},t),{},{placeholder:"e.g., Rule 113",className:"kb-form-input",onFocus:e=>{const n=String(t.value||"");if(!n||!/^\s*rule\b/i.test(n)){const n="Rule ";t.onChange(n),requestAnimationFrame(()=>{try{e.currentTarget.setSelectionRange(n.length,n.length)}catch(t){}})}},onChange:e=>{const r=e.target.value||"",a=n(r.replace(/^\s*rule\b\s*/i,""),"Rule");t.onChange(a)},onPaste:e=>{e.preventDefault();const r=(e.clipboardData||window.clipboardData).getData("text"),a=n(r.replace(/^\s*rule\b\s*/i,""),"Rule");t.onChange(a)}}))}),(0,fi.jsx)(Cl,{})]})}}),(0,fi.jsx)(xl,{control:t,name:"section_no",render:e=>{let{field:t}=e;return(0,fi.jsxs)(kl,{className:"kb-field-spaced",children:[(0,fi.jsx)(jl,{className:"kb-form-label kb-label-spaced-sm",children:"Section Number"}),(0,fi.jsx)(Nl,{children:(0,fi.jsx)(Jo,c(c({},t),{},{placeholder:"e.g., Section 5",className:"kb-form-input",onFocus:e=>{const n=String(t.value||"");if(!n||!/^\s*section\b/i.test(n)){const n="Section ";t.onChange(n),requestAnimationFrame(()=>{try{e.currentTarget.setSelectionRange(n.length,n.length)}catch(t){}})}},onChange:e=>{const r=(e.target.value||"").replace(/^\s*sec(t(ion)?)?\.?\b\s*/i,"").replace(/^\s*section\b\s*/i,""),a=n(r,"Section");t.onChange(a)},onPaste:e=>{e.preventDefault();const r=(e.clipboardData||window.clipboardData).getData("text").replace(/^\s*sec(t(ion)?)?\.?\b\s*/i,"").replace(/^\s*section\b\s*/i,""),a=n(r,"Section");t.onChange(a)}}))}),(0,fi.jsx)(Cl,{})]})}}),(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"triggers",label:"Triggers",help:"Events or conditions that activate this rule",placeholder:"e.g., warrantless_arrest, arraignment"})}),(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"time_limits",label:"Time Limits",help:"Deadlines such as 'within 12 hours', '10 days'",placeholder:"e.g., within_12_hours, 10_days"})}),(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"required_forms",label:"Required Forms",help:"Official forms demanded by the rule",placeholder:"e.g., warrant_application, subpoena_form"})})]})},agency_circular:function(e){let{control:t}=e;return(0,fi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 md:gap-6",children:[(0,fi.jsx)(xl,{control:t,name:"circular_no",render:e=>{let{field:t}=e;return(0,fi.jsxs)(kl,{children:[(0,fi.jsx)(jl,{className:"mb-2",children:"Circular Number"}),(0,fi.jsx)(Nl,{children:(0,fi.jsx)(Jo,c(c({},t),{},{placeholder:"e.g., MC 2023-001",className:"h-11 px-4 text-base rounded-xl"}))}),(0,fi.jsx)(Cl,{})]})}}),(0,fi.jsx)(xl,{control:t,name:"section_no",render:e=>{let{field:t}=e;return(0,fi.jsxs)(kl,{children:[(0,fi.jsx)(jl,{className:"mb-2",children:"Section Number"}),(0,fi.jsx)(Nl,{children:(0,fi.jsx)(Jo,c(c({},t),{},{placeholder:"section number if applicable",className:"h-11 px-4 text-base rounded-xl"}))}),(0,fi.jsx)(Cl,{})]})}}),(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"applicability",label:"Applicability",help:"domains/actors touched (licensing, towing, breath test)",placeholder:"Enter applicability"})}),(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"supersedes",label:"Supersedes",help:"earlier circulars affected",placeholder:"Enter superseded circular"})})]})},doj_issuance:function(e){let{control:t}=e;return(0,fi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 md:gap-6",children:[(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(xl,{control:t,name:"issuance_no",render:e=>{let{field:t}=e;return(0,fi.jsxs)(kl,{children:[(0,fi.jsx)(jl,{className:"mb-2",children:"Issuance Number"}),(0,fi.jsx)(Nl,{children:(0,fi.jsx)(Jo,c(c({},t),{},{placeholder:"e.g., DOJ-2023-001",className:"h-11 px-4 text-base rounded-xl"}))}),(0,fi.jsx)(Cl,{})]})}})}),(0,fi.jsx)("div",{className:"md:col-span-2 mb-2",children:(0,fi.jsx)(Qo,{control:t,name:"applicability",label:"Applicability",placeholder:"Enter applicability"})}),(0,fi.jsx)("div",{className:"md:col-span-2 mb-2",children:(0,fi.jsx)(Qo,{control:t,name:"supersedes",label:"Supersedes",placeholder:"Enter superseded issuance"})})]})},executive_issuance:function(e){let{control:t}=e;return(0,fi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 md:gap-6",children:[(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(xl,{control:t,name:"instrument_no",render:e=>{let{field:t}=e;return(0,fi.jsxs)(kl,{children:[(0,fi.jsx)(jl,{className:"mb-2",children:"Instrument Number"}),(0,fi.jsx)(Nl,{children:(0,fi.jsx)(Jo,c(c({},t),{},{placeholder:"e.g., EO 2023-001",className:"h-11 px-4 text-base rounded-xl"}))}),(0,fi.jsx)(Cl,{})]})}})}),(0,fi.jsx)("div",{className:"md:col-span-2 mb-2",children:(0,fi.jsx)(Qo,{control:t,name:"applicability",label:"Applicability",placeholder:"Enter applicability"})}),(0,fi.jsx)("div",{className:"md:col-span-2 mb-2",children:(0,fi.jsx)(Qo,{control:t,name:"supersedes",label:"Supersedes",placeholder:"Enter superseded issuance"})})]})},rights_advisory:function(e){let{control:t}=e;return(0,fi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 md:gap-6",children:[(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(xl,{control:t,name:"rights_scope",render:e=>{let{field:t}=e;return(0,fi.jsxs)(kl,{children:[(0,fi.jsx)(jl,{className:"mb-3 kb-form-label",children:"Rights Scope"}),(0,fi.jsx)(Nl,{children:(0,fi.jsxs)(fi.Fragment,{children:[(0,fi.jsx)(El,{value:t.value&&!["arrest","search","detention","counsel","GBV","minors","privacy","traffic stop","protective orders","fair trial","freedom of expression","legal aid access","complaint filing","labor rights","consumer rights","housing/land rights","health/education"].includes(t.value)?"Other":t.value||"",onChange:e=>{const n=e.target.value;"Other"===n?t.onChange(""):t.onChange(n)},options:[{value:"arrest",label:"Arrest"},{value:"search",label:"Search"},{value:"detention",label:"Detention"},{value:"counsel",label:"Counsel"},{value:"GBV",label:"GBV"},{value:"minors",label:"Minors"},{value:"privacy",label:"Privacy"},{value:"traffic stop",label:"Traffic Stop"},{value:"protective orders",label:"Protective Orders"},{value:"fair trial",label:"Fair Trial"},{value:"freedom of expression",label:"Freedom of Expression"},{value:"legal aid access",label:"Legal Aid Access"},{value:"complaint filing",label:"Complaint Filing"},{value:"labor rights",label:"Labor Rights"},{value:"consumer rights",label:"Consumer Rights"},{value:"housing/land rights",label:"Housing/Land Rights"},{value:"health/education",label:"Health/Education"},{value:"Other",label:"Other (type your own)"}],className:"h-11 px-4 text-base rounded-xl leading-tight"}),(!t.value||!["arrest","search","detention","counsel","GBV","minors","privacy","traffic stop","protective orders","fair trial","freedom of expression","legal aid access","complaint filing","labor rights","consumer rights","housing/land rights","health/education"].includes(t.value))&&(0,fi.jsx)("div",{className:"mt-3",children:(0,fi.jsx)(Jo,{placeholder:"Type custom rights scope",value:t.value,onChange:e=>t.onChange(e.target.value),className:"h-11 px-4 text-base rounded-xl"})})]})})]})}})}),(0,fi.jsx)("div",{className:"md:col-span-2",children:(0,fi.jsx)(Qo,{control:t,name:"advice_points",label:"Advice Points",help:"short actionable lines",placeholder:"Enter advice point"})})]})}};function Fl(e){let{type:t}=e;const{control:n}=Pn(),r=Al[t];return r?(0,fi.jsx)(r,{control:n}):(0,fi.jsx)("div",{className:"text-center py-8",children:(0,fi.jsxs)("p",{className:"text-muted-foreground",children:["Unknown entry type: ",t]})})}const Pl=xi("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Tl=xi("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ol=xi("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Il=xi("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Rl=xi("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ml=xi("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ll=xi("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),zl={info:{icon:Il,bgColor:"bg-blue-600",iconColor:"text-blue-600",borderColor:"border-blue-200"},warning:{icon:Rl,bgColor:"bg-amber-600",iconColor:"text-amber-600",borderColor:"border-amber-200"},success:{icon:Ml,bgColor:"bg-green-600",iconColor:"text-green-600",borderColor:"border-green-200"},error:{icon:Ll,bgColor:"bg-red-600",iconColor:"text-red-600",borderColor:"border-red-200"}},Bl={"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2"},Vl=e=>{let{isOpen:t,onClose:n,title:a,children:s,type:i="info",position:o="top-right",duration:l=0,className:c=""}=e;const u=zl[i],d=u.icon,[f,p]=r.useState(100);if(r.useEffect(()=>{if(l>0&&t){const e=setTimeout(()=>{n()},l),t=setInterval(()=>{p(e=>{const t=e-100/(l/100);return t<=0?0:t})},100);return()=>{clearTimeout(e),clearInterval(t)}}p(100)},[l,t,n]),r.useEffect(()=>{const e=e=>{"Escape"===e.key&&t&&n()};if(t)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,n]),!t)return null;return(0,fi.jsx)("div",{className:"fixed ".concat(Bl[o]," z-50 ").concat(c),role:"alert","aria-live":"polite","aria-atomic":"true",children:(0,fi.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-2xl rounded-xl border border-gray-200 dark:border-gray-600 min-w-[400px] max-w-[560px] overflow-hidden toast-container ".concat((()=>{switch(o){case"top-left":return"toast-enter-left";case"top-center":return"toast-enter-center";default:return"toast-enter"}})()),children:[(0,fi.jsxs)("div",{className:"bg-gradient-to-r ".concat(u.bgColor," to-red-600 px-6 py-4 relative"),children:[(0,fi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,fi.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,fi.jsx)(d,{className:"w-5 h-5 text-white pl-1"}),(0,fi.jsx)("h3",{className:"text-lg font-semibold text-white",children:a})]}),(0,fi.jsx)("button",{className:"toast-close text-white/80 hover:text-white flex items-center justify-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/30 -mr-3",onClick:n,title:"Dismiss notification","aria-label":"Dismiss notification",children:(0,fi.jsx)(Ol,{className:"w-5 h-5"})})]}),l>0&&(0,fi.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white/20",children:(0,fi.jsx)("div",{className:"h-full bg-white/60 transition-all duration-100 ease-linear",style:{width:"".concat(f,"%")}})})]}),(0,fi.jsx)("div",{className:"p-0 bg-white dark:bg-gray-800",children:s})]})})},Ul=e=>{let{isOpen:t,onClose:n,matches:r,maxDisplay:a=5,onViewAll:s}=e;try{"1"!==localStorage.getItem("kb_debug")&&"1"!==sessionStorage.getItem("kb_debug")||console.log("\ud83d\udd04 DuplicateMatchesToast rendered with NEW design!",{matches:r.length,isOpen:t})}catch(l){}Math.min(r.length,a);const i=r.length>a,o=1===r.length?"Possible match":"Possible matches (".concat(r.length,")");return(0,fi.jsxs)(Vl,{isOpen:t,onClose:n,title:o,type:"warning",position:"top-right",children:[(0,fi.jsx)("div",{className:"duplicate-matches-content",children:r.slice(0,a).map((e,t)=>(0,fi.jsxs)("div",{className:"duplicate-match-item",children:[(0,fi.jsx)("div",{className:"duplicate-match-title",children:e.title}),e.canonical_citation&&(0,fi.jsx)("div",{className:"duplicate-match-citation",children:e.canonical_citation})]},"".concat(e.entry_id||t,"-").concat(t)))}),i&&s&&(0,fi.jsx)("div",{className:"duplicate-matches-footer",children:(0,fi.jsxs)("button",{onClick:s,className:"duplicate-matches-view-all","aria-label":"View all ".concat(r.length," matches"),children:["View all ",r.length," matches \u2192"]})})]})},Wl=(0,r.forwardRef)((e,t)=>{let{name:n,control:a,register:s,existingEntries:i=[],getValues:o,defaultTab:l,onActivate:u}=e;const{fields:d,append:f,remove:p,update:m}=Ir({name:n,control:a}),[h,g]=(0,r.useState)(null!==l&&void 0!==l?l:"internal"),[y,v]=(0,r.useState)(""),b=Bn({control:a,name:n})||[],[x,_]=(0,r.useState)(null),w=(0,r.useMemo)(()=>(b||[]).filter(e=>e&&"external"!==e.type).length,[b]),k=(0,r.useMemo)(()=>(b||[]).filter(e=>e&&"external"===e.type).length,[b]),[j,N]=(0,r.useState)({open:!1,index:null,matches:[]}),[S,C]=(0,r.useState)({}),D=(0,r.useRef)(new Set),E=(0,r.useRef)({}),A=(0,r.useRef)(new Map),[F,P]=(0,r.useState)(0===w),[T,O]=(0,r.useState)(!1);(0,r.useEffect)(()=>{0===w?(P(!0),O(!1)):(P(!1),O(!0))},[w]),(0,r.useEffect)(()=>{let e=!1;return(async()=>{try{const t=await Ft();if(!e&&Array.isArray(t)&&t.length){const e=t.map(e=>({id:e.id,entry_id:e.entry_id,title:e.title||"",type:e.type,canonical_citation:e.canonical_citation||""}));_(e)}}catch(t){}})(),()=>{e=!0}},[]);const I=e=>String(e||"").toLowerCase().replace(/\b(rule|roc)\s*(\d+)\b/g,"rule $2").replace(/\b(section|sec\.?)\s*(\d+)\b/g,"section $2").replace(/\b(article|art\.?)\s*(\d+)\b/g,"article $2").replace(/\b(republic act|ra)\s*(\d+)\b/g,"republic act $2").replace(/\b(presidential decree|pd)\s*(\d+)\b/g,"presidential decree $2").replace(/\b(executive order|eo)\s*(\d+)\b/g,"executive order $2").replace(/\b(memorandum circular|mc)\s*(\d+)\b/g,"memorandum circular $2").replace(/\b(department order|do)\s*(\d+)\b/g,"department order $2").replace(/\b(administrative order|ao)\s*(\d+)\b/g,"administrative order $2").replace(/\b(commonwealth act|ca)\s*(\d+)\b/g,"commonwealth act $2").replace(/\b(batas pambansa|bp)\s*(\d+)\b/g,"batas pambansa $2").replace(/\b(physical\s+)?injuries?\b/g,"injuries").replace(/\b(slight\s+)?injuries?\b/g,"slight injuries").replace(/\b(serious\s+)?injuries?\b/g,"serious injuries").replace(/\b(less\s+serious\s+)?injuries?\b/g,"less serious injuries").replace(/\b(grave\s+)?injuries?\b/g,"grave injuries").replace(/\b(homicide|murder)\b/g,"homicide").replace(/\b(theft|robbery)\b/g,"theft").replace(/\b(assault|battery)\b/g,"assault").replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),R=e=>I(e).split(" ").filter(e=>e.length>0),M=e=>{const t=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"];let r="";for(let a=0;a<t.length;a++)for(;e>=t[a];)r+=n[a],e-=t[a];return r},L=e=>{const t=new Set([e]);e.endsWith("s")&&e.length>3?t.add(e.slice(0,-1)):t.add(e+"s");const n=e.match(/^([IVXLC]+)$/i);if(n){const e=(e=>{const t={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3,i:1,v:5,x:10,l:50,c:100,d:500,m:1e3};let n=0;for(let r=0;r<e.length;r++){const a=t[e[r]],s=t[e[r+1]];s&&a<s?n-=a:n+=a}return n})(n[1].toUpperCase());e>0&&e<=100&&(t.add(e.toString()),t.add(M(e)))}const r=e.match(/^(\d+)$/);if(r){const e=parseInt(r[1]);e>0&&e<=100&&t.add(M(e))}const a={right:["rights"],rights:["right"],information:["info"],info:["information"],section:["sec","sections"],sec:["section","sections"],sections:["section","sec"],article:["art","articles"],art:["article","articles"],articles:["article","art"],constitution:["const","constitutional"],const:["constitution","constitutional"],family:["families"],families:["family"],law:["laws"],laws:["law"],criminal:["criminals"],criminals:["criminal"],prosecution:["prosecutions"],prosecutions:["prosecution"],accused:["accuseds"],accuseds:["accused"],protection:["protections"],protections:["protection"],child:["children"],children:["child"],abuse:["abuses"],abuses:["abuse"],sexual:["sexuals"],sexuals:["sexual"],prostitution:["prostitutions"],prostitutions:["prostitution"],environmental:["environment"],environment:["environmental"],police:["policing"],policing:["police"],mandate:["mandates"],mandates:["mandate"],anti:["against"],against:["anti"],dumping:["dumps"],dumps:["dumping"],measure:["measures"],measures:["measure"],ordinance:["ordinances"],ordinances:["ordinance"],city:["cities"],cities:["city"],manila:["manila"],philippines:["philippine"],philippine:["philippines"],amendment:["amend","amendments"],amend:["amendment","amendments"],amendments:["amendment","amend"],lwa:["law"],familes:["families"],constutition:["constitution"],crimnal:["criminal"],procecution:["prosecution"],acused:["accused"],protetion:["protection"],enviornmental:["environmental"],ordiance:["ordinance"],phillipines:["philippines"]};return a[e]&&a[e].forEach(e=>t.add(e)),Array.from(t)},z=(e,t)=>{const n=e.length,r=t.length,a=Array.from({length:n+1},()=>new Array(r+1).fill(0));for(let s=0;s<=n;s++)a[s][0]=s;for(let s=0;s<=r;s++)a[0][s]=s;for(let s=1;s<=n;s++)for(let n=1;n<=r;n++){const r=e[s-1]===t[n-1]?0:1;a[s][n]=Math.min(a[s-1][n]+1,a[s][n-1]+1,a[s-1][n-1]+r)}return a[n][r]},B=(e,t)=>{const n=e,r=Array.isArray(n.tags)?n.tags.join(" "):"",a=n.law_family||"",s=n.canonical_citation||"",i=[{text:e.title,weight:10},{text:e.entry_id,weight:8},{text:a,weight:6},{text:s,weight:6},{text:r,weight:5},{text:n.summary,weight:4},{text:n.text,weight:2},{text:n.section_id,weight:3},{text:n.type,weight:2}];let o=0,l=0;const c=I(y);for(const u of t){const e=L(u);let t=!1,n=0;for(const{text:r,weight:a}of i){if(!r)continue;const s=I(r);if(s===c)n=Math.max(n,3*a),t=!0;else if(s.startsWith(c))n=Math.max(n,2*a),t=!0;else if(s.includes(c))n=Math.max(n,a),t=!0;else for(const r of e){if(s===r)n=Math.max(n,2*a),t=!0;else if(s.startsWith(r))n=Math.max(n,1.5*a),t=!0;else if(s.includes(r))n=Math.max(n,a),t=!0;else{const e=s.split(" ");for(const s of e){if(z(r,s)<=(r.length<=5?1:2)){n=Math.max(n,.5*a),t=!0;break}}}if(t)break}if(t)break}t&&(o+=n,l++)}return l===t.length?o:0},V=(0,r.useMemo)(()=>{const e=(y||"").trim();if(!e)return[];const t=R(e);if(0===t.length)return[];const n=(x&&x.length?x:i).map(e=>({entry:e,score:B(e,t)})).filter(e=>e.score>0).sort((e,t)=>t.score-e.score).slice(0,8);return n.map(e=>e.entry)},[i,x,y]),U=async e=>{const t=(e=>{const t=(null===e||void 0===e?void 0:e.citation)||"",n=(null===e||void 0===e?void 0:e.title)||"",r=(null===e||void 0===e?void 0:e.url)||"",a=[];return t&&a.push(t),n&&a.push(n),r&&a.push(r),a.join(" ").slice(0,400)})(e).trim();if(!t)return[];const n="".concat((null===e||void 0===e?void 0:e.citation)||"","-").concat((null===e||void 0===e?void 0:e.title)||"","-").concat((null===e||void 0===e?void 0:e.url)||"").toLowerCase();if(A.current.has(n))return A.current.get(n);const r=R(t);if(0===r.length)return[];const a=x&&x.length?x:i,s=I(String((null===e||void 0===e?void 0:e.citation)||"")),o=I(String((null===e||void 0===e?void 0:e.title)||"")),[l,c,u]=await Promise.all([Promise.resolve((()=>{const e=[];let t=0;for(const n of a){const a=B(n,r),i=I(n.title||""),l=I(n.canonical_citation||"");let c=0;if(s&&(l===s&&(c+=2e3),i===s&&(c+=1500),l.startsWith(s)&&(c+=1e3),i.startsWith(s)&&(c+=800),l.includes(s)&&(c+=600),i.includes(s)&&(c+=400)),o&&(i===o&&(c+=1e3),l===o&&(c+=800),i.startsWith(o)&&(c+=500),l.startsWith(o)&&(c+=400),i.includes(o)&&(c+=300),l.includes(o)&&(c+=200),o.length>5)){const e=o.split(" ").filter(e=>e.length>3),t=i.split(" ").filter(e=>e.length>3);let n=0,r=0;for(const a of e){const e=t.find(e=>e===a||e.startsWith(a)||a.startsWith(e)||e.includes(a)||a.includes(e));e&&(n++,(e===a||e.startsWith(a)||a.startsWith(e))&&r++)}if(n>0){const t=n/e.length;let a=15*n;r/e.length>=.5&&(a*=1.5),t>=.6?a*=1.3:t>=.4&&(a*=1.1),c+=a}}s&&o&&(l===s&&i===o?c+=5e3:(l.includes(s)||s.includes(l))&&(i.includes(o)||o.includes(i))&&(c+=3e3));const u=a+c;if(u>=10&&(e.push({entry:n,score:u}),u>=1e3&&(t++,t>=2)))break}return e})()),(async()=>{try{const e=await Mt({query:t,limit:8,explain:!1}),n=Array.isArray(e.results)?e.results:[],r=e=>I(String(e||"")),a=n.map(e=>{const t=r(e.title),n=r(e.canonical_citation),a=Array.isArray(e.matched_fields)?e.matched_fields:[],i=100*Number(e.rank_score||0);let l=0;return Number(e.exact_pin||0)>0&&(l+=1200),a.includes("canonical_citation")&&(l+=250),a.includes("title")&&(l+=200),s&&(n===s?l+=1500:n.startsWith(s)?l+=700:n.includes(s)&&(l+=350)),o&&(t===o?l+=900:t.startsWith(o)?l+=450:t.includes(o)&&(l+=250)),!0===e.verified&&(l+=40),"active"===String(e.status||"").toLowerCase()&&(l+=30),{entry:e,score:i+l}});return a.filter(e=>e.score>=60)}catch(e){return[]}})(),(async()=>{try{const e=s||o;if(!e)return[];const t=await Nt(e,2);return null!==t&&void 0!==t&&t.success&&Array.isArray(t.results)?t.results.map(e=>{let t=100*Number(e.similarity||e.score||0);const n=I(e.title||""),r=I(e.canonical_citation||"");return!s||r!==s&&n!==s?!o||n!==o&&r!==o?t*=.5:t+=20:t+=25,{entry:e,score:t}}):[]}catch(e){return[]}})()]),d={};for(const i of l){const e=i.entry.entry_id||i.entry.id||i.entry.title,t=d[e]||{entry:i.entry,local:0,semantic:0};d[e]={entry:i.entry,local:Math.max(t.local,i.score),semantic:t.semantic}}for(const i of c){const e=i.entry.entry_id||i.entry.id||i.entry.title,t=d[e]||{entry:i.entry,local:0,semantic:0};d[e]={entry:i.entry,local:t.local,semantic:Math.max(t.semantic,i.score)}}for(const i of u){const e=i.entry.entry_id||i.entry.id||i.entry.title,t=d[e]||{entry:i.entry,local:0,semantic:0};d[e]={entry:i.entry,local:t.local,semantic:Math.max(t.semantic,i.score)}}const f=Object.values(d).filter(e=>{const t=e.local>=10,n=e.semantic>=50;return t||n&&e.local>=8}).sort((e,t)=>{const n=2*e.local+1.25*e.semantic;return 2*t.local+1.25*t.semantic-n}).slice(0,3).map(e=>e.entry);if(A.current.size>50){const e=A.current.keys().next().value;e&&A.current.delete(e)}return A.current.set(n,f),f.length>0?console.log('\ud83d\udd0d Search for "'.concat(t,'" found ').concat(f.length," matches:"),f.map(e=>{var t,n;const r=e.entry_id||e.id||e.title,a=(null===(t=d[r])||void 0===t?void 0:t.local)||0,s=(null===(n=d[r])||void 0===n?void 0:n.semantic)||0;return{title:e.title,citation:e.canonical_citation,localScore:a,semanticScore:s,totalScore:a+s,entryId:r}})):console.log('\ud83d\udd0d No matches found for "'.concat(t,'" - exactCitation: "').concat(s,'", exactTitle: "').concat(o,'"')),f},W=(0,r.useCallback)(async e=>{const t=null===b||void 0===b?void 0:b[e];if(!t||"external"!==t.type)return;if(D.current.has(e))return;const n=await U(t);if(console.log('\ud83d\udd0d External citation matching for "'.concat(t.title||t.citation,'":'),{external:t,matches:n.length,matchDetails:n.map(e=>({title:e.title,entry_id:e.entry_id,citation:e.canonical_citation}))}),C(t=>c(c({},t),{},{[e]:n})),n.length>0){console.log("\ud83d\udd0d Setting _hasInternalSuggestion=true for external citation at index ".concat(e,":"),t.title||t.citation),m(e,c(c({},t),{},{_hasInternalSuggestion:!0}));try{sessionStorage.setItem("hasInternalSuggestion","true")}catch(r){}}else console.log("\ud83d\udd0d Setting _hasInternalSuggestion=false for external citation at index ".concat(e,":"),t.title||t.citation),m(e,c(c({},t),{},{_hasInternalSuggestion:!1}))},[b,m]),q=(0,r.useCallback)(e=>{const t=E.current[e];t&&window.clearTimeout(t);const n=window.setTimeout(()=>W(e),300);E.current[e]=n},[W]);(0,r.useEffect)(()=>{if(!x||0===x.length)return;const e=b.filter((e,t)=>e&&"external"===e.type&&(e.citation||e.title||e.url)&&!S[t]);e.length>0&&(console.log("\ud83d\udd0d Auto-detecting internal citations for ".concat(e.length," external citations after import/load")),console.log("\ud83d\udd0d Current inlineMatches keys:",Object.keys(S)),e.forEach((e,t)=>{const n=b.findIndex(t=>t===e);-1!==n&&q(n)}))},[x]);const H=(0,r.useRef)(0);(0,r.useEffect)(()=>{if(!x||0===x.length)return;const e=b.length,t=H.current;if(e>t)for(let n=t;n<e;n++){const e=b[n];e&&"external"===e.type&&e.citation&&e.title&&!S[n]&&!D.current.has(n)&&(console.log("\ud83d\udd0d Auto-detecting for new external citation at index ".concat(n,":"),e.title),q(n))}H.current=e},[b.length,x,q]),(0,r.useEffect)(()=>{if(x&&x.length>0)try{const e=localStorage.getItem("kb_inline_matches_".concat(n));if(e){const t=JSON.parse(e);console.log("\ud83d\udd0d Loading saved matches from localStorage:",Object.keys(t).length);const r={};Object.entries(t).forEach(e=>{let[t,a]=e;const s=parseInt(t),i="kb_dismissed_".concat(n,"_").concat(s);!("true"===localStorage.getItem(i))&&Array.isArray(a)&&a.length>0&&(r[s]=a)}),console.log("\ud83d\udd0d Filtered matches after checking dismissals:",Object.keys(r).length),C(r)}}catch(e){console.warn("Failed to load inline matches from localStorage:",e)}},[x,n]),(0,r.useEffect)(()=>{try{localStorage.setItem("kb_inline_matches_".concat(n),JSON.stringify(S))}catch(e){console.warn("Failed to save inline matches to localStorage:",e)}},[S,n]);const $=(0,r.useCallback)(async()=>{console.log("\ud83d\udd0d MANUAL SCAN BUTTON CLICKED - clearing existing matches and re-scanning..."),console.log("\ud83d\udd0d allEntries:",(null===x||void 0===x?void 0:x.length)||0),console.log("\ud83d\udd0d existingEntries:",(null===i||void 0===i?void 0:i.length)||0),C({}),console.log("\ud83d\udd0d Cleared all existing matches for fresh scan"),A.current.clear(),console.log("\ud83d\udd0d Cleared search cache for fresh results"),console.log("\ud83d\udd0d Keeping dismissals persistent - not clearing them on manual scan"),console.log("\ud83d\udd0d Refreshing entries from database to ensure latest KB data...");try{const e=await Ft();if(!Array.isArray(e)||!e.length)return void console.log("\ud83d\udd0d No entries found in database");{const t=e.map(e=>({id:e.id,entry_id:e.entry_id,title:e.title||"",type:e.type,canonical_citation:e.canonical_citation||""}));_(t),console.log("\ud83d\udd0d Successfully loaded ALL entries from KB:",t.length),console.log("\ud83d\udd0d This includes entries from ALL users in the knowledge base")}}catch(t){return void console.error("\ud83d\udd0d Error loading entries:",t)}const e=b.filter((e,t)=>e&&"external"===e.type&&(e.citation||e.title||e.url));console.log("\ud83d\udd0d Found ".concat(e.length," external citations to scan:"),e.map(e=>({citation:e.citation,title:e.title,url:e.url})));for(let r=0;r<e.length;r++){const a=e[r],s=b.findIndex(e=>e===a);if(-1!==s){console.log("\ud83d\udd0d Scanning citation ".concat(r+1,"/").concat(e.length,":"),{citation:a.citation,title:a.title,url:a.url,note:a.note,actualIndex:s});try{const e=await U(a);console.log("\ud83d\udd0d Found ".concat(e.length,' matches for "').concat(a.title||a.citation,'":'),e.map(e=>({title:e.title,citation:e.canonical_citation,entry_id:e.entry_id,type:e.type}))),console.log('\ud83d\udd0d SEARCH QUERY DEBUG for "'.concat(a.title||a.citation,'":'),{originalCitation:a.citation,originalTitle:a.title,searchQuery:"".concat(a.citation," ").concat(a.title).trim(),matchesFound:e.length,matchTitles:e.map(e=>e.title),matchCitations:e.map(e=>e.canonical_citation),matchEntryIds:e.map(e=>e.entry_id)}),e.length>0&&console.log('\ud83d\udd0d MATCH DETAILS for "'.concat(a.title||a.citation,'":'),e.map((e,t)=>({index:t+1,title:e.title,citation:e.canonical_citation,entry_id:e.entry_id,type:e.type})));const t="kb_dismissed_".concat(n,"_").concat(s),r="true"===localStorage.getItem(t);!r&&e.length>0?C(t=>c(c({},t),{},{[s]:e})):r&&console.log("\ud83d\udd0d Skipping dismissed citation at index ".concat(s)),e.length>0?console.log('\ud83d\udd0d YELLOW BUTTONS SHOULD APPEAR for "'.concat(a.title||a.citation,'" - found ').concat(e.length," matches:"),e.map(e=>({title:e.title,citation:e.canonical_citation,entry_id:e.entry_id}))):console.log('\ud83d\udd0d NO YELLOW BUTTONS for "'.concat(a.title||a.citation,'" - no matches found')),await new Promise(e=>setTimeout(e,100))}catch(t){console.error('\ud83d\udd0d Error scanning citation "'.concat(a.title||a.citation,'":'),t)}}}console.log("\ud83d\udd0d Manual scan completed for all external citations")},[x,i,b,U]);(0,r.useImperativeHandle)(t,()=>({scanAllExternalCitations:$}),[$]);const Z=async(e,t)=>{try{const n=await Pt(t.entry_id),r=Array.isArray(null===n||void 0===n?void 0:n.source_urls)&&n.source_urls.length>0?n.source_urls[0]:"",a={type:"internal",entry_id:t.entry_id,url:r||"",title:(null===n||void 0===n?void 0:n.title)||t.title,note:(null===n||void 0===n?void 0:n.summary)||""};m(e,a),setTimeout(()=>{try{if(o){const e=o();localStorage.setItem("kb_entry_draft",JSON.stringify(e)),console.log("\ud83d\udcbe Manually saved form data after external->internal conversion")}}catch(e){console.warn("Failed to manually save form data after conversion:",e)}},100)}finally{N({open:!1,index:null,matches:[]})}};return(0,fi.jsxs)(fi.Fragment,{children:[(0,fi.jsxs)("div",{className:"space-y-4",children:[(0,fi.jsxs)("div",{className:"flex gap-3 kb-toggle-row",children:[(0,fi.jsx)(Ho,{type:"button",variant:"internal"===h?"default":"outline",onClick:()=>{g("internal"),null===u||void 0===u||u()},className:"h-11 px-7 rounded-xl min-w-[120px] ".concat("internal"===h?"":"kb-btn-outline"),children:"Internal"}),(0,fi.jsx)(Ho,{type:"button",variant:"external"===h?"default":"outline",onClick:()=>{g("external"),null===u||void 0===u||u()},className:"h-11 px-7 rounded-xl min-w-[120px] ".concat("external"===h?"":"kb-btn-outline"),children:"External"})]}),"internal"===h?(0,fi.jsxs)("div",{className:"space-y-4",children:[d.map((e,t)=>{var r,a;if("external"===(null===b||void 0===b||null===(r=b[t])||void 0===r?void 0:r.type))return null;const i=d.filter((e,t)=>{var n;return"external"!==(null===b||void 0===b||null===(n=b[t])||void 0===n?void 0:n.type)}),o=e.id===(null===(a=i[i.length-1])||void 0===a?void 0:a.id),l=Math.max(1,i.findIndex(t=>t.id===e.id)+1);return(0,fi.jsxs)("div",{className:"space-y-3",children:[(0,fi.jsx)("div",{className:"flex items-center justify-between",children:(0,fi.jsxs)("div",{className:"kb-form-subtitle text-sm font-medium",children:["Internal Citation #",l]})}),(0,fi.jsx)("input",c({type:"hidden",value:"internal"},s("".concat(n,".").concat(t,".type")))),(0,fi.jsxs)("div",{className:"grid gap-3",children:[(0,fi.jsxs)("div",{children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Entry ID (internal)"}),(0,fi.jsx)(Jo,c({className:"kb-form-input",placeholder:"e.g., ROC-113-5 or RPC-308"},s("".concat(n,".").concat(t,".entry_id"),{required:"Entry ID is required"})))]}),(0,fi.jsxs)("div",{children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"URL"}),(0,fi.jsx)(Jo,c({className:"kb-form-input",placeholder:"https://\u2026"},s("".concat(n,".").concat(t,".url"),{required:"URL is required"})))]}),(0,fi.jsxs)("div",{children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Title"}),(0,fi.jsx)(Jo,c({className:"kb-form-input",placeholder:"e.g., Arrest, Search, Bail"},s("".concat(n,".").concat(t,".title"))))]}),(0,fi.jsxs)("div",{children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Note"}),(0,fi.jsx)(Jo,c({className:"kb-form-input",placeholder:"short note or descriptor"},s("".concat(n,".").concat(t,".note"))))]})]}),(0,fi.jsxs)("div",{className:"flex items-center gap-3 mt-2 mb-6",children:[o&&T&&(0,fi.jsxs)(Ho,{type:"button",variant:"success",onClick:()=>{O(!1),P(!0)},className:"h-11 rounded-xl flex-1 mb-2",children:[(0,fi.jsx)(Ko,{className:"h-4 w-4 mr-2"}),"Add internal citation"]}),(0,fi.jsxs)(Ho,{type:"button",variant:"delete",onClick:()=>p(t),className:"h-11 rounded-xl ".concat("flex-1 mb-2"),children:[(0,fi.jsx)(Yo,{className:"h-4 w-4"}),(0,fi.jsx)("span",{className:"ml-2",children:"Delete"})]})]})]},e.id)}),F&&(0,fi.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,fi.jsxs)("div",{className:"flex gap-3",children:[(0,fi.jsxs)("div",{className:"relative flex-1",children:[(0,fi.jsx)(Pl,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,fi.jsx)(Jo,{className:"kb-form-input kb-input-search",placeholder:"Search by entry_id or title\u2026",value:y,onChange:e=>v(e.target.value)})]}),w>0&&(0,fi.jsx)(Ho,{type:"button",variant:"outline",onClick:()=>{P(!1),O(!0),v("")},className:"h-11 w-11 rounded-xl p-0 flex items-center justify-center",children:(0,fi.jsx)(Tl,{className:"h-4 w-4"})})]}),y.trim().length>0&&(0,fi.jsxs)("div",{className:"rounded-xl max-h-56 overflow-auto bg-white shadow-sm border",children:[0===V.length&&(0,fi.jsxs)("div",{className:"p-4 mt-2 text-sm text-muted-foreground text-center",children:['No exact matches for "',y,'"']}),V.map(e=>(0,fi.jsx)("button",{type:"button",className:"w-full text-left p-4 hover:bg-orange-50 active:bg-orange-100 transition-colors border-b last:border-b-0",onClick:async()=>{try{const t=await Pt(e.entry_id),n=Array.isArray(null===t||void 0===t?void 0:t.source_urls)&&t.source_urls.length>0?t.source_urls[0]:"";f({type:"internal",entry_id:e.entry_id,url:n||"",title:(null===t||void 0===t?void 0:t.title)||e.title,note:(null===t||void 0===t?void 0:t.summary)||""})}catch(t){f({type:"internal",entry_id:e.entry_id,url:"",title:e.title,note:""})}v(""),P(!1),O(!0)},children:(0,fi.jsxs)("div",{className:"pl-3",children:[(0,fi.jsx)("div",{className:"font-medium text-sm mb-0.5",children:e.title}),(0,fi.jsx)("div",{className:"text-xs text-muted-foreground mb-0.5",children:e.entry_id}),e.canonical_citation&&(0,fi.jsx)("div",{className:"text-xs text-muted-foreground mb-0.5",children:e.canonical_citation})]})},e.entry_id)),V.length>0&&(0,fi.jsxs)("div",{className:"px-4 py-2 text-xs text-muted-foreground border-t bg-gray-50",children:["Showing ",V.length," entries that might be a match"]})]})]})]}):(0,fi.jsxs)("div",{className:"space-y-4",children:[d.map((e,t)=>{var r,a,i,o,l,u,m,h;if("external"!==(null===b||void 0===b||null===(r=b[t])||void 0===r?void 0:r.type))return null;const g=d.filter((e,t)=>{var n;return"external"===(null===b||void 0===b||null===(n=b[t])||void 0===n?void 0:n.type)}),y=e.id===(null===(a=g[g.length-1])||void 0===a?void 0:a.id),v=Math.max(1,g.findIndex(t=>t.id===e.id)+1);return(0,fi.jsxs)("div",{className:"space-y-3",children:[(0,fi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,fi.jsxs)("div",{className:"kb-form-subtitle text-sm font-medium",children:["External Citation #",v]}),!(null===(i=S[t])||void 0===i||!i.length)&&(0,fi.jsxs)("button",{type:"button",className:"kb-internal-match-btn text-xs rounded-md border border-yellow-400 bg-yellow-100 text-gray-800 dark:bg-yellow-200 dark:text-white px-2 py-1 sm:px-3 sm:py-1.5 hover:bg-yellow-200 hover:border-yellow-500 dark:hover:bg-yellow-300 whitespace-nowrap flex items-center gap-2",onClick:()=>{const e=S[t][0];e&&Z(t,e)},title:"Internal match:\n".concat((null===(o=S[t][0])||void 0===o?void 0:o.title)||(null===(l=S[t][0])||void 0===l?void 0:l.entry_id)||"","\n").concat((null===(u=S[t][0])||void 0===u?void 0:u.canonical_citation)||""),"aria-label":"Convert to internal: ".concat((null===(m=S[t][0])||void 0===m?void 0:m.title)||(null===(h=S[t][0])||void 0===h?void 0:h.entry_id)||""),children:[(0,fi.jsx)("span",{className:"hidden sm:inline",children:"This law might be in the KB. Add as Internal instead?"}),(0,fi.jsx)("span",{className:"sm:hidden",children:"Add as Internal instead?"}),(0,fi.jsx)(Ol,{className:"w-3 h-3 text-yellow-600 dark:text-yellow-600 hover:text-yellow-800 dark:hover:text-yellow-800 transition-colors",onClick:e=>{e.stopPropagation();try{const e="kb_dismissed_".concat(n,"_").concat(t);localStorage.setItem(e,"true")}catch(r){console.warn("Failed to save dismissal to localStorage:",r)}C(e=>{const n=c({},e);return delete n[t],n}),D.current.add(t)}})]})]}),(0,fi.jsx)("input",c({type:"hidden",value:"external"},s("".concat(n,".").concat(t,".type")))),(0,fi.jsxs)("div",{className:"grid gap-3",children:[(0,fi.jsxs)("div",{children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Citation (external)"}),(0,fi.jsx)(Jo,c({className:"kb-form-input",placeholder:"e.g., People v. Doria, G.R. No. \u2026"},s("".concat(n,".").concat(t,".citation"),{required:"Citation is required",onBlur:()=>{W(t)}})))]}),(0,fi.jsxs)("div",{children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"URL"}),(0,fi.jsx)(Jo,c({className:"kb-form-input",placeholder:"https://\u2026"},s("".concat(n,".").concat(t,".url"),{required:"URL is required",onBlur:()=>{W(t)}})))]}),(0,fi.jsxs)("div",{children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Title"}),(0,fi.jsx)(Jo,c({className:"kb-form-input",placeholder:"e.g., Arrest, Search, Bail"},s("".concat(n,".").concat(t,".title"),{onBlur:()=>{W(t)}})))]}),(0,fi.jsxs)("div",{children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Note"}),(0,fi.jsx)(Jo,c({className:"kb-form-input",placeholder:"short note or descriptor"},s("".concat(n,".").concat(t,".note"))))]})]}),(0,fi.jsxs)("div",{className:"flex items-center gap-3 mt-2 mb-6",children:[y&&(0,fi.jsxs)(Ho,{type:"button",variant:"success",onClick:()=>{f({type:"external",citation:"",url:"",title:"",note:""})},className:"h-11 rounded-xl flex-1 mb-2",children:[(0,fi.jsx)(Ko,{className:"h-4 w-4 mr-2"}),"Add external citation"]}),(0,fi.jsxs)(Ho,{type:"button",variant:"delete",onClick:()=>{C(e=>{const n=c({},e);return delete n[t],n}),p(t)},className:"h-11 rounded-xl ".concat(k>1?"flex-1 mb-2":"w-11 mb-2"),children:[(0,fi.jsx)(Yo,{className:"h-4 w-4"}),k>1&&(0,fi.jsx)("span",{className:"ml-2",children:"Delete"})]})]})]},e.id)}),0===k&&(0,fi.jsxs)(Ho,{type:"button",variant:"success",onClick:()=>{f({type:"external",citation:"",url:"",title:"",note:""})},className:"w-full h-11 rounded-xl mt-4",children:[(0,fi.jsx)(Ko,{className:"h-4 w-4 mr-2"}),"Add external citation"]})]})]}),(0,fi.jsx)(Vl,{isOpen:j.open,onClose:()=>N({open:!1,index:null,matches:[]}),title:(()=>{const e=String(n||"").includes("related_sections")?"Detected internal citation for Related Sections":"Detected internal citation for Legal Bases";return j.matches.length>1?"".concat(e," (").concat(j.matches.length,")"):e})(),type:"warning",position:"top-right",children:(0,fi.jsxs)("div",{className:"space-y-3",children:[j.matches.map((e,t)=>(0,fi.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,fi.jsx)("div",{className:"text-sm font-medium",children:e.title}),(0,fi.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.entry_id,e.canonical_citation?" \u2022 ".concat(e.canonical_citation):""]}),(0,fi.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,fi.jsxs)(Ho,{type:"button",variant:"default",onClick:()=>{null!=j.index&&Z(j.index,e)},className:"h-9 inline-flex items-center gap-2 pr-2",children:[(0,fi.jsx)("span",{children:"Add as Internal Instead"}),(0,fi.jsx)("span",{onClick:e=>{e.stopPropagation(),N({open:!1,index:null,matches:[]})},className:"ml-2 pl-2 border-l border-white/30 text-white/90 hover:text-white cursor-pointer","aria-label":"Close",title:"Close",children:(0,fi.jsx)(Ol,{className:"w-3.5 h-3.5"})})]}),(0,fi.jsx)(Ho,{type:"button",variant:"outline",onClick:()=>{N(e=>{const n=e.matches.filter((e,n)=>n!==t);return c(c({},e),{},{matches:n,open:n.length>0})})},className:"h-9",children:"No"})]})]},"".concat(e.entry_id,"-").concat(t))),null!=j.index&&(0,fi.jsx)("div",{className:"pt-2 border-t mt-2",children:(0,fi.jsx)(Ho,{type:"button",variant:"ghost",onClick:()=>{D.current.add(j.index),N({open:!1,index:null,matches:[]})},className:"h-8 text-xs",children:"Don\u2019t suggest again for this citation"})})]})})]})}),ql={constitution_provision:["topics","related_sections","jurisprudence"],statute_section:["elements","penalties","defenses","prescriptive_period","prescriptive_period.value","prescriptive_period.unit","standard_of_proof","related_sections","legal_bases"],city_ordinance_section:["elements","penalties","defenses","related_sections","legal_bases"],rule_of_court:["rule_no","section_no","triggers","time_limits","required_forms","legal_bases","related_sections"],agency_circular:["circular_no","section_no","applicability","legal_bases","supersedes"],doj_issuance:["issuance_no","applicability","legal_bases","supersedes"],executive_issuance:["instrument_no","applicability","legal_bases","supersedes"],rights_advisory:["rights_scope","advice_points","legal_bases","related_sections"]};function Hl(e){let{onNext:t,onPrevious:n,onCancel:a,onSaveDraft:s,isEditing:i,existingEntries:o=[]}=e;const l=Pn(),{control:c,register:u,formState:{errors:d,isValid:f},trigger:p,getValues:m}=l,h=Bn({name:"type",control:c}),g=Bn({name:"legal_bases",control:c})||[],[y,v]=r.useState("legal_bases"),b=(0,r.useRef)(null),x=(0,r.useRef)(null),[_,w]=(0,r.useState)(!1),k="rights_advisory"===h;k&&g.length;const j=r.useMemo(()=>{if(!h)return[];const e=new Set([...ql[h]||[],"legal_bases","related_sections"]);return Array.from(e)},[h]);const[N,S]=r.useState(!1);r.useEffect(()=>{let e=!0;return(async()=>{if(h&&0!==j.length){if(await p(j,{shouldFocus:!1}),e){const e=j.every(e=>!function(e){const t=e.split(".");let n=d;for(const r of t){if(!n)return!1;n=n[r]}return Boolean(n)}(e));S(e)}}else e&&S(!1)})(),()=>{e=!1}},[h,d,j.join("|"),p]);r.useMemo(()=>j.map(e=>{var t;const n=e.split(".");let r=d;for(const s of n){if(!r)break;r=r[s]}const a=null===(t=r)||void 0===t?void 0:t.message;return a?{field:e,message:a}:null}).filter(Boolean),[d,j]);return(0,fi.jsxs)("div",{className:"kb-form-fields",children:[h?(0,fi.jsxs)("div",{className:"space-y-6",children:[(0,fi.jsx)(Fl,{type:h}),(0,fi.jsx)("div",{className:"space-y-4",children:(0,fi.jsxs)("div",{className:"mt-6",children:[(0,fi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,fi.jsx)("h3",{className:"kb-form-section-title kb-title-compact mt-6",children:"Relations"}),k?(0,fi.jsx)("span",{className:"text-xs rounded-md px-2 py-1 bg-red-100 text-red-700 mt-1",children:"Required for Rights Advisory. Add at least one Legal Basis (internal or external)."}):(0,fi.jsx)("span",{className:"text-xs text-muted-foreground mt-1",children:"REQUIRED 3 minimum (helps citations & navigation)"})]}),(0,fi.jsxs)("div",{className:"flex items-center gap-2",style:{marginTop:"4px",marginBottom:"8px"},children:[(0,fi.jsx)("button",{type:"button",onClick:async()=>{w(!0);try{var e,t;null!==(e=b.current)&&void 0!==e&&e.scanAllExternalCitations&&await b.current.scanAllExternalCitations(),null!==(t=x.current)&&void 0!==t&&t.scanAllExternalCitations&&await x.current.scanAllExternalCitations()}finally{w(!1)}},className:"scan-button kb-scan-button-orange",style:{backgroundColor:"#f97316 !important",border:"2px solid #f97316 !important",color:"white !important",padding:"8px 16px !important",borderRadius:"8px !important",fontSize:"14px !important",fontWeight:"500 !important",transition:"all 0.2s ease !important",cursor:"pointer !important",boxShadow:"none !important",outline:"none !important",margin:"0 !important",display:"inline-block !important",textAlign:"center",textDecoration:"none !important",verticalAlign:"middle !important",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},onMouseEnter:e=>{e.currentTarget.style.setProperty("background-color","#ea580c","important"),e.currentTarget.style.setProperty("color","white","important"),e.currentTarget.style.setProperty("border-color","#ea580c","important")},onMouseLeave:e=>{e.currentTarget.style.setProperty("background-color","#f97316","important"),e.currentTarget.style.setProperty("color","white","important"),e.currentTarget.style.setProperty("border-color","#f97316","important")},onMouseDown:e=>{e.currentTarget.style.setProperty("background-color","#c2410c","important"),e.currentTarget.style.setProperty("color","white","important"),e.currentTarget.style.setProperty("border-color","#c2410c","important")},onMouseUp:e=>{e.currentTarget.style.setProperty("background-color","#ea580c","important"),e.currentTarget.style.setProperty("color","white","important"),e.currentTarget.style.setProperty("border-color","#ea580c","important")},children:"Scan for Internal Citations"}),(0,fi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,fi.jsx)("div",{className:"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin",style:{display:_?"block":"none"}}),(0,fi.jsx)("span",{className:"text-sm text-orange-500",style:{display:_?"block":"none"},children:"Scanning..."})]})]})]})}),(0,fi.jsxs)("div",{className:"relations-wrapper",children:[(0,fi.jsx)("div",{className:"relations-highlight-layer ".concat("related_sections"===y?"to-right":"to-left")}),(0,fi.jsxs)("div",{className:"relations-cols grid grid-cols-1 md:grid-cols-2 gap-5 md:gap-6",children:[(0,fi.jsxs)("div",{className:"space-y-3",style:{marginTop:"4px"},children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Legal Bases"}),(0,fi.jsx)(Wl,{ref:b,name:"legal_bases",control:c,register:u,existingEntries:o,getValues:m,defaultTab:"external",onActivate:()=>v("legal_bases")})]}),(0,fi.jsxs)("div",{className:"space-y-3",style:{marginTop:"4px"},children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Related Sections"}),(0,fi.jsx)(Wl,{ref:x,name:"related_sections",control:c,register:u,existingEntries:o,getValues:m,defaultTab:"external",onActivate:()=>v("related_sections")})]})]})]})]}):(0,fi.jsx)("div",{className:"text-center py-8",children:(0,fi.jsx)("p",{className:"kb-form-helper",children:"Please select an entry type in the Basic Information step first."})}),(0,fi.jsxs)("div",{className:"kb-action-bar",children:[(0,fi.jsx)("div",{className:"flex gap-3",children:(0,fi.jsx)(Ho,{type:"button",variant:"outline",onClick:a,className:"h-12 px-10 min-w-[130px]",children:"Cancel"})}),(0,fi.jsxs)("div",{className:"flex gap-3",children:[(0,fi.jsx)(Ho,{type:"button",variant:"outline",onClick:n,className:"h-12 px-10 min-w-[130px] kb-prev-btn",children:"Previous"}),(0,fi.jsxs)(Ho,{type:"button",onClick:t,variant:"default",className:"flex items-center gap-3 px-12 min-w-[140px] py-3 h-12 text-white",children:["Next",(0,fi.jsx)($o,{className:"h-4 w-4"})]})]})]})]})}const $l=["className"],Zl=r.forwardRef((e,t)=>{let{className:n}=e,r=u(e,$l);return(0,fi.jsx)("textarea",c({className:Mo("flex min-h-[80px] w-full rounded-xl border border-input bg-background px-4 py-3 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t},r))});Zl.displayName="Textarea";const Jl=e=>{let{isOpen:t,onClose:n,title:r,subtitle:a,children:s}=e;return t?(0,fi.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,fi.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[r&&(0,fi.jsx)("h2",{className:"modal-title",children:r}),a&&(0,fi.jsx)("p",{className:"modal-subtitle",children:a}),(0,fi.jsx)("div",{className:"modal-body",children:s})]})}):null},Yl=xi("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function Kl(e,t,n){const r=new Date,a=r.getFullYear(),s=r.getTime().toString().slice(-6),i=Math.floor(9999*Math.random()).toString().padStart(4,"0");switch(e){case"statute_section":if(t.includes("RPC")||t.includes("Revised Penal Code"))return"RPC-".concat(n||"Art","-").concat(s);if(t.includes("RA")){const e=t.match(/RA\s*(\d+)/i),r=e?e[1]:"0000";return"RA".concat(r,"-").concat(n||"Sec","-").concat(s)}return"".concat(t.replace(/\s+/g,""),"-").concat(n||"Sec","-").concat(s);case"rule_of_court":if(n){const e=n.match(/Rule\s*(\d+)/i),t=n.match(/Sec\.\s*(\d+)/i);if(e&&t)return"ROC-Rule".concat(e[1],"-Sec").concat(t[1],"-").concat(s)}return"ROC-".concat(n||"Rule","-").concat(s);case"city_ordinance_section":if(t.includes("Cebu")){const e=t.match(/Ord\.\s*(\d+)/i),r=e?e[1]:"0000";return"CEBU-CO".concat(r,"-").concat(n||"Sec","-").concat(s)}return"".concat(t.replace(/\s+/g,""),"-").concat(n||"Sec","-").concat(s);case"pnp_sop":return"PNP-SOP-".concat(t.replace(/\s+/g,""),"-").concat(a,"-").concat(i);case"incident_checklist":const r=t.split(" ")[0].toUpperCase();return"INC-".concat(r,"-").concat(i);case"agency_circular":return"".concat(t.replace(/\s+/g,""),"-Circular-").concat(a,"-").concat(i);case"doj_issuance":return"DOJ-".concat(t.replace(/\s+/g,""),"-").concat(a,"-").concat(i);case"executive_issuance":return"EO-".concat(t.replace(/\s+/g,""),"-").concat(a,"-").concat(i);case"rights_advisory":return"RIGHTS-".concat(t.replace(/\s+/g,""),"-").concat(a,"-").concat(i);case"constitution_provision":return"CONST-".concat(t.replace(/\s+/g,""),"-").concat(n||"Art","-").concat(s);default:return"".concat(e.toUpperCase(),"-").concat(t.replace(/\s+/g,""),"-").concat(n||"Sec","-").concat(s)}}const Ql=(0,r.createContext)(void 0),Gl=()=>{const e=(0,r.useContext)(Ql);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Xl=e=>{let{children:t}=e;const[n,a]=(0,r.useState)({id:1,name:"User",personId:"P1",username:"user",role:"user"}),[s,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1),c={user:n,token:s,login:(e,t)=>{i(e),a(t),localStorage.setItem("auth_token",e),localStorage.setItem("user_info",JSON.stringify(t))},logout:()=>{i(null),a(null),(()=>{try{["auth_token","user_info","app_theme","kb_entry_draft","kb_draft","kb_drafts","law_entries","villy_chat_history","team_progress","daily_quotas"].forEach(e=>{try{localStorage.removeItem(e)}catch(t){console.warn("Failed to remove localStorage key: ".concat(e),t)}});const t=["kb_","law_","team_","daily_","progress_","quota_","draft_","entry_"];for(let r=localStorage.length-1;r>=0;r--){const n=localStorage.key(r);if(n&&t.some(e=>n.startsWith(e)))try{localStorage.removeItem(n)}catch(e){console.warn("Failed to remove localStorage key: ".concat(n),e)}}["cameFromDashboard","importedEntryData","entryCreated","entryJustCreated","incompleteEntries","yesterdayMode","yesterdayQuotas"].forEach(t=>{try{sessionStorage.removeItem(t)}catch(e){console.warn("Failed to remove sessionStorage key: ".concat(t),e)}});const n=["imported_","entry_","incomplete_","yesterday_","cameFrom_"];for(let r=sessionStorage.length-1;r>=0;r--){const t=sessionStorage.key(r);if(t&&n.some(e=>t.startsWith(e)))try{sessionStorage.removeItem(t)}catch(e){console.warn("Failed to remove sessionStorage key: ".concat(t),e)}}console.log("\u2705 All user data cleared from localStorage and sessionStorage")}catch(e){console.error("\u274c Error clearing user data:",e)}})()},isLoading:o};return(0,fi.jsx)(Ql.Provider,{value:c,children:t})},ec=["entry_id"],tc=["topic"],nc=["entry_id"],rc=["topic"],ac=["entry_id"],sc=["topic"];const ic=[{id:1,name:"Basics",description:"Basic information"},{id:2,name:"Sources & Dates",description:"Citations and effective dates"},{id:3,name:"Content",description:"Summary and legal text"},{id:4,name:"Type-Specific & Relations",description:"Fields based on entry type"},{id:5,name:"Review & Publish",description:"Final check before saving"}];function oc(e){let{entry:t,existingEntries:n=[],onSave:a,onCancel:s,onShowIncompleteEntriesModal:i,isUpdatingEntry:o=!1}=e;const l=function(){try{"undefined"!==typeof window&&("1"===localStorage.getItem("kb_debug")||"1"===sessionStorage.getItem("kb_debug"))&&console.log(...arguments)}catch(e){}},{user:d}=Gl(),f=window.location.pathname.startsWith("/law-entry/"),p=null!==sessionStorage.getItem("importedEntryData"),m=t&&t.entry_id&&!t.id&&p||t&&f,h=!!t&&!m&&!f,g=!t||m||f;const y=he(),{step:v}=ge(),b=(()=>{if(f&&v)return parseInt(v);if(!f){const e=new URLSearchParams(window.location.search).get("step");if(e)return parseInt(e)}return 1})(),x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=r.useRef(void 0),n=r.useRef(void 0),[a,s]=r.useState({isDirty:!1,isValidating:!1,isLoading:Yn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Yn(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current=c(c({},e.formControl),{},{formState:a}),e.defaultValues&&!Yn(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const n=jr(e),{formControl:r}=n,s=u(n,Gt);t.current=c(c({},s),{},{formState:a})}const i=t.current.control;return i._options=e,In(()=>{const e=i._subscribe({formState:i._proxyFormState,callback:()=>s(c({},i._formState)),reRenderRoot:!0});return s(e=>c(c({},e),{},{isReady:!0})),i._formState.isReady=!0,e},[i]),r.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),r.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),r.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),r.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),r.useEffect(()=>{if(i._proxyFormState.isDirty){const e=i._getDirty();e!==a.isDirty&&i._subjects.state.next({isDirty:e})}},[i,a.isDirty]),r.useEffect(()=>{e.values&&!zn(e.values,n.current)?(i._reset(e.values,c({keepFieldsRef:!0},i._options.resetOptions)),n.current=e.values,s(e=>c({},e))):i._resetDefaultValues()},[i,e.values]),r.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next(c({},i._formState))),i._removeUnmounted()}),t.current.formState=On(a,i),t.current}({resolver:aa(di),defaultValues:{type:"",entry_id:"",title:"",jurisdiction:"PH",law_family:"",section_id:"",canonical_citation:"",status:"",effective_date:(new Date).toISOString().slice(0,10),amendment_date:null,summary:"",text:"",source_urls:[""],tags:[],last_reviewed:(new Date).toISOString().slice(0,10),visibility:{gli:!0,cpa:!0},elements:[],penalties:[],defenses:[],prescriptive_period:null,standard_of_proof:"",rule_no:"",section_no:"",triggers:[],time_limits:[],required_forms:[],circular_no:"",applicability:[],issuance_no:"",instrument_no:"",supersedes:[],steps_brief:[],forms_required:[],failure_states:[],violation_code:"",violation_name:"",license_action:"",fine_schedule:[],apprehension_flow:[],incident:"",phases:[],forms:[],handoff:[],rights_callouts:[],rights_scope:"",advice_points:[],topics:[],jurisprudence:[],legal_bases:[],related_sections:[]},mode:"onChange"}),{control:_,register:w,handleSubmit:k,watch:j,setValue:N,getValues:S,trigger:C}=x,D=j("type"),E=j("status"),A=j("law_family"),F=j("section_id"),P=j("title"),T=j("canonical_citation"),O=j("effective_date"),I=j("entry_id"),[R,M]=(0,r.useState)(D);(0,r.useEffect)(()=>{if(R&&D&&R!==D){console.log("Entry type changed from ".concat(R," to ").concat(D,", clearing type-specific fields"));const e={elements:[],penalties:[],defenses:[],triggers:[],time_limits:[],required_forms:[],applicability:[],supersedes:[],steps_brief:[],forms_required:[],failure_states:[],fine_schedule:[],apprehension_flow:[],phases:[],forms:[],handoff:[],rights_callouts:[],advice_points:[],topics:[],jurisprudence:[],standard_of_proof:"",rule_no:"",section_no:"",circular_no:"",issuance_no:"",instrument_no:"",violation_code:"",violation_name:"",license_action:"",incident:"",rights_scope:"",prescriptive_period:null};Object.entries(e).forEach(e=>{let[t,n]=e;x.setValue(t,n)})}M(D)},[D,R,x]),(0,r.useEffect)(()=>{if(g&&!I&&D&&A){const e=async()=>{try{const e=n.map(e=>e.entry_id),t=await async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=0;for(;a<10;){const s=Kl(e,t,n);if(!r.includes(s))return s;if(a++,a>=10){const e=Math.floor(999999*Math.random()).toString().padStart(6,"0");return"".concat(s,"-").concat(e)}}return Kl(e,t,n)}(D,A,F||"",e);N("entry_id",t)}catch(e){console.error("Error generating unique entry ID:",e);const t=Kl(D,A,F||"");N("entry_id",t)}};e();const t=(new Date).toISOString().slice(0,10);N("last_reviewed",t)}},[g,I,D,A,F,N,n]);const L=!0,z=(0,r.useMemo)(()=>ic,[L]),[B,V]=(0,r.useState)(b),U=r.useRef(null);(0,r.useEffect)(()=>{if(!t)return;const e=new URLSearchParams(window.location.search).get("step");if(e){const t=parseInt(e);t!==B&&t>=1&&t<=5&&V(t)}},[t,B]);const[W,q]=(0,r.useState)(!1),[H,$]=(0,r.useState)(!1),[Z,J]=(0,r.useState)(!1),[Y,K]=(0,r.useState)(""),[Q,G]=(0,r.useState)([]),[X,ee]=(0,r.useState)(!1),[te,ne]=(0,r.useState)(!1),[re,ae]=(0,r.useState)(!1),[se,ie]=(0,r.useState)(!1),[oe,le]=(0,r.useState)(!1),[ce,ue]=(0,r.useState)(!1),de=r.useRef(!1),[fe,pe]=(0,r.useState)(!1),me=e=>{try{const t=localStorage.getItem("kb_deleted_relations"),n=t?JSON.parse(t):[];if(!Array.isArray(n)||0===n.length)return e;const r=new Set,a=new Set;n.filter(Boolean).forEach(e=>{const t=String((null===e||void 0===e?void 0:e.key)||"").toLowerCase(),n=String((null===e||void 0===e?void 0:e.scope)||"").toLowerCase();n.includes("legal_bases")&&r.add(t),n.includes("related_sections")&&a.add(t)});const s=e=>String((null===e||void 0===e?void 0:e.entry_id)||(null===e||void 0===e?void 0:e.citation)||(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.url)||JSON.stringify(e)).toLowerCase(),i=((e.legal_bases||[]).length,(e.related_sections||[]).length,c(c({},e),{},{legal_bases:(e.legal_bases||[]).filter(e=>!r.has(s(e))),related_sections:(e.related_sections||[]).filter(e=>!a.has(s(e)))}));i.legal_bases.length,i.related_sections.length;return i}catch(t){return e}};(0,r.useEffect)(()=>{if(t){0;const n=e=>{if(!e)return null;if("string"===typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;if(e.includes("T")||e.includes(" ")){const t=e.match(/^(\d{4}-\d{2}-\d{2})/);if(t)return t[1]}const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString().slice(0,10)}return e instanceof Date?e.toISOString().slice(0,10):null},r=e=>Array.isArray(e)?e.filter(e=>"string"===typeof e):null==e||""===e?[]:"string"===typeof e?[e]:[],a=e=>Array.isArray(e)?e.map(e=>{if(!e)return e;if("string"===typeof e)return{type:"internal",entry_id:e};if(!e.type&&e.entry_id)return c(c({},e),{},{type:"internal"});if("external"===e.type&&e.entry_id&&!e.citation)return c(c({},e),{},{citation:e.entry_id,entry_id:void 0});if("external"===e.type&&e.title&&!e.citation)return c(c({},e),{},{citation:e.title});if("external"===e.type){const{entry_id:t}=e;return u(e,ec)}if(e.topic&&!e.title){const{topic:t}=e;return c(c({},u(e,tc)),{},{title:t})}return e}):[],s={type:t.type||"statute_section",entry_id:t.entry_id||"",title:t.title||"",jurisdiction:t.jurisdiction||"PH",law_family:t.law_family||"",section_id:t.section_id||"",canonical_citation:t.canonical_citation||"",status:t.status||"",effective_date:n(t.effective_date)||(new Date).toISOString().slice(0,10),amendment_date:n(t.amendment_date),summary:t.summary||"",text:t.text||"",source_urls:t.source_urls&&t.source_urls.length>0?t.source_urls:[""],tags:t.tags||[],last_reviewed:n(t.last_reviewed)||(new Date).toISOString().slice(0,10),visibility:{gli:!0,cpa:!0},elements:r(null===t||void 0===t?void 0:t.elements),penalties:r(null===t||void 0===t?void 0:t.penalties),defenses:r(null===t||void 0===t?void 0:t.defenses),prescriptive_period:(null===t||void 0===t?void 0:t.prescriptive_period)||null,standard_of_proof:(null===t||void 0===t?void 0:t.standard_of_proof)||"",rule_no:(null===t||void 0===t?void 0:t.rule_no)||"",section_no:(null===t||void 0===t?void 0:t.section_no)||"",triggers:r(null===t||void 0===t?void 0:t.triggers),time_limits:r(null===t||void 0===t?void 0:t.time_limits),required_forms:r(null===t||void 0===t?void 0:t.required_forms),circular_no:(null===t||void 0===t?void 0:t.circular_no)||"",applicability:r(null===t||void 0===t?void 0:t.applicability),issuance_no:(null===t||void 0===t?void 0:t.issuance_no)||"",instrument_no:(null===t||void 0===t?void 0:t.instrument_no)||"",supersedes:a(null===t||void 0===t?void 0:t.supersedes),steps_brief:r(null===t||void 0===t?void 0:t.steps_brief),forms_required:r(null===t||void 0===t?void 0:t.forms_required),failure_states:r(null===t||void 0===t?void 0:t.failure_states),violation_code:(null===t||void 0===t?void 0:t.violation_code)||"",violation_name:(null===t||void 0===t?void 0:t.violation_name)||"",license_action:(null===t||void 0===t?void 0:t.license_action)||"",fine_schedule:Array.isArray(null===t||void 0===t?void 0:t.fine_schedule)?null===t||void 0===t?void 0:t.fine_schedule:[],apprehension_flow:r(null===t||void 0===t?void 0:t.apprehension_flow),incident:(null===t||void 0===t?void 0:t.incident)||"",phases:Array.isArray(null===t||void 0===t?void 0:t.phases)?null===t||void 0===t?void 0:t.phases:[],forms:r(null===t||void 0===t?void 0:t.forms),handoff:r(null===t||void 0===t?void 0:t.handoff),rights_callouts:r(null===t||void 0===t?void 0:t.rights_callouts),rights_scope:(null===t||void 0===t?void 0:t.rights_scope)||"",advice_points:r(null===t||void 0===t?void 0:t.advice_points),topics:r(null===t||void 0===t?void 0:t.topics),jurisprudence:r(null===t||void 0===t?void 0:t.jurisprudence),legal_bases:a(null===t||void 0===t?void 0:t.legal_bases),related_sections:a(null===t||void 0===t?void 0:t.related_sections)};if(x.reset(me(s)),le(!!t.amendment_date),f)try{const e=x.getFieldState("title"),t=s.title;!e.isDirty&&t&&t.length>=3&&setTimeout(()=>window.dispatchEvent(new Event("refresh-progress")),150)}catch(e){}}else if(g){try{const e=sessionStorage.getItem("importedEntryData");if(e){const t=JSON.parse(e);0;const s=e=>{if(!e)return null;if("string"===typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString().slice(0,10)}return e instanceof Date?e.toISOString().slice(0,10):null},i=e=>Array.isArray(e)?e.filter(e=>"string"===typeof e):null==e||""===e?[]:"string"===typeof e?[e]:[],o=e=>Array.isArray(e)?e.map(e=>{if(!e)return e;if("string"===typeof e)return{type:"internal",entry_id:e};if(!e.type&&e.entry_id)return c(c({},e),{},{type:"internal"});if("external"===e.type&&e.entry_id&&!e.citation)return c(c({},e),{},{citation:e.entry_id,entry_id:void 0});if("external"===e.type&&e.title&&!e.citation)return c(c({},e),{},{citation:e.title});if("external"===e.type){const{entry_id:t}=e;return u(e,nc)}if(e.topic&&!e.title){const{topic:t}=e;return c(c({},u(e,rc)),{},{title:t})}return e}):[];let l={type:t.type||"statute_section",entry_id:t.entry_id||"",title:t.title||"",jurisdiction:t.jurisdiction||"PH",law_family:t.law_family||"",section_id:t.section_id||"",canonical_citation:t.canonical_citation||"",status:t.status||"",effective_date:s(t.effective_date)||(new Date).toISOString().slice(0,10),amendment_date:s(t.amendment_date),summary:t.summary||"",text:t.text||"",source_urls:t.source_urls&&t.source_urls.length>0?t.source_urls:[""],tags:t.tags||[],last_reviewed:s(t.last_reviewed)||(new Date).toISOString().slice(0,10),visibility:{gli:!0,cpa:!0},elements:i(null===t||void 0===t?void 0:t.elements),penalties:i(null===t||void 0===t?void 0:t.penalties),defenses:i(null===t||void 0===t?void 0:t.defenses),prescriptive_period:(null===t||void 0===t?void 0:t.prescriptive_period)||null,standard_of_proof:(null===t||void 0===t?void 0:t.standard_of_proof)||"",rule_no:(null===t||void 0===t?void 0:t.rule_no)||"",section_no:(null===t||void 0===t?void 0:t.section_no)||"",triggers:i(null===t||void 0===t?void 0:t.triggers),time_limits:i(null===t||void 0===t?void 0:t.time_limits),required_forms:i(null===t||void 0===t?void 0:t.required_forms),circular_no:(null===t||void 0===t?void 0:t.circular_no)||"",applicability:i(null===t||void 0===t?void 0:t.applicability),issuance_no:(null===t||void 0===t?void 0:t.issuance_no)||"",instrument_no:(null===t||void 0===t?void 0:t.instrument_no)||"",supersedes:o(null===t||void 0===t?void 0:t.supersedes),steps_brief:i(null===t||void 0===t?void 0:t.steps_brief),forms_required:i(null===t||void 0===t?void 0:t.forms_required),failure_states:i(null===t||void 0===t?void 0:t.failure_states),violation_code:(null===t||void 0===t?void 0:t.violation_code)||"",violation_name:(null===t||void 0===t?void 0:t.violation_name)||"",license_action:(null===t||void 0===t?void 0:t.license_action)||"",fine_schedule:Array.isArray(null===t||void 0===t?void 0:t.fine_schedule)?null===t||void 0===t?void 0:t.fine_schedule:[],apprehension_flow:i(null===t||void 0===t?void 0:t.apprehension_flow),incident:(null===t||void 0===t?void 0:t.incident)||"",phases:Array.isArray(null===t||void 0===t?void 0:t.phases)?null===t||void 0===t?void 0:t.phases:[],forms:i(null===t||void 0===t?void 0:t.forms),handoff:i(null===t||void 0===t?void 0:t.handoff),rights_callouts:i(null===t||void 0===t?void 0:t.rights_callouts),rights_scope:(null===t||void 0===t?void 0:t.rights_scope)||"",advice_points:i(null===t||void 0===t?void 0:t.advice_points),topics:i(null===t||void 0===t?void 0:t.topics),jurisprudence:i(null===t||void 0===t?void 0:t.jurisprudence),legal_bases:o(null===t||void 0===t?void 0:t.legal_bases),related_sections:o(null===t||void 0===t?void 0:t.related_sections)};0;try{const e=localStorage.getItem("kb_entry_draft");if(e){const t=JSON.parse(e);if((null===t||void 0===t?void 0:t.entry_id)&&l.entry_id&&String(t.entry_id)===String(l.entry_id)||(null===t||void 0===t?void 0:t.title)&&l.title&&String(t.title).trim().toLowerCase()===String(l.title).trim().toLowerCase()){let e=new Set,r=new Set;try{const t=localStorage.getItem("kb_deleted_relations"),n=t?JSON.parse(t):[];Array.isArray(n)&&n.filter(Boolean).forEach(t=>{const n=String((null===t||void 0===t?void 0:t.key)||"").toLowerCase(),a=String((null===t||void 0===t?void 0:t.scope)||"").toLowerCase();a.includes("legal_bases")&&e.add(n),a.includes("related_sections")&&r.add(n)})}catch(n){}const a=e=>String((null===e||void 0===e?void 0:e.entry_id)||(null===e||void 0===e?void 0:e.citation)||(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.url)||JSON.stringify(e)).toLowerCase(),s=(e,t)=>Array.isArray(e)?e.length?e:t:0===e||null!=e&&""!==e?e:t,i=(t,n,s)=>{const i="lb"===s?e:r,o=[...(Array.isArray(t)?t:[]).filter(e=>!i.has(a(e)))],l=new Set(o.map(e=>a(e)));return(Array.isArray(n)?n:[]).forEach(e=>{const t=a(e);i.has(t)||l.has(t)||(o.push(e),l.add(t))}),o};l=c(c({},l),{},{title:s(t.title,l.title),canonical_citation:s(t.canonical_citation,l.canonical_citation),law_family:s(t.law_family,l.law_family),section_id:s(t.section_id,l.section_id),status:s(t.status,l.status),effective_date:s(t.effective_date,l.effective_date),amendment_date:s(t.amendment_date,l.amendment_date),summary:s(t.summary,l.summary),text:s(t.text,l.text),source_urls:s(t.source_urls,l.source_urls),tags:s(t.tags,l.tags),legal_bases:i(l.legal_bases,t.legal_bases,"lb"),related_sections:i(l.related_sections,t.related_sections,"rs")})}}}catch(r){}x.reset(me(l)),ne(!0);try{fe||(localStorage.setItem("kb_entry_draft",JSON.stringify(l)),pe(!0))}catch(a){}return void setTimeout(()=>{try{const e=x.getFieldState("title"),t=x.getValues().title;!e.isDirty&&t&&t.length>=3&&window.dispatchEvent(new Event("refresh-progress"))}catch(e){}},200)}}catch(ou){console.error("Failed to load imported data:",ou)}try{if("1"===sessionStorage.getItem("entryJustCreated")){sessionStorage.removeItem("entryJustCreated"),console.log("\ud83e\uddf9 Entry was just created, skipping draft loading for clean form");try{localStorage.removeItem("kb_entry_draft"),localStorage.removeItem("kb_draft"),localStorage.removeItem("kb_drafts"),console.log("\ud83e\uddf9 Double-checked: cleared any remaining draft data")}catch(ou){console.warn("Failed to clear drafts in form:",ou)}}else{const e=localStorage.getItem("kb_entry_draft");if(e){const t=JSON.parse(e);console.log("\ud83d\udcc4 Loading draft data for new entry:",t);const n={type:t.type||"statute_section",entry_id:t.entry_id||"",title:t.title||"",jurisdiction:t.jurisdiction||"PH",law_family:t.law_family||"",section_id:t.section_id||"",canonical_citation:t.canonical_citation||"",status:t.status||"",effective_date:t.effective_date||(new Date).toISOString().slice(0,10),amendment_date:t.amendment_date||null,summary:t.summary||"",text:t.text||"",source_urls:t.source_urls&&t.source_urls.length>0?t.source_urls:[""],tags:t.tags||[],last_reviewed:t.last_reviewed||(new Date).toISOString().slice(0,10),visibility:t.visibility||{gli:!0,cpa:!1},elements:t.elements||[],penalties:t.penalties||[],defenses:t.defenses||[],prescriptive_period:t.prescriptive_period||null,standard_of_proof:t.standard_of_proof||"",rule_no:t.rule_no||"",section_no:t.section_no||"",triggers:t.triggers||[],time_limits:t.time_limits||[],required_forms:t.required_forms||[],circular_no:t.circular_no||"",applicability:t.applicability||[],issuance_no:t.issuance_no||"",instrument_no:t.instrument_no||"",supersedes:t.supersedes||[],steps_brief:t.steps_brief||[],forms_required:t.forms_required||[],failure_states:t.failure_states||[],violation_code:t.violation_code||"",violation_name:t.violation_name||"",license_action:t.license_action||"",fine_schedule:t.fine_schedule||[],apprehension_flow:t.apprehension_flow||[],incident:t.incident||"",phases:t.phases||[],forms:t.forms||[],handoff:t.handoff||[],rights_callouts:t.rights_callouts||[],rights_scope:t.rights_scope||"",advice_points:t.advice_points||[],topics:t.topics||[],jurisprudence:t.jurisprudence||[],legal_bases:t.legal_bases||[],related_sections:t.related_sections||[]};0,x.reset(me(n)),ie(!0),setTimeout(()=>ie(!1),3e3)}else console.log("\ud83d\udcc4 No draft data found, starting with clean form")}}catch(ou){console.error("Failed to load draft data:",ou)}}},[t,x,g]),(0,r.useEffect)(()=>{try{if(g&&A&&D){const e=Kl(String(D),String(A),String(F||""));N("entry_id",e,{shouldDirty:!0})}}catch(ou){}},[g,D,A,F,N]);const ye=j("jurisdiction"),ve="PH"!==ye;(0,r.useEffect)(()=>{try{const e=j("status")||"",t=j("amendment_date"),n="amended"===e||!!t&&String(t).trim().length>0;le(n)}catch(e){}},[E,j("amendment_date")]);const be=()=>{try{const e=U.current;if(!e)return;e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}catch(e){}},xe=async()=>{const e=B;if(1===e){const e=j("jurisdiction");if("PH"!==e){const t=/^[A-Za-z\xc0-\xff]+(?:[-' ]+[A-Za-z\xc0-\xff]+)*(?: City| Province)?$/,n=(e||"").trim();if(n.length<3||n.length>40||!t.test(n))return void alert("Enter a valid jurisdiction in Title Case (e.g., Cavite, Quezon City, Baguio).")}}if(2!==e||"amended"!==E||j("amendment_date")){if(!t||f)try{ae(!0);const e=S();localStorage.setItem("kb_entry_draft",JSON.stringify(e)),setTimeout(()=>ae(!1),1e3)}catch(ou){console.error("Failed to auto-save draft:",ou),ae(!1)}V(e=>{const n=Math.min(z[z.length-1].id,e+1);if(console.log("Navigation debug:",{hasEntry:!!t,isImportedEntry:m,isOnCreateUrl:f,currentUrl:window.location.pathname,entryId:null===t||void 0===t?void 0:t.entry_id,hasIdField:!(null===t||void 0===t||!t.id),next:n}),f)console.log("Navigating to create mode:","/law-entry/".concat(n)),y("/law-entry/".concat(n));else{const e=t?t.id||t.entry_id:null;e&&(console.log("Navigating to edit mode:","/entry/".concat(e,"/edit?step=").concat(n)),y("/entry/".concat(e,"/edit?step=").concat(n)))}return setTimeout(be,0),n})}else alert("Amendment date is required when status is 'amended'.")},_e=()=>{if(!t||f)try{ae(!0);const e=S();localStorage.setItem("kb_entry_draft",JSON.stringify(e)),setTimeout(()=>ae(!1),1e3)}catch(ou){console.error("Failed to auto-save draft:",ou),ae(!1)}V(e=>{const n=Math.max(1,e-1);if(console.log("goPrev Navigation debug:",{hasEntry:!!t,isImportedEntry:m,isOnCreateUrl:f,currentUrl:window.location.pathname,entryId:null===t||void 0===t?void 0:t.entry_id,hasIdField:!(null===t||void 0===t||!t.id),prev:n}),f)console.log("goPrev Navigating to create mode:","/law-entry/".concat(n)),y("/law-entry/".concat(n));else{const e=t?t.id||t.entry_id:null;e&&(console.log("goPrev Navigating to edit mode:","/entry/".concat(e,"/edit?step=").concat(n)),y("/entry/".concat(e,"/edit?step=").concat(n)))}return setTimeout(be,0),n})},we=()=>{try{const e=S();localStorage.setItem("kb_entry_draft",JSON.stringify(e)),q(!0),setTimeout(()=>q(!1),1500)}catch(ou){console.error("Failed to save draft",ou),q(!0)}};(0,r.useEffect)(()=>{if(h)return;let e,t=!1,n="",r=0;const a=()=>{t=!0};try{document.addEventListener("input",a,{passive:!0})}catch(i){}const s=j(()=>{if(!t)return;if(!x.formState.isDirty)return;Date.now()-r<2e3||(e&&window.clearTimeout(e),e=window.setTimeout(()=>{try{const e=S(),t=me(e),a=JSON.stringify(t);a!==n&&(ae(!0),localStorage.setItem("kb_entry_draft",a),n=a,r=Date.now(),setTimeout(()=>ae(!1),400))}catch(ou){console.error("Failed to auto-save draft on change:",ou),ae(!1)}},1500))});return()=>{s.unsubscribe(),e&&window.clearTimeout(e);try{document.removeEventListener("input",a)}catch(t){}}},[j,S,t,h,x]);const ke=async function(e){var n,r,s;let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ce||de.current)return void console.log("Form submission already in progress, ignoring duplicate submission");l("\ud83d\ude80 FORM SUBMISSION STARTED"),l("\ud83d\udcdd Form mode:",{isEditMode:h,isCreateMode:g,hasEntry:!!t}),l("\ud83d\udcca Form data:",e),ue(!0),de.current=!0,l("Form data being submitted:",e),l("Form data type:",typeof e),l("Form data keys:",Object.keys(e));const f=function(e){const t=[];["title"].forEach(n=>{(!e[n]||"string"===typeof e[n]&&""===e[n].trim())&&t.push({field:n,message:"".concat(n.charAt(0).toUpperCase()+n.slice(1)," is required"),step:1,stepName:"Basics"})}),["amendment_date"].forEach(n=>{"source_urls"===n?e.source_urls&&0!==e.source_urls.length||t.push({field:n,message:"At least one source URL is required",step:2,stepName:"Sources & Dates"}):"amendment_date"===n&&"amended"===e.status&&(e.amendment_date||t.push({field:n,message:"Amendment date is required when status is amended",step:2,stepName:"Sources & Dates"}))}),[].forEach(n=>{(!e[n]||"string"===typeof e[n]&&""===e[n].trim())&&t.push({field:n,message:"".concat(n.charAt(0).toUpperCase()+n.slice(1)," is required"),step:3,stepName:"Content"})}),[].forEach(n=>{"tags"===n?e.tags&&0!==e.tags.length||t.push({field:n,message:"At least one tag is required",step:4,stepName:"Type-Specific & Relations"}):"last_reviewed"===n&&(!e.last_reviewed||"string"===typeof e.last_reviewed&&""===e.last_reviewed.trim())&&t.push({field:n,message:"Last reviewed date is required",step:4,stepName:"Type-Specific & Relations"})}),"constitution_provision"===e.type&&(e.topics&&0!==e.topics.length||t.push({field:"topics",message:"At least one topic is required for constitution provision",step:4,stepName:"Type-Specific & Relations"}));return t}(e);if(f.length>0){const e=f.map(e=>"".concat(e.field," (Step ").concat(e.step,": ").concat(e.stepName,")")).join("\n");return alert("Missing required fields:\n".concat(e)),ue(!1),void(de.current=!1)}const p=e=>null===e||void 0===e?"":String(e),m=e=>Array.isArray(e)?e.map(e=>{if(!e)return e;if("string"===typeof e)return{type:"internal",entry_id:e};if(!e.type&&e.entry_id)return c(c({},e),{},{type:"internal"});if("external"===e.type&&e.entry_id&&!e.citation)return c(c({},e),{},{citation:e.entry_id,entry_id:void 0});if("external"===e.type&&e.title&&!e.citation)return c(c({},e),{},{citation:e.title});if("external"===e.type){const{entry_id:t}=e;return u(e,ac)}if(e.topic&&!e.title){const{topic:t}=e;return c(c({},u(e,sc)),{},{title:t})}return e}):[],y=c(c({},e),{},{title:p(e.title),canonical_citation:p(e.canonical_citation),summary:p(e.summary),text:p(e.text),law_family:p(e.law_family),section_id:p(e.section_id),status:p(e.status),source_urls:(null===(n=e.source_urls)||void 0===n?void 0:n.filter(e=>!!e&&e.trim().length>0))||[],tags:(null===(r=e.tags)||void 0===r?void 0:r.filter(e=>!!e&&e.trim().length>0))||[],legal_bases:m(e.legal_bases),related_sections:m(e.related_sections)}),v={constitution_provision:["topics","related_sections","jurisprudence"],statute_section:["elements","penalties","defenses","prescriptive_period","standard_of_proof","related_sections","legal_bases"],city_ordinance_section:["elements","penalties","defenses","related_sections","legal_bases"],rule_of_court:["rule_no","section_no","triggers","time_limits","required_forms","related_sections"],agency_circular:["circular_no","section_no","applicability","legal_bases","supersedes"],doj_issuance:["issuance_no","applicability","legal_bases","supersedes"],executive_issuance:["instrument_no","applicability","legal_bases","supersedes"],rights_advisory:["rights_scope","advice_points","legal_bases","related_sections"]}[e.type]||[],b=["standard_of_proof","rule_no","section_no","circular_no","issuance_no","instrument_no","violation_code","violation_name","license_action","incident","rights_scope"];if(b.forEach(t=>{v.includes(t)&&(y[t]=p(e[t]))}),l("Raw form data source_urls:",e.source_urls),l("Sanitized source_urls:",y.source_urls),l("Sanitized source_urls type:",typeof y.source_urls),l("\ud83d\udd27 Entry type:",e.type),l("\ud83d\udd27 Relevant fields for this type:",v),l("\ud83d\udd27 Type-specific string fields being normalized:",b.filter(e=>v.includes(e))),l("\ud83d\udd27 Normalized standard_of_proof:",y.standard_of_proof,"Type:",typeof y.standard_of_proof),l("Sanitized source_urls length:",null===(s=y.source_urls)||void 0===s?void 0:s.length),l("Raw form data legal_bases:",e.legal_bases),l("Sanitized legal_bases:",y.legal_bases),l("Raw form data related_sections:",e.related_sections),l("Sanitized related_sections:",y.related_sections),y.offline&&delete y.offline,!y.source_urls||y.source_urls.length<1)return alert("Please add at least one Source URL before publishing."),ue(!1),void(de.current=!1);if("rights_advisory"===y.type){const e=y.legal_bases||[];if(!Array.isArray(e)||e.length<1)return alert("Rights Advisory entries require at least one legal basis."),ue(!1),void(de.current=!1)}l("Validating business rules...");const x=function(e){const t=[];return"amended"!==e.status||e.amendment_date||t.push("amendment_date is required when status is 'amended'."),"rights_advisory"===e.type&&"legal_bases"in e&&0===e.legal_bases.length&&t.push("Rights advisory must include at least one legal basis."),Ks.safeParse(e.jurisdiction).success||t.push("Jurisdiction must be 'PH' or a title-cased location like 'Quezon City'."),t}(y);if(x.length)return console.log("Business rule validation errors:",x),alert(x.join("\n")),ue(!1),void(de.current=!1);l("Business rules validation passed"),l("Validating imported entry data...");const _=y;l("Legal bases:",_.legal_bases),l("Related sections:",_.related_sections);const w=[];if(_.legal_bases&&_.legal_bases.forEach((e,t)=>{!e||"external"!==e.type||e.citation&&""!==e.citation.trim()||w.push("Legal Basis ".concat(t+1,": External entries require a citation")),!e||"internal"!==e.type||e.entry_id&&""!==e.entry_id.trim()||w.push("Legal Basis ".concat(t+1,": Internal entries require an entry_id"))}),_.related_sections&&_.related_sections.forEach((e,t)=>{!e||"external"!==e.type||e.citation&&""!==e.citation.trim()||w.push("Related Section ".concat(t+1,": External entries require a citation")),!e||"internal"!==e.type||e.entry_id&&""!==e.entry_id.trim()||w.push("Related Section ".concat(t+1,": Internal entries require an entry_id"))}),w.length>0)return l("Invalid external entries found:",w),alert("Validation errors found:\n"+w.join("\n")),ue(!1),void(de.current=!1);l("Imported entry validation passed");try{localStorage.removeItem("kb_entry_draft")}catch(ou){console.error("Failed to clear draft",ou)}const k=c(c({},y),{},{team_member_id:null!==d&&void 0!==d&&d.personId?Number(String(d.personId).replace("P","")):void 0,created_by:null!==d&&void 0!==d&&d.personId?Number(String(d.personId).replace("P","")):void 0,created_by_name:(null===d||void 0===d?void 0:d.name)||(null===d||void 0===d?void 0:d.username),created_by_username:null===d||void 0===d?void 0:d.username});if(l("Form data being sent:",k),l("Status field value:",k.status),l("Effective date value:",k.effective_date),g&&!o){l("\ud83d\udd0d Checking for internal suggestions in CREATE MODE");const e=(e=>{const t=e,n=t.legal_bases||[],r=t.related_sections||[];console.log("\ud83d\udd0d Checking for internal citation suggestions:",{legalBases:n.map((e,t)=>({index:t+1,type:null===e||void 0===e?void 0:e.type,hasSuggestion:null===e||void 0===e?void 0:e._hasInternalSuggestion,title:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.citation)})),relatedSections:r.map((e,t)=>({index:t+1,type:null===e||void 0===e?void 0:e.type,hasSuggestion:null===e||void 0===e?void 0:e._hasInternalSuggestion,title:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.citation)}))});const a=[],s=[];n.forEach((e,t)=>{e&&"external"===e.type&&(e._hasInternalSuggestion||e.citation&&e.title)&&(a.push(t+1),console.log("\ud83d\udd0d Found Legal Bases External Citation #".concat(t+1," with suggestions:"),e.title||e.citation))}),r.forEach((e,t)=>{e&&"external"===e.type&&(e._hasInternalSuggestion||e.citation&&e.title)&&(s.push(t+1),console.log("\ud83d\udd0d Found Related Section External Citation #".concat(t+1," with suggestions:"),e.title||e.citation))});let i=!1;try{i="true"===sessionStorage.getItem("hasInternalSuggestion")}catch(c){}const o=a.length>0||s.length>0||i;let l="";return o&&(l="There are still external citations that might exist in the KB. Are you sure you want to ignore and not add them as internal?"),console.log("\ud83d\udd0d Internal citation suggestions result:",{legalBasesWithSuggestions:a,relatedSectionsWithSuggestions:s,hasSuggestions:o,message:l,globalFlag:i,legalBasesCount:n.length,relatedSectionsCount:r.length,legalBasesExternal:n.filter(e=>e&&"external"===e.type).length,relatedSectionsExternal:r.filter(e=>e&&"external"===e.type).length}),{hasSuggestions:o,message:l}})(k);if(l("\ud83d\udd0d Has internal suggestions:",e.hasSuggestions),e.hasSuggestions)return l("\ud83d\udd0d Showing internal citation modal with message:",e.message),K(e.message),J(!0),ue(!1),void(de.current=!1)}else l(o?"\ud83d\udd0d Skipping internal suggestions check - user confirmed to proceed":"\ud83d\udd0d Skipping internal suggestions check - not in CREATE MODE");if(i&&g){if(JSON.parse(sessionStorage.getItem("incompleteEntries")||"[]").some(e=>e.personId===(null===d||void 0===d?void 0:d.personId)||e.personName===(null===d||void 0===d?void 0:d.name)||e.personName===(null===d||void 0===d?void 0:d.username)))return i(k),ue(!1),void(de.current=!1)}try{await a(k),window.dispatchEvent(new Event("refresh-progress"))}catch(j){throw console.error("Error saving entry:",j),ue(!1),de.current=!1,j}},je=(0,r.useCallback)(()=>{if(t&&t.id&&!f)return void G([]);f&&l("\ud83d\udd0d On create URL - enabling duplicate detection for all entries"),t||l("\ud83d\udd0d No entry prop - treating as new entry, enabling duplicate detection");const e=[P,A,F,T,O].filter(Boolean).map(e=>String(e).trim()).filter(e=>e.length>0),r=e.join(" ").trim();if(l("\ud83d\udd0d Duplicate detection query generation:",{title:P||"no title",lawFamily:A||"no law family",sectionId:F||"no section id",citation:T||"no citation",effectiveDate:O||"no date",idTokens:e,query:r}),!r)return l("\ud83d\udd0d No query generated, clearing duplicates"),void G([]);if(P&&P.length<3)return l("\ud83d\udd0d Title too short, clearing duplicates"),void G([]);l("\ud83d\udd0d Proceeding with duplicate detection for create URL entry");let a=!1;const s=setTimeout(async()=>{try{var e;l("\ud83d\udd0d Setting searchingDupes to TRUE"),ee(!0),l("\ud83d\udd0d Starting semantic search with query:",r),l("\ud83d\udd0d Existing entries count:",n.length);const s=await Nt(r,10);if(l("\ud83d\udd0d Semantic search response:",s),l("\ud83d\udd0d Semantic search success:",s.success),l("\ud83d\udd0d Semantic search results count:",(null===(e=s.results)||void 0===e?void 0:e.length)||0),!a){let e=[];if(s.success&&s.results&&Array.isArray(s.results)&&s.results.length>0)e=s.results,l("\ud83d\udd0d Using semantic search results:",e.length);else{l("\ud83d\udd0d Semantic search failed or returned no results, trying fallback text search");const t=r.toLowerCase();e=n.filter(e=>[e.title,e.canonical_citation,e.section_id,e.law_family,e.summary].filter(Boolean).join(" ").toLowerCase().includes(t)).map(e=>c(c({},e),{},{similarity:.35})).slice(0,10),l("\ud83d\udd0d Fallback text search results:",e.length)}const a=new Set(["the","of","and","or","to","for","in","on","at","by","with","from","into","during","including","until","against","among","throughout","despite","towards","upon"]),i=e=>String(e||"").toLowerCase().replace(/[^a-z0-9\s]/g," ").split(/\s+/).filter(Boolean).filter(e=>!a.has(e)&&e.length>2),o=e=>String(e||"").toLowerCase().replace(/[""]/g,'"').replace(/[']/g,"'").replace(/[-\u2013\u2014_()[\].,:/]/g," ").replace(/\s+/g," ").trim(),u=e=>{let t=o(e);return t=t.replace(/\b(article|art\.?)\s*([ivxlcdm]+)\b/gi,"article $2").replace(/\b(article|art\.?)\s*(\d+)\b/gi,"article $2").replace(/\b(section|sec\.?)\s*([ivxlcdm]+)\b/gi,"section $2").replace(/\b(section|sec\.?)\s*(\d+)\b/gi,"section $2"),t=t.replace(/\b(article|art\.?)\b/gi,"article").replace(/\b(section|sec\.?)\b/gi,"section").replace(/\b(paragraph|para\.?|par\.?)\b/gi,"paragraph").replace(/\b(subsection|subsec\.?|sub\.?)\b/gi,"subsection"),t},d=e=>u(e).replace(/\s+/g,""),f=(e,t)=>{const n=new Set(i(u(e))),r=new Set(i(u(t)));if(0===n.size||0===r.size)return 0;let a=0;return n.forEach(e=>{r.has(e)&&a++}),a/Math.min(n.size,r.size)};l("\ud83d\udd0d Duplicate detection processing:",{query:r,resultsCount:e.length,title:P,type:D,results:e.slice(0,3)});const p=e.filter(e=>{const t=Number(e.similarity||e.score||0),n=[e.title,e.canonical_citation,e.section_id,e.law_family,e.effective_date].filter(Boolean).map(u).join(" "),r=d(n),a=u(String(e.title||e.canonical_citation||"")),s=!D||!e.type||e.type===D;const i=f(u(P||""),a),o=F&&(n.includes(u(F))||r.includes(d(F))),l=T&&(n.includes(u(T))||r.includes(d(T))),c=O&&(n.includes(u(O))||r.includes(d(O))),p=x.getValues(),{jurisdiction:m,violation_code:h,violation_name:g,tags:y,summary:v,text:b,fine_schedule:_,elements:w,legal_bases:k,related_sections:j,jurisprudence:N,topics:S,forms:C}=p,E=m&&e.jurisdiction&&u(m)===u(e.jurisdiction),I=A&&e.law_family&&u(A)===u(e.law_family),R=h&&e.violation_code&&u(h)===u(e.violation_code),M=g&&e.violation_name&&u(g)===u(e.violation_name),L=O&&e.effective_date&&(()=>{try{const t=new Date(O),n=new Date(e.effective_date);return Math.abs(t.getTime()-n.getTime())/864e5<=365}catch(t){return!1}})(),z=y&&e.tags&&Array.isArray(y)&&Array.isArray(e.tags)&&(()=>{const t=new Set(y.map(e=>u(e))),n=new Set(e.tags.map(e=>u(e))),r=new Set([...t].filter(e=>n.has(e)));return r.size>0&&r.size/Math.min(t.size,n.size)>=.3})(),B=v&&e.summary&&f(u(v),u(e.summary))>=.4,V=b&&e.text&&f(u(b),u(e.text))>=.3,U=_&&e.fine_schedule&&(()=>{try{const t=Array.isArray(_)?_:[],n=Array.isArray(e.fine_schedule)?e.fine_schedule:[];return 0!==t.length&&0!==n.length&&t.some(e=>n.some(t=>{const n=parseFloat(e.amount||e),r=parseFloat(t.amount||t);if(isNaN(n)||isNaN(r))return!1;const a=.1*Math.max(n,r);return Math.abs(n-r)<=a}))}catch(t){return!1}})(),W=w&&e.elements&&(()=>{try{const t=Array.isArray(w)?w:[],n=Array.isArray(e.elements)?e.elements:[];if(0===t.length||0===n.length)return!1;const r=new Set(t.map(e=>u(e.name||e))),a=new Set(n.map(e=>u(e.name||e))),s=new Set([...r].filter(e=>a.has(e)));return s.size>0&&s.size/Math.min(r.size,a.size)>=.4}catch(t){return!1}})(),q=k&&e.legal_bases&&(()=>{try{const t=Array.isArray(k)?k:[],n=Array.isArray(e.legal_bases)?e.legal_bases:[];if(0===t.length||0===n.length)return!1;const r=new Set(t.map(e=>u(e.entry_id||e.id||e))),a=new Set(n.map(e=>u(e.entry_id||e.id||e))),s=new Set([...r].filter(e=>a.has(e)));return s.size>0&&s.size/Math.min(r.size,a.size)>=.5}catch(t){return!1}})(),H=j&&e.related_sections&&(()=>{try{const t=Array.isArray(j)?j:[],n=Array.isArray(e.related_sections)?e.related_sections:[];if(0===t.length||0===n.length)return!1;const r=new Set(t.map(e=>u(e.entry_id||e.id||e))),a=new Set(n.map(e=>u(e.entry_id||e.id||e))),s=new Set([...r].filter(e=>a.has(e)));return s.size>0&&s.size/Math.min(r.size,a.size)>=.5}catch(t){return!1}})(),$=N&&e.jurisprudence&&(()=>{try{const t=Array.isArray(N)?N:[],n=Array.isArray(e.jurisprudence)?e.jurisprudence:[];if(0===t.length||0===n.length)return!1;const r=new Set(t.map(e=>u(e.name||e.title||e))),a=new Set(n.map(e=>u(e.name||e.title||e))),s=new Set([...r].filter(e=>a.has(e)));return s.size>0&&s.size/Math.min(r.size,a.size)>=.4}catch(t){return!1}})(),Z=S&&e.topics&&(()=>{try{const t=Array.isArray(S)?S:[],n=Array.isArray(e.topics)?e.topics:[];if(0===t.length||0===n.length)return!1;const r=new Set(t.map(e=>u(e.name||e.title||e))),a=new Set(n.map(e=>u(e.name||e.title||e))),s=new Set([...r].filter(e=>a.has(e)));return s.size>0&&s.size/Math.min(r.size,a.size)>=.4}catch(t){return!1}})(),J=C&&e.forms&&(()=>{try{const t=Array.isArray(C)?C:[],n=Array.isArray(e.forms)?e.forms:[];if(0===t.length||0===n.length)return!1;const r=new Set(t.map(e=>u(e.name||e.title||e))),a=new Set(n.map(e=>u(e.name||e.title||e))),s=new Set([...r].filter(e=>a.has(e)));return s.size>0&&s.size/Math.min(r.size,a.size)>=.4}catch(t){return!1}})();return o||l||c||E||I||R||M||t>=.7||t>=.5&&i>=.25||s&&i>=.35&&t>=.45||i>=.4||L&&t>=.6||z&&t>=.5||B||V||U||W||q||H||$||Z||J||t>=.5&&i>=.2});0,G(p);try{const e=e=>String(e||"").toLowerCase().replace(/\b(rule|roc)\s*(\d+)\b/g,"rule $2").replace(/\b(section|sec\.?)\s*(\d+)\b/g,"section $2").replace(/\b(article|art\.?)\s*(\d+)\b/g,"article $2").replace(/\b(republic act|ra)\s*(\d+)\b/g,"republic act $2").replace(/\b(presidential decree|pd)\s*(\d+)\b/g,"presidential decree $2").replace(/\b(executive order|eo)\s*(\d+)\b/g,"executive order $2").replace(/\b(memorandum circular|mc)\s*(\d+)\b/g,"memorandum circular $2").replace(/\b(department order|do)\s*(\d+)\b/g,"department order $2").replace(/\b(administrative order|ao)\s*(\d+)\b/g,"administrative order $2").replace(/\b(commonwealth act|ca)\s*(\d+)\b/g,"commonwealth act $2").replace(/\b(batas pambansa|bp)\s*(\d+)\b/g,"batas pambansa $2").replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),t=t=>e(t).split(" ").filter(Boolean),a=e=>{const t={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3,i:1,v:5,x:10,l:50,c:100,d:500,m:1e3};let n=0;for(let r=0;r<e.length;r++){const a=t[e[r]],s=t[e[r+1]];n+=s&&a<s?-a:a}return n},i=e=>{const t=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"];let r="";for(let a=0;a<t.length;a++)for(;e>=t[a];)r+=n[a],e-=t[a];return r},o=e=>{const t=new Set([e]);e.endsWith("s")&&e.length>3?t.add(e.slice(0,-1)):t.add(e+"s");const n=e.match(/^([IVXLC]+)$/i);if(n){const e=a(n[1].toUpperCase());e>0&&e<=100&&(t.add(String(e)),t.add(i(e)))}const r=e.match(/^(\d+)$/);if(r){const e=parseInt(r[1]);e>0&&e<=100&&t.add(i(e))}return Array.from(t)},l=(e,t)=>{const n=e.length,r=t.length,a=Array.from({length:n+1},()=>new Array(r+1).fill(0));for(let s=0;s<=n;s++)a[s][0]=s;for(let s=0;s<=r;s++)a[0][s]=s;for(let s=1;s<=n;s++)for(let n=1;n<=r;n++){const r=e[s-1]===t[n-1]?0:1;a[s][n]=Math.min(a[s-1][n]+1,a[s][n-1]+1,a[s-1][n-1]+r)}return a[n][r]},c=(t,n,r)=>{const a=Array.isArray(t.tags)?t.tags.join(" "):"",s=[{text:t.title,weight:10},{text:t.entry_id,weight:8},{text:t.law_family,weight:6},{text:t.canonical_citation,weight:6},{text:a,weight:5},{text:t.summary,weight:4},{text:t.text,weight:2},{text:t.section_id,weight:3},{text:t.type,weight:2}];let i=0,c=0;for(const u of n){const t=o(u);let n=!1,a=0;for(const{text:i,weight:o}of s){if(!i)continue;const s=e(i);if(s===r)a=Math.max(a,3*o),n=!0;else if(s.startsWith(r))a=Math.max(a,2*o),n=!0;else if(s.includes(r))a=Math.max(a,o),n=!0;else for(const e of t){if(s===e)a=Math.max(a,2*o),n=!0;else if(s.startsWith(e))a=Math.max(a,1.5*o),n=!0;else if(s.includes(e))a=Math.max(a,o),n=!0;else{const t=s.split(" ");for(const r of t){if(l(e,r)<=(e.length<=5?1:2)){a=Math.max(a,.5*o),n=!0;break}}}if(n)break}if(n)break}n&&(i+=a,c++)}return c===n.length?i:0},u=n||[],d=t(r),f=e(r),p=e(T||""),m=e(P||""),h=e(F||""),g=u.map(t=>{const n=c(t,d,f),r=e(t.title||""),a=e(t.canonical_citation||""),s=e(t.section_id||"");let i=0;return p&&(a===p&&(i+=2e3),r===p&&(i+=1500),a.startsWith(p)&&(i+=1e3),r.startsWith(p)&&(i+=800),a.includes(p)&&(i+=600),r.includes(p)&&(i+=400)),m&&(r===m&&(i+=1e3),a===m&&(i+=800),r.startsWith(m)&&(i+=500),a.startsWith(m)&&(i+=400),r.includes(m)&&(i+=300),a.includes(m)&&(i+=200)),h&&(s===h&&(i+=800),s.startsWith(h)&&(i+=400),s.includes(h)&&(i+=200)),{entry:t,score:n+i}}).filter(e=>e.score>=10),y=(s.success&&Array.isArray(s.results)?s.results:[]).map(t=>{let n=100*Number(t.similarity||t.score||0);const r=e(t.title||""),a=e(t.canonical_citation||"");return!p||a!==p&&r!==p?!m||r!==m&&a!==m?n*=.5:n+=20:n+=25,{entry:t,score:n}}),v={};for(const n of g){const e=n.entry.entry_id||n.entry.id||n.entry.title,t=v[e]||{entry:n.entry,local:0,semantic:0};v[e]={entry:n.entry,local:Math.max(t.local,n.score),semantic:t.semantic}}for(const n of y){const e=n.entry.entry_id||n.entry.id||n.entry.title,t=v[e]||{entry:n.entry,local:0,semantic:0};v[e]={entry:n.entry,local:t.local,semantic:Math.max(t.semantic,n.score)}}const b=50,x=10,_=Object.values(v).filter(e=>e.local>=x||e.semantic>=b&&e.local>=8).sort((e,t)=>2*t.local+t.semantic-(2*e.local+e.semantic)).slice(0,5).map(e=>e.entry);G(_)}catch(t){}}}catch(s){console.error("\u274c Error in duplicate detection:",s),a||(G([]),console.warn("Duplicate detection failed, but continuing with form creation"))}finally{a||ee(!1)}},500);return()=>{a=!0,clearTimeout(s)}},[t,f,P,A,F,T,O,D,te,n,x,G,ee]);return(0,r.useEffect)(()=>{const e=setTimeout(()=>{je()},1e3);return()=>clearTimeout(e)},[P,A,F,T,O,t,h,g,m,f,te,je]),(0,r.useEffect)(()=>{0},[Q]),(0,r.useEffect)(()=>{te&&ne(!1)},[te]),(0,fi.jsx)(Tn,c(c({},x),{},{children:(0,fi.jsx)("div",{className:"w-full flex justify-center",children:(0,fi.jsxs)("div",{className:"kb-form mx-auto max-w-[1120px] px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[(0,fi.jsx)(Ul,{isOpen:Q&&Q.length>0,onClose:()=>G([]),matches:Q||[],maxDisplay:5}),!1,!1,(0,fi.jsxs)("div",{className:"kb-form-container",children:[(0,fi.jsxs)("header",{className:"kb-form-header mb-6",children:[(0,fi.jsxs)("div",{children:[(0,fi.jsx)("h1",{className:"kb-form-title",children:h?"Editing Knowledge Base Entry":"Create Knowledge Base Entry"}),(0,fi.jsx)("p",{className:"kb-form-subtitle",children:h?"Update an existing entry in the legal knowledge base":"Add a new entry to the legal knowledge base for Villy AI"}),!h&&(0,fi.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"\ud83d\udcbe Your work is automatically saved as you type and navigate between steps"})]}),!h&&re&&(0,fi.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-600 mt-2",children:[(0,fi.jsx)("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,fi.jsx)("span",{children:"Auto-saving..."})]})]}),(0,fi.jsxs)("div",{className:"kb-form-layout grid grid-cols-12 gap-6 md:gap-8 items-stretch justify-center",children:[(0,fi.jsx)("div",{className:"col-span-12 md:col-span-4",children:(0,fi.jsx)(Lo,{steps:z,currentStep:B,onStepClick:e=>{if(V(e),f)y("/law-entry/".concat(e));else{const n=t?t.id||t.entry_id:null;n&&y("/entry/".concat(n,"/edit?step=").concat(e))}}})}),(0,fi.jsx)("aside",{className:"col-span-12 md:col-span-8",children:(0,fi.jsx)("div",{children:(0,fi.jsx)("div",{className:"ds-card rounded-2xl shadow-sm border p-5 h-full min-h-[360px] w-full",children:(0,fi.jsx)("div",{className:"pr-2",children:(0,fi.jsx)(pi,{data:x.watch()})})})})}),(0,fi.jsx)("section",{className:"kb-form-section col-span-12",children:(0,fi.jsx)("form",{onSubmit:k(e=>{console.log("\u2705 FORM SUBMISSION SUCCESS - onSubmit called with data:",e),ke(e)},e=>{console.log("\ud83d\udea8 FORM VALIDATION ERRORS:",e),console.log("\ud83d\udea8 Form validation failed, preventing submission"),console.log("\ud83d\udea8 Error count:",Object.keys(e).length)}),children:1===B?(0,fi.jsxs)(fi.Fragment,{children:[(0,fi.jsxs)("div",{ref:U,className:"kb-step-card",children:[(0,fi.jsx)("div",{className:"kb-step-header",children:(0,fi.jsxs)("div",{className:"kb-step-header-content",children:[(0,fi.jsx)("div",{className:"kb-step-icon",children:(0,fi.jsx)(_i,{className:"kb-step-icon-svg"})}),(0,fi.jsx)("h2",{className:"kb-step-title",children:"Basic Information"}),(0,fi.jsx)("p",{className:"kb-step-description",children:"Start with the fundamental details about this legal entry"})]})}),(0,fi.jsx)("div",{className:"kb-form-fields",children:(0,fi.jsx)("div",{className:"kb-form-grid",children:(0,fi.jsxs)("div",{className:"kb-form-column",children:[(0,fi.jsxs)("div",{className:"kb-form-section-group",children:[(0,fi.jsx)("h3",{className:"kb-form-section-title",children:"Entry Details"}),(0,fi.jsxs)("div",{className:"kb-form-field-group",children:[(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Entering as"}),(0,fi.jsx)(Jo,{className:"kb-form-input bg-gray-50",placeholder:"Team Member",value:(null===d||void 0===d?void 0:d.name)||(null===d||void 0===d?void 0:d.username)||"Team Member",readOnly:!0})]}),(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsxs)("label",{className:"kb-form-label",children:["Entry Type ",(0,fi.jsx)("span",{className:"kb-required",children:"*"})]}),(0,fi.jsxs)("select",c(c({className:"kb-form-select"},w("type")),{},{onChange:e=>N("type",e.target.value),children:[(0,fi.jsx)("option",{value:"",children:"Select Entry Type"}),(Zs.options||Zs._def.values).map(e=>(0,fi.jsx)("option",{value:e,children:e},e))]}))]}),(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsxs)("label",{className:"kb-form-label",children:["Title ",(0,fi.jsx)("span",{className:"kb-required",children:"*"})]}),(0,fi.jsx)(Jo,c({className:"kb-form-input",placeholder:"Human-readable label"},w("title")))]}),(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsxs)("label",{className:"kb-form-label",children:["Jurisdiction ",(0,fi.jsx)("span",{className:"kb-required",children:"*"})]}),(0,fi.jsx)("p",{id:"jurisdiction-help",className:"kb-form-helper kb-helper-spaced",children:"Use title case; letters/spaces only"}),(0,fi.jsxs)("select",{className:"kb-form-select",value:ve?"Other":"PH",onChange:e=>{"Other"===e.target.value?N("jurisdiction",""):N("jurisdiction","PH")},"aria-describedby":"jurisdiction-help",children:[(0,fi.jsx)("option",{value:"PH",children:"PH Philippines (PH)"}),(0,fi.jsx)("option",{value:"Other",children:"Other\u2026"})]}),ve&&(0,fi.jsx)(Jo,{className:"kb-form-input",placeholder:"e.g., Cavite, Quezon City, Baguio",value:String(ye||""),onChange:e=>N("jurisdiction",e.target.value),onBlur:e=>N("jurisdiction",(e=>e.toLowerCase().replace(/(^|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]|['\x2D])(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088F\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5C\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDC-\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC7\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDB0-\uDDDB\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF2\uDFF3]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDEC0-\uDEDE\uDEE0-\uDEE2\uDEE4\uDEE5\uDEE7-\uDEED\uDEF0-\uDEF4\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])/g,e=>e.toUpperCase()).replace(/\b(And|Of|The)\b/g,e=>e.toLowerCase()))(e.target.value)),"aria-describedby":"jurisdiction-help"})]}),(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsxs)("label",{className:"kb-form-label",children:["Law Family ",(0,fi.jsx)("span",{className:"kb-required",children:"*"})]}),(0,fi.jsx)(Jo,c({className:"kb-form-input",placeholder:"RA 4136, Rules of Court, Cebu Ord. 2606"},w("law_family")))]})]})]}),(0,fi.jsxs)("div",{className:"kb-form-section-group",children:[(0,fi.jsx)("h3",{className:"kb-form-section-title",children:"Reference Information"}),(0,fi.jsxs)("div",{className:"kb-form-field-group",children:[(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Section ID"}),(0,fi.jsx)(Jo,c({className:"kb-form-input",placeholder:"Sec. 7, Rule 113 Sec. 5, Art. 308"},w("section_id")))]}),(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsxs)("label",{className:"kb-form-label",children:["Canonical Citation ",(0,fi.jsx)("span",{className:"kb-required",children:"*"})]}),(0,fi.jsx)(Jo,c({className:"kb-form-input",placeholder:"RPC Art. 308, ROC Rule 113, Sec. 5"},w("canonical_citation"))),(0,fi.jsx)("p",{className:"kb-form-helper",children:"Shown to users; follows official formatting"})]}),(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsxs)("label",{className:"kb-form-label",children:["Status ",(0,fi.jsx)("span",{className:"kb-required",children:"*"})]}),(0,fi.jsxs)("select",c(c({className:"kb-form-select"},w("status")),{},{children:[(0,fi.jsx)("option",{value:"",children:"----"}),(0,fi.jsx)("option",{value:"active",children:"Active"}),(0,fi.jsx)("option",{value:"amended",children:"Amended"}),(0,fi.jsx)("option",{value:"repealed",children:"Repealed"}),(0,fi.jsx)("option",{value:"draft",children:"Draft"}),(0,fi.jsx)("option",{value:"approved",children:"Approved"}),(0,fi.jsx)("option",{value:"published",children:"Published"})]}))]}),(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Auto-generated Entry ID"}),(0,fi.jsx)(Jo,{className:"kb-form-input bg-gray-50",placeholder:"Auto-generated",value:I||"",readOnly:!0})]})]})]})]})})})]}),(0,fi.jsxs)("div",{className:"kb-action-bar",children:[(0,fi.jsxs)(Ho,{type:"button",variant:"outline",onClick:()=>$(!0),className:"flex items-center gap-3 px-12 min-w-[140px] py-3 h-12",children:[(0,fi.jsx)(Ol,{className:"h-4 w-4"}),"Cancel"]}),(0,fi.jsx)("div",{className:"flex gap-3",children:(0,fi.jsxs)(Ho,{type:"button",onClick:xe,disabled:Q&&Q.length>0,variant:"default",className:"flex items-center gap-3 px-12 min-w-[140px] py-3 h-12 text-white ".concat(Q&&Q.length>0?"bg-gray-400 cursor-not-allowed shadow-none":""),children:["Next",(0,fi.jsx)(Yl,{className:"h-4 w-4"})]})})]})]}):2===B?(0,fi.jsxs)("div",{ref:U,className:"kb-step-card",children:[(0,fi.jsx)("div",{className:"kb-step-header",children:(0,fi.jsxs)("div",{className:"kb-step-header-content",children:[(0,fi.jsx)("div",{className:"kb-step-icon",children:(0,fi.jsx)(wi,{className:"kb-step-icon-svg"})}),(0,fi.jsx)("h2",{className:"kb-step-title",children:"Sources & Dates"}),(0,fi.jsx)("p",{className:"kb-step-description",children:"Citations and effective dates"})]})}),(0,fi.jsxs)("div",{className:"kb-form-fields",children:[(0,fi.jsxs)("div",{className:"kb-form-grid",children:[(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Effective Date"}),(0,fi.jsx)(Jo,c({className:"kb-form-input",type:"date"},w("effective_date")))]}),(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Has Amendment?"}),(0,fi.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,fi.jsx)("input",{type:"checkbox",checked:oe,onChange:e=>{const t=e.target.checked;le(t),t||N("amendment_date",null,{shouldDirty:!0})}}),(0,fi.jsx)("span",{className:"text-sm text-gray-700",children:"This entry has an amendment"})]})]}),oe&&(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Amendment Date"}),(0,fi.jsx)(Jo,c({className:"kb-form-input",type:"date"},w("amendment_date")))]}),(0,fi.jsxs)("div",{children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Source URLs"}),(0,fi.jsx)("div",{className:"mt-2",children:(0,fi.jsx)(lc,{control:_,register:w,watch:j,setValue:N})})]})]}),(0,fi.jsxs)("div",{className:"kb-action-bar",children:[(0,fi.jsx)("div",{className:"flex gap-3",children:(0,fi.jsx)(Ho,{type:"button",variant:"outline",onClick:()=>$(!0),className:"h-12 px-10 min-w-[130px]",children:"Cancel"})}),(0,fi.jsxs)("div",{className:"flex gap-3",children:[(0,fi.jsx)(Ho,{type:"button",variant:"outline",onClick:_e,className:"h-12 px-10 min-w-[130px] kb-prev-btn",children:"Previous"}),(0,fi.jsxs)(Ho,{type:"button",onClick:xe,disabled:Q&&Q.length>0,variant:"default",className:"flex items-center gap-3 px-12 min-w-[140px] py-3 h-12 ".concat(Q&&Q.length>0?"bg-gray-400 text-white cursor-not-allowed shadow-none":""),children:["Next",(0,fi.jsx)(Yl,{className:"h-4 w-4"})]})]})]})]})]}):3===B?(0,fi.jsxs)("div",{ref:U,className:"kb-step-card",children:[(0,fi.jsx)("div",{className:"kb-step-header",children:(0,fi.jsxs)("div",{className:"kb-step-header-content",children:[(0,fi.jsx)("div",{className:"kb-step-icon",children:(0,fi.jsx)(ki,{className:"kb-step-icon-svg"})}),(0,fi.jsx)("h2",{className:"kb-step-title",children:"Content"}),(0,fi.jsx)("p",{className:"kb-step-description",children:"Summary and legal text"})]})}),(0,fi.jsxs)("div",{className:"kb-form-fields",children:[(0,fi.jsxs)("div",{className:"space-y-8",children:[(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsxs)("div",{className:"space-y-1",children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Summary"}),(0,fi.jsx)("p",{className:"kb-form-helper kb-helper-below kb-helper-light-grey",children:"Keep it concise and neutral."})]}),(0,fi.jsx)(Zl,c({rows:4,placeholder:"1\u20133 sentence neutral synopsis"},w("summary")))]}),(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsxs)("div",{className:"space-y-1 kb-step3-legal-text-spacing",children:[(0,fi.jsx)("label",{className:"kb-form-label",children:"Legal Text"}),(0,fi.jsx)("p",{className:"kb-form-helper kb-helper-below kb-helper-light-grey",children:"Substance-only, normalized."})]}),(0,fi.jsx)(Zl,c({rows:12,placeholder:"Clean, normalized legal text"},w("text")))]}),(0,fi.jsxs)("div",{className:"kb-form-field",children:[(0,fi.jsx)("div",{className:"kb-step3-tags-spacing",children:(0,fi.jsx)("label",{className:"kb-form-label",children:"Tags"})}),(0,fi.jsx)(cc,{control:_,register:w,watch:j})]})]}),(0,fi.jsxs)("div",{className:"kb-action-bar",children:[(0,fi.jsxs)("div",{className:"flex gap-3",children:[(0,fi.jsx)(Ho,{type:"button",variant:"outline",onClick:()=>$(!0),className:"h-12 px-10 min-w-[130px]",children:"Cancel"}),!t&&(0,fi.jsx)(Ho,{type:"button",variant:"outline",onClick:we,className:"h-12 px-10 min-w-[130px]",children:"Save draft"})]}),(0,fi.jsxs)("div",{className:"flex gap-3",children:[(0,fi.jsx)(Ho,{type:"button",variant:"outline",onClick:_e,className:"h-12 px-10 min-w-[130px]",children:"Previous"}),(0,fi.jsxs)(Ho,{type:"button",onClick:xe,disabled:Q&&Q.length>0,variant:"default",className:"flex items-center gap-3 px-12 min-w-[140px] py-3 h-12 text-white ".concat(Q&&Q.length>0?"bg-gray-400 cursor-not-allowed shadow-none":""),children:["Next",(0,fi.jsx)(Yl,{className:"h-4 w-4"})]})]})]})]})]}):4===B?(0,fi.jsxs)("div",{ref:U,className:"kb-step-card",children:[(0,fi.jsx)("div",{className:"kb-step-header",children:(0,fi.jsxs)("div",{className:"kb-step-header-content",children:[(0,fi.jsx)("div",{className:"kb-step-icon",children:(0,fi.jsx)(ji,{className:"kb-step-icon-svg"})}),(0,fi.jsx)("h2",{className:"kb-step-title",children:"Type-Specific & Relations"}),(0,fi.jsx)("p",{className:"kb-step-description",children:"Fields based on entry type"})]})}),(0,fi.jsx)("div",{children:(0,fi.jsx)(Hl,{onNext:xe,onPrevious:_e,onCancel:s,onSaveDraft:we,isEditing:!!t,existingEntries:n})})]}):5===B?(0,fi.jsxs)("div",{className:"kb-step-card",children:[(0,fi.jsx)("div",{className:"kb-step-header",children:(0,fi.jsxs)("div",{className:"kb-step-header-content",children:[(0,fi.jsx)("div",{className:"kb-step-icon",children:(0,fi.jsx)(Ni,{className:"kb-step-icon-svg"})}),(0,fi.jsx)("h2",{className:"kb-step-title",children:"Review & Publish"}),(0,fi.jsx)("p",{className:"kb-step-description",children:"Final check before saving"})]})}),(0,fi.jsxs)("div",{children:[(0,fi.jsx)("div",{className:"bg-muted/30 rounded-xl p-6 text-center",children:(0,fi.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:"Use the live preview above to verify all fields are correct before publishing your entry."})}),(0,fi.jsxs)("div",{className:"kb-action-bar",children:[(0,fi.jsx)("div",{className:"flex gap-3",children:(0,fi.jsx)(Ho,{type:"button",variant:"outline",onClick:()=>$(!0),className:"h-12 px-10 min-w-[130px]",children:"Cancel"})}),(0,fi.jsxs)("div",{className:"flex gap-3",children:[(0,fi.jsx)(Ho,{type:"button",variant:"outline",onClick:_e,className:"h-12 px-10 min-w-[130px] !text-black dark:!text-white border-2 border-orange-500",children:"Previous"}),(0,fi.jsx)(Ho,{type:"submit",disabled:ce||o||Q&&Q.length>0,onClick:e=>{console.log("\ud83d\udd18 CREATE ENTRY BUTTON CLICKED"),console.log("\ud83d\udd18 Button disabled state:",ce||o||Q&&Q.length>0),console.log("\ud83d\udd18 isSubmitting:",ce),console.log("\ud83d\udd18 isUpdatingEntry:",o),console.log("\ud83d\udd18 nearDuplicates:",Q);const t=S();console.log("\ud83d\udd18 Form values:",t),console.log("\ud83d\udd18 Form errors:",t),C().then(e=>{console.log("\ud83d\udd18 Form validation result:",e),e||console.log("\ud83d\udd18 Form validation failed - check console for errors")})},className:"flex items-center gap-3 px-12 min-w-[160px] py-3 h-12 transition-all duration-200 ".concat(ce||o||Q&&Q.length>0?"bg-gray-400 cursor-not-allowed shadow-none":"bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl"),children:ce||o?(0,fi.jsxs)(fi.Fragment,{children:[(0,fi.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Updating...":"Creating..."]}):h?"Update Entry":"Create Entry"})]})]})]})]}):null})})]})]}),(0,fi.jsx)(Jl,{isOpen:W,onClose:()=>q(!1),title:"Draft saved",subtitle:null,children:(0,fi.jsx)("div",{className:"text-center p-4",children:(0,fi.jsx)("p",{className:"text-sm text-gray-600",children:"Your draft has been saved locally."})})}),(0,fi.jsx)(Jl,{isOpen:se,onClose:()=>ie(!1),title:"Draft restored",subtitle:null,children:(0,fi.jsx)("div",{className:"text-center p-4",children:(0,fi.jsx)("p",{className:"text-sm text-gray-600",children:"Your previous draft has been restored. All your inputs have been preserved."})})}),(0,fi.jsx)(Jl,{isOpen:H,onClose:()=>$(!1),title:"Are you sure you want to cancel?",subtitle:"This will delete all your current inputs in the forms.",children:(0,fi.jsxs)("div",{className:"modal-buttons",children:[(0,fi.jsx)("button",{className:"modal-button danger",onClick:()=>{try{localStorage.removeItem("kb_entry_draft"),localStorage.removeItem("kb_draft"),localStorage.removeItem("kb_drafts"),Object.keys(localStorage).forEach(e=>{(e.startsWith("kb_entry_")||e.startsWith("entry_draft_")||e.startsWith("kb_draft")||e.includes("draft")||e.includes("autosave"))&&localStorage.removeItem(e)}),console.log("\ud83e\uddf9 Cleared all drafts on modal cancel")}catch(ou){console.warn("Failed to clear drafts on modal cancel:",ou)}$(!1),s()},children:"Yes, go to home"}),(0,fi.jsx)("button",{className:"modal-button cancel",onClick:()=>$(!1),children:"No, stay here"})]})}),(0,fi.jsx)(Jl,{isOpen:Z,onClose:()=>J(!1),title:"Detected Internal Citation",subtitle:Y,children:(0,fi.jsxs)("div",{className:"modal-buttons",children:[(0,fi.jsx)("button",{className:"modal-button orange",onClick:async()=>{console.log("\ud83d\udd0d User confirmed to create entry despite internal citation suggestions"),J(!1);try{sessionStorage.removeItem("hasInternalSuggestion")}catch(t){}const e=S();console.log("\ud83d\udd0d Re-triggering submission after internal citation modal confirmation:",e),await ke(e,!0)},children:"Yes, create entry"}),(0,fi.jsx)("button",{className:"modal-button orange-outline",onClick:()=>{J(!1)},children:"Go Back"})]})})]})})}))}function lc(e){let{control:t,register:n,watch:r,setValue:a}=e;const{fields:s,append:i,remove:o}=Ir({name:"source_urls",control:t});return console.log("UrlArray - fields:",s),console.log("UrlArray - fields length:",s.length),(0,fi.jsx)("div",{className:"space-y-2",children:(0,fi.jsxs)("div",{className:"space-y-2",children:[s.map((e,t)=>(0,fi.jsxs)("div",{className:"flex gap-2",children:[(0,fi.jsx)("input",c(c({},n("source_urls.".concat(t))),{},{placeholder:"e.g., https://official-government-website.gov.ph",type:"url",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors mb-2"})),t>0&&(0,fi.jsx)("button",{type:"button",onClick:()=>o(t),className:"w-12 h-[48px] bg-red-600 text-white rounded-xl hover:bg-red-600 transition-colors flex items-center justify-center",title:"Remove URL",children:(0,fi.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,fi.jsx)("polyline",{points:"3,6 5,6 21,6"}),(0,fi.jsx)("path",{d:"m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"}),(0,fi.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,fi.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]},e.id)),(0,fi.jsx)(Ho,{type:"button",variant:"success",onClick:()=>{console.log("Adding new URL field"),i("")},className:"w-full px-4 py-4 mt-6",children:"+ Add Item"})]})})}function cc(e){let{control:t,register:n,watch:a}=e;const{append:s,remove:i}=Ir({name:"tags",control:t}),o=(a("tags")||[]).filter(e=>e&&e.trim().length>0),[l,c]=r.useState("");return(0,fi.jsxs)("div",{className:"space-y-3",children:[(0,fi.jsx)("input",{className:"kb-input",placeholder:"tag\u2026 (press ENTER to add)",value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),(()=>{const e=l.trim();e&&(c(""),s(e))})())}}),Array.isArray(o)&&o.filter(e=>e&&e.trim().length>0).length>0&&(0,fi.jsx)("div",{className:"flex flex-wrap gap-2 kb-chip-list",children:o.map((e,t)=>(0,fi.jsxs)("div",{className:"relative group",children:[(0,fi.jsx)("span",{className:"kb-chip kb-chip-preview pr-8",children:e}),(0,fi.jsx)("button",{type:"button",className:"kb-chip-remove","aria-label":"Remove ".concat(e),onClick:()=>i(t),children:"\xd7"})]},"".concat(e,"-").concat(t)))})]})}const uc={constitution_provision:{label:"Constitution Provision",description:"Article/Section of the PH Constitution",fields:{}},statute_section:{label:"Statute Section",description:"RA/RPC section (incl. IRR content if needed)",fields:{elements:{type:"array",label:"Elements",required:!1},penalties:{type:"array",label:"Penalties",required:!1},related_sections:{type:"array",label:"Related Sections",required:!1}}},city_ordinance_section:{label:"City Ordinance Section",description:"Cebu City ordinance section",fields:{elements:{type:"array",label:"Elements",required:!1},penalties:{type:"array",label:"Penalties",required:!1},related_sections:{type:"array",label:"Related Sections",required:!1}}},rule_of_court:{label:"Rule of Court",description:"Rule & Section (Criminal Procedure)",fields:{rule_no:{type:"string",label:"Rule Number",required:!0},section_no:{type:"string",label:"Section Number",required:!0},triggers:{type:"array",label:"Triggers",required:!1},time_limits:{type:"array",label:"Time Limits",required:!1}}},agency_circular:{label:"Agency Circular",description:"LTO/PNP/other agency circulars & admin orders",fields:{circular_no:{type:"string",label:"Circular Number",required:!0},section_no:{type:"string",label:"Section Number",required:!1},applicability:{type:"array",label:"Applicability",required:!1},legal_bases:{type:"array",label:"Legal Bases",required:!1}}},doj_issuance:{label:"DOJ Issuance",description:"DOJ circular/opinion/guideline",fields:{issuance_no:{type:"string",label:"Issuance Number",required:!0},applicability:{type:"array",label:"Applicability",required:!1},supersedes:{type:"array",label:"Supersedes",required:!1},legal_bases:{type:"array",label:"Legal Bases",required:!1}}},executive_issuance:{label:"Executive Issuance",description:"Official Gazette (EOs, newly signed RAs, etc.)",fields:{instrument_no:{type:"string",label:"Instrument Number",required:!0},applicability:{type:"array",label:"Applicability",required:!1},supersedes:{type:"array",label:"Supersedes",required:!1},legal_bases:{type:"array",label:"Legal Bases",required:!1}}},pnp_sop:{label:"PNP SOP",description:"PNP manual/SOP item",fields:{steps_brief:{type:"array",label:"Steps Brief",required:!0},legal_bases:{type:"array",label:"Legal Bases",required:!0},forms_required:{type:"array",label:"Forms Required",required:!1},failure_states:{type:"array",label:"Failure States",required:!1}}},incident_checklist:{label:"Incident Checklist",description:"Guided template (phases \u2192 steps)",fields:{incident:{type:"string",label:"Incident",required:!0},phases:{type:"array",label:"Phases",required:!0},forms:{type:"array",label:"Forms",required:!1},handoff:{type:"array",label:"Handoff",required:!1},rights_callouts:{type:"array",label:"Rights Callouts",required:!1}}},rights_advisory:{label:"Rights Advisory",description:"Bill of Rights/CHR-style rights card",fields:{rights_scope:{type:"select",label:"Rights Scope",required:!0,options:[{value:"arrest",label:"Arrest"},{value:"search",label:"Search"},{value:"detention",label:"Detention"},{value:"counsel",label:"Counsel"},{value:"GBV",label:"GBV"},{value:"minors",label:"Minors"},{value:"privacy",label:"Privacy"},{value:"traffic stop",label:"Traffic Stop"},{value:"protective orders",label:"Protective Orders"},{value:"fair trial",label:"Fair Trial"},{value:"freedom of expression",label:"Freedom of Expression"},{value:"legal aid access",label:"Legal Aid Access"},{value:"complaint filing",label:"Complaint Filing"},{value:"labor rights",label:"Labor Rights"},{value:"consumer rights",label:"Consumer Rights"},{value:"housing/land rights",label:"Housing/Land Rights"},{value:"health/education",label:"Health/Education"},{value:"Other",label:"Other (type your own)"}]},advice_points:{type:"array",label:"Advice Points",required:!0},legal_bases:{type:"array",label:"Legal Bases",required:!0}}}},dc=[{value:"PH",label:"Philippines (National)",description:"National laws and regulations"},{value:"PH-CEBU-CITY",label:"Cebu City",description:"Cebu City ordinances and regulations"},{value:"PH-CEBU-PROVINCE",label:"Cebu Province",description:"Cebu Provincial ordinances and regulations"},{value:"PH-MANILA",label:"Manila",description:"Manila City ordinances and regulations"},{value:"PH-QUEZON-CITY",label:"Quezon City",description:"Quezon City ordinances and regulations"},{value:"PH-MAKATI",label:"Makati",description:"Makati City ordinances and regulations"},{value:"PH-PASIG",label:"Pasig",description:"Pasig City ordinances and regulations"},{value:"PH-MANDALUYONG",label:"Mandaluyong",description:"Mandaluyong City ordinances and regulations"},{value:"PH-MARIKINA",label:"Marikina",description:"Marikina City ordinances and regulations"},{value:"PH-PARANAQUE",label:"Para\xf1aque",description:"Para\xf1aque City ordinances and regulations"},{value:"PH-LAS-PINAS",label:"Las Pi\xf1as",description:"Las Pi\xf1as City ordinances and regulations"},{value:"PH-MUNTINLUPA",label:"Muntinlupa",description:"Muntinlupa City ordinances and regulations"},{value:"PH-TAGUIG",label:"Taguig",description:"Taguig City ordinances and regulations"},{value:"PH-PATEROS",label:"Pateros",description:"Pateros ordinances and regulations"},{value:"PH-VALENZUELA",label:"Valenzuela",description:"Valenzuela City ordinances and regulations"},{value:"PH-CALOOCAN",label:"Caloocan",description:"Caloocan City ordinances and regulations"},{value:"PH-MALABON",label:"Malabon",description:"Malabon City ordinances and regulations"},{value:"PH-NAVOTAS",label:"Navotas",description:"Navotas City ordinances and regulations"},{value:"PH-SAN-JUAN",label:"San Juan",description:"San Juan City ordinances and regulations"},{value:"PH-PASIG",label:"Pasig",description:"Pasig City ordinances and regulations"}],fc=e=>dc.find(t=>t.value===e)||null,pc=e=>{let{entry:t,onEdit:n,onDelete:a,onExport:s,teamMemberNames:i={}}=e;const o=he(),{user:l}=Gl(),[u,d]=(0,r.useState)(t);(0,r.useEffect)(()=>{d(t);try{const e=document.querySelector(".entry-detail-overlay .entry-view-container");e&&(e.scrollTop=0)}catch(e){}},[t]);const[f,p]=(0,r.useState)(!1);if(!u)return(0,fi.jsxs)("div",{className:"no-entry",children:[(0,fi.jsx)("h3",{children:"Entry not found"}),(0,fi.jsx)("p",{children:"The requested entry could not be found."}),(0,fi.jsx)("button",{onClick:()=>o("/dashboard"),className:"btn-primary",children:"Back to List"})]});const m=(h=u.type,uc[h]||null);var h;const g=fc(u.jurisdiction),y=e=>e?new Date(e).toLocaleDateString():"Not specified",v=e=>e?new Date(e).toLocaleString():"Not specified",b=e=>e&&Array.isArray(e)&&0!==e.length?(0,fi.jsxs)("div",{className:"field-group",children:[(0,fi.jsx)("h4",{children:"Legal Bases"}),(0,fi.jsx)("div",{className:"legal-bases-grid",children:e.map((e,t)=>(0,fi.jsxs)("div",{className:"legal-basis-card clickable",onClick:async()=>{if("internal"===(null===e||void 0===e?void 0:e.type)&&null!==e&&void 0!==e&&e.entry_id){const t=await Pt(e.entry_id);t&&window.dispatchEvent(new CustomEvent("open-entry-detail",{detail:{entry:c(c({},t),{},{id:t.entry_id})}}))}},children:[(0,fi.jsxs)("div",{className:"basis-header",children:[(0,fi.jsx)("span",{className:"basis-type-pill ".concat(e.type),children:"internal"===e.type?"Internal":"External"}),e.topic&&(0,fi.jsx)("span",{className:"basis-topic-pill",children:e.topic})]}),(0,fi.jsx)("div",{className:"basis-title",children:"internal"===e.type?(0,fi.jsx)("span",{className:"link-button",onClick:async()=>{const t=e.entry_id;if(t)try{const e=await Pt(t);e&&window.dispatchEvent(new CustomEvent("open-entry-detail",{detail:{entry:c(c({},e),{},{id:e.entry_id}),entryId:t}}))}catch(n){}},children:e.title||e.entry_id}):(0,fi.jsx)("span",{className:"basis-title-text",children:e.title||e.citation})}),(0,fi.jsx)("div",{className:"basis-citation",children:"internal"===e.type?(0,fi.jsx)("span",{className:"citation-text",children:e.canonical_citation||e.entry_id}):(0,fi.jsx)("span",{className:"citation-text",children:e.citation})}),(e.topic||e.summary)&&(0,fi.jsx)("div",{className:"basis-description",children:"internal"===e.type?(0,fi.jsx)("span",{className:"description-text",children:e.summary||e.topic}):(0,fi.jsx)("span",{className:"description-text",children:e.topic})}),e.note&&(0,fi.jsx)("div",{className:"basis-note",children:e.note}),e.url&&(0,fi.jsx)("div",{className:"basis-url",children:(0,fi.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"url-link",children:e.url})})]},t))})]}):null,x=()=>{if(!u.type)return null;const e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r="Empty";if(null!==t&&void 0!==t&&""!==t&&(r="array"===n&&Array.isArray(t)?t.length>0?t.join(", "):"Empty":"object"===n&&"object"===typeof t?JSON.stringify(t,null,2):"date"===n&&t?y(t):String(t)),"Prescriptive Period"===e)try{let e=t;if("string"===typeof t&&t.startsWith("{")&&(e=JSON.parse(t)),e&&"object"===typeof e&&void 0!==e.value&&void 0!==e.unit){const t=e.value,n=e.unit;r=t&&!isNaN(t)&&Number.isInteger(Number(t))&&Number(t)>0&&n&&"NA"!==n&&"na"!==n&&"N/A"!==n&&"Not Available"!==n&&"Not available"!==n?"".concat(t," ").concat(n):"No Prescriptive Period"}else r="No Prescriptive Period"}catch(a){r="No Prescriptive Period"}return(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsxs)("span",{className:"label",children:[e,":"]}),(0,fi.jsx)("span",{className:"value",children:r})]},e)},t=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,fi.jsxs)("div",{className:"field-group",children:[(0,fi.jsx)("h4",{className:"field-group-title",children:n}),(0,fi.jsx)("div",{className:"field-group-content",children:t&&Array.isArray(t)&&t.length>0?r?t.map((e,t)=>r(e,t)):(0,fi.jsx)("ul",{className:"array-list",children:t.map((e,t)=>(0,fi.jsx)("li",{className:"array-item",children:"object"===typeof e?JSON.stringify(e,null,2):String(e)},t))}):(0,fi.jsx)("div",{className:"empty-field",children:"Empty"})})]},e)},n=(()=>{const e=u.prescriptive_period;if(!e)return null;try{if("string"===typeof e){const t=JSON.parse(e);if(t&&t.value&&t.unit)return"".concat(t.value," ").concat(String(t.unit).replace(/s$/,""),"s")}if("object"===typeof e&&e.value&&e.unit)return"".concat(e.value," ").concat(String(e.unit).replace(/s$/,""),"s")}catch(t){}return String(e)})(),r=(e,t)=>{if(!e||"object"!==typeof e)return null;const n=[];return"republic_act"===t&&e.ra_number&&n.push({label:"Republic Act Number",value:"RA ".concat(e.ra_number)}),"commonwealth_act"===t&&e.commonwealth_act_number&&n.push({label:"Commonwealth Act Number",value:"CA ".concat(e.commonwealth_act_number)}),"mga_batas_pambansa"===t&&e.mbp_number&&n.push({label:"Batas Pambansa Number",value:"BP ".concat(e.mbp_number)}),"act"===t&&e.act_number&&n.push({label:"Act Number",value:"Act ".concat(e.act_number)}),e.section_number&&n.push({label:"Section Number",value:e.section_number}),0===n.length?null:(0,fi.jsxs)("div",{className:"field-group",children:[(0,fi.jsx)("h4",{className:"field-group-title",children:"Statute Details"}),(0,fi.jsx)("div",{className:"field-group-content",children:(0,fi.jsx)("div",{className:"info-grid",children:n.map((e,t)=>(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsxs)("span",{className:"label",children:[e.label,":"]}),(0,fi.jsx)("span",{className:"value",children:e.value})]},t))})})]})};switch(u.type){case"statute_section":return(0,fi.jsxs)("div",{className:"type-specific-fields",children:[(0,fi.jsxs)("div",{className:"info-grid",children:[e("Prescriptive Period",n||"Empty"),e("Standard of Proof",u.standard_of_proof)]}),t("elements",u.elements,"Elements"),t("penalties",u.penalties,"Penalties"),t("defenses",u.defenses,"Defenses"),r(u.subtype_fields,u.entry_subtype)]});case"city_ordinance_section":return(0,fi.jsx)("div",{className:"type-specific-fields",children:(0,fi.jsxs)("div",{className:"info-grid",children:[e("Elements",u.elements,"array"),e("Penalties",u.penalties,"array"),e("Defenses",u.defenses,"array")]})});case"rule_of_court":return(0,fi.jsxs)("div",{className:"type-specific-fields",children:[(0,fi.jsxs)("div",{className:"info-grid",children:[e("Rule Number",u.rule_no),e("Section Number",u.section_no)]}),t("triggers",u.triggers,"Triggers"),t("time_limits",u.time_limits,"Time Limits"),t("required_forms",u.required_forms,"Required Forms")]});case"agency_circular":return(0,fi.jsxs)("div",{className:"type-specific-fields",children:[(0,fi.jsxs)("div",{className:"info-grid",children:[e("Circular Number",u.circular_no),e("Section Number",u.section_no)]}),t("applicability",u.applicability,"Applicability"),t("supersedes",u.supersedes,"Supersedes")]});case"doj_issuance":return(0,fi.jsxs)("div",{className:"type-specific-fields",children:[(0,fi.jsx)("div",{className:"info-grid",children:e("Issuance Number",u.issuance_no)}),t("applicability",u.applicability,"Applicability"),t("supersedes",u.supersedes,"Supersedes")]});case"executive_issuance":return(0,fi.jsxs)("div",{className:"type-specific-fields",children:[(0,fi.jsx)("div",{className:"info-grid",children:e("Instrument Number",u.instrument_no)}),t("applicability",u.applicability,"Applicability"),t("supersedes",u.supersedes,"Supersedes")]});case"pnp_sop":return(0,fi.jsxs)("div",{className:"type-specific-fields",children:[t("steps_brief",u.steps_brief,"Steps Brief"),t("forms_required",u.forms_required,"Forms Required"),t("failure_states",u.failure_states,"Failure States")]});case"incident_checklist":return(0,fi.jsxs)("div",{className:"type-specific-fields",children:[(0,fi.jsx)("div",{className:"info-grid",children:e("Incident",u.incident)}),(a=u.phases,a&&Array.isArray(a)&&0!==a.length?(0,fi.jsxs)("div",{className:"field-group",children:[(0,fi.jsx)("h4",{className:"field-group-title",children:"Phases"}),(0,fi.jsx)("div",{className:"field-group-content",children:(0,fi.jsx)("div",{className:"phases-list",children:a.map((e,t)=>(0,fi.jsxs)("div",{className:"phase-item",children:[(0,fi.jsx)("h5",{className:"phase-name",children:e.name}),e.steps&&Array.isArray(e.steps)&&e.steps.length>0&&(0,fi.jsx)("ol",{className:"steps-list",children:e.steps.map((e,t)=>(0,fi.jsxs)("li",{className:"step-item",children:[(0,fi.jsx)("div",{className:"step-text",children:e.text}),e.condition&&(0,fi.jsxs)("div",{className:"step-condition",children:["Condition: ",e.condition]}),e.deadline&&(0,fi.jsxs)("div",{className:"step-deadline",children:["Deadline: ",e.deadline]}),e.evidence_required&&Array.isArray(e.evidence_required)&&e.evidence_required.length>0&&(0,fi.jsxs)("div",{className:"step-evidence",children:["Evidence: ",e.evidence_required.join(", ")]}),e.failure_state&&(0,fi.jsxs)("div",{className:"step-failure",children:["Failure: ",e.failure_state]})]},t))})]},t))})})]}):null),t("forms",u.forms,"Forms"),t("handoff",u.handoff,"Handoff"),t("rights_callouts",u.rights_callouts,"Rights Callouts")]});case"rights_advisory":return(0,fi.jsxs)("div",{className:"type-specific-fields",children:[(0,fi.jsx)("div",{className:"info-grid",children:e("Rights Scope",u.rights_scope)}),t("advice_points",u.advice_points,"Advice Points")]});case"constitution_provision":return null;default:return(0,fi.jsx)("div",{className:"type-specific-fields",children:(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Entry Type:"}),(0,fi.jsx)("span",{className:"value",children:u.type})]})})}var a};return(0,fi.jsx)("div",{className:"entry-view-container",children:(0,fi.jsxs)("div",{className:"entry-view-content",children:[(0,fi.jsxs)("div",{className:"entry-header",children:[(0,fi.jsxs)("div",{className:"entry-title-section",children:[(0,fi.jsxs)("div",{className:"entry-title-row",children:[(0,fi.jsx)("h1",{children:u.title}),(0,fi.jsx)("span",{className:"entry-id-badge",children:u.entry_id})]}),(0,fi.jsxs)("div",{className:"entry-badges-row",children:[(0,fi.jsx)("span",{className:"entry-type-badge",children:m?m.label:u.type}),(0,fi.jsx)("span",{className:"status-badge status-".concat(u.status),children:u.status})]}),u.offline&&u.offline.pack_include&&(0,fi.jsx)("div",{className:"offline-pack-indicator",children:"Included in Offline Pack"})]}),(0,fi.jsxs)("div",{className:"entry-actions",children:[(0,fi.jsx)("button",{onClick:s,className:"btn-icon",title:"Export Entry",children:(0,fi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,fi.jsx)("path",{d:"M7 17L17 7"}),(0,fi.jsx)("path",{d:"M7 7h10v10"})]})}),(0,fi.jsx)("button",{onClick:n,className:"btn-icon",title:"Edit",children:(0,fi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,fi.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,fi.jsx)("path",{d:"m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,fi.jsx)("button",{onClick:a,className:"btn-icon btn-icon-danger",title:"Delete",children:(0,fi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,fi.jsx)("polyline",{points:"3,6 5,6 21,6"}),(0,fi.jsx)("path",{d:"m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"}),(0,fi.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,fi.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]})]}),(0,fi.jsxs)("div",{className:"entry-sections",children:[(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Basic Information"}),(0,fi.jsxs)("div",{className:"info-grid",children:[(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Visibility:"}),(0,fi.jsx)("span",{className:"value",children:"GLI & CPA"})]}),(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Jurisdiction:"}),(0,fi.jsx)("span",{className:"value",children:g?g.label:u.jurisdiction})]}),(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Law Family:"}),(0,fi.jsx)("span",{className:"value",children:u.law_family?u.law_family.charAt(0).toUpperCase()+u.law_family.slice(1).replace(/_/g," "):"Not specified"})]}),u.section_id&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Section ID:"}),(0,fi.jsx)("span",{className:"value",children:u.section_id})]}),(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Canonical Citation:"}),(0,fi.jsx)("span",{className:"value",children:u.canonical_citation})]})]})]}),(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Dates"}),(0,fi.jsxs)("div",{className:"info-grid",children:[(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Entry Created:"}),(0,fi.jsx)("span",{className:"value",children:v(u.created_at)})]}),(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Effective Date:"}),(0,fi.jsx)("span",{className:"value",children:y(u.effective_date)})]}),u.amendment_date&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Amendment Date:"}),(0,fi.jsx)("span",{className:"value",children:y(u.amendment_date)})]}),(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Last Updated:"}),(0,fi.jsx)("span",{className:"value",children:v(u.updated_at)})]})]})]}),u.source_urls&&u.source_urls.length>0&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Source URLs"}),(0,fi.jsx)("div",{className:"source-urls",children:u.source_urls.map((e,t)=>{let n=e;return"string"===typeof e&&(n=e.replace(/#artunknown/g,"").replace(/#ordinance#artunknown/g,"#ordinance"),n=n.replace(/#$/,"")),(0,fi.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"source-url",children:n},t)})})]}),u.summary&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Summary"}),(0,fi.jsx)("div",{className:"summary-text",children:u.summary})]}),u.tags&&u.tags.length>0&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Tags"}),(0,fi.jsx)("div",{className:"tags-list",children:u.tags.map(e=>(0,fi.jsx)("span",{className:"tag",children:e},e))})]}),u.key_concepts&&u.key_concepts.length>0&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Key Concepts"}),(0,fi.jsx)("div",{className:"tags-list",children:u.key_concepts.map(e=>(0,fi.jsx)("span",{className:"tag tag-concept",children:e},e))})]}),u.elements&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Legal Elements"}),(0,fi.jsx)("div",{className:"text-content",children:u.elements})]}),u.triggers&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Triggers"}),(0,fi.jsx)("div",{className:"text-content",children:u.triggers})]}),(u.violation_code||u.violation_name)&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Violation Information"}),(0,fi.jsxs)("div",{className:"info-grid",children:[u.violation_code&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Violation Code:"}),(0,fi.jsx)("span",{className:"value",children:u.violation_code})]}),u.violation_name&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Violation Name:"}),(0,fi.jsx)("span",{className:"value",children:u.violation_name})]}),u.fine_schedule&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Fine Schedule:"}),(0,fi.jsx)("span",{className:"value",children:u.fine_schedule})]}),u.license_action&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"License Action:"}),(0,fi.jsx)("span",{className:"value",children:u.license_action})]})]})]}),(u.apprehension_flow||u.incident)&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Enforcement Process"}),(0,fi.jsxs)("div",{className:"info-grid",children:[u.apprehension_flow&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Apprehension Flow:"}),(0,fi.jsx)("span",{className:"value",children:u.apprehension_flow})]}),u.incident&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Incident Definition:"}),(0,fi.jsx)("span",{className:"value",children:u.incident})]})]})]}),(u.phases||u.forms||u.handoff)&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Process Information"}),(0,fi.jsxs)("div",{className:"info-grid",children:[u.phases&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Phases:"}),(0,fi.jsx)("span",{className:"value",children:"string"===typeof u.phases?u.phases:Array.isArray(u.phases)?u.phases.join(", "):"object"===typeof u.phases?JSON.stringify(u.phases).replace(/[{}"]/g,"").replace(/,/g,", "):u.phases})]}),u.forms&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Forms:"}),(0,fi.jsx)("span",{className:"value",children:"string"===typeof u.forms?u.forms:Array.isArray(u.forms)?u.forms.join(", "):"object"===typeof u.forms?JSON.stringify(u.forms).replace(/[{}"]/g,"").replace(/,/g,", "):u.forms})]}),u.handoff&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Handoff Procedures:"}),(0,fi.jsx)("span",{className:"value",children:"string"===typeof u.handoff?u.handoff:Array.isArray(u.handoff)?u.handoff.join(", "):"object"===typeof u.handoff?JSON.stringify(u.handoff).replace(/[{}"]/g,"").replace(/,/g,", "):u.handoff})]})]})]}),(u.rights_callouts||u.rights_scope||u.advice_points)&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Rights and Protections"}),(0,fi.jsxs)("div",{className:"info-grid",children:[u.rights_callouts&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Rights Callouts:"}),(0,fi.jsx)("span",{className:"value",children:u.rights_callouts})]}),u.rights_scope&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Rights Scope:"}),(0,fi.jsx)("span",{className:"value",children:u.rights_scope})]}),u.advice_points&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Advice Points:"}),(0,fi.jsx)("span",{className:"value",children:u.advice_points})]})]})]}),(u.jurisprudence||u.legal_bases)&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Legal Context"}),(0,fi.jsxs)("div",{className:"info-grid",children:[u.jurisprudence&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Jurisprudence:"}),(0,fi.jsx)("span",{className:"value",children:u.jurisprudence})]}),u.legal_bases&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Legal Bases:"}),(0,fi.jsx)("span",{className:"value",children:u.legal_bases})]})]})]}),u.text&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Full Text Content"}),(0,fi.jsx)("div",{className:"text-content",children:u.text})]}),x()&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsxs)("h3",{children:[m?m.label:"Entry"," Details"]}),x()]}),(b(u.legal_bases)||u.related_sections&&Array.isArray(u.related_sections)&&u.related_sections.length>0)&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h3",{children:"Relations"}),b(u.legal_bases),u.related_sections&&Array.isArray(u.related_sections)&&u.related_sections.length>0&&(0,fi.jsxs)("div",{className:"field-group",children:[(0,fi.jsx)("h4",{children:"Related Sections"}),(0,fi.jsx)("div",{className:"related-sections-grid",children:u.related_sections.map((e,t)=>(0,fi.jsxs)("div",{className:"legal-basis-card clickable",onClick:async()=>{const t=null===e||void 0===e?void 0:e.entry_id;try{if(t){const e=await Pt(t);if(e)return void window.dispatchEvent(new CustomEvent("open-entry-detail",{detail:{entry:c(c({},e),{},{id:e.entry_id}),entryId:t}}))}}catch(n){}try{const e=new CustomEvent("toast",{detail:{type:"info",message:"This entry is not in the KB yet",duration:2e3}});window.dispatchEvent(e)}catch(r){}},children:[(0,fi.jsx)("div",{className:"basis-header"}),(0,fi.jsx)("div",{className:"basis-title",children:(0,fi.jsx)("span",{className:"basis-title-text",children:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.citation)||String(e)})}),(0,fi.jsx)("div",{className:"basis-citation",children:"internal"===(null===e||void 0===e?void 0:e.type)?(0,fi.jsx)("span",{className:"citation-text",children:(null===e||void 0===e?void 0:e.canonical_citation)||(null===e||void 0===e?void 0:e.entry_id)}):(0,fi.jsx)("span",{className:"citation-text",children:(null===e||void 0===e?void 0:e.citation)||String(e)})}),((null===e||void 0===e?void 0:e.topic)||(null===e||void 0===e?void 0:e.summary))&&(0,fi.jsx)("div",{className:"basis-description",children:"internal"===(null===e||void 0===e?void 0:e.type)?(0,fi.jsx)("span",{className:"description-text",children:(null===e||void 0===e?void 0:e.summary)||(null===e||void 0===e?void 0:e.topic)}):(0,fi.jsx)("span",{className:"description-text",children:null===e||void 0===e?void 0:e.topic})}),(null===e||void 0===e?void 0:e.note)&&(0,fi.jsx)("div",{className:"basis-note",children:e.note}),(null===e||void 0===e?void 0:e.url)&&(0,fi.jsx)("div",{className:"basis-url",children:(0,fi.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"url-link",children:e.url})})]},t))})]})]})]})]})})},mc=e=>{let{currentPage:t,totalPages:n,onPageChange:a,totalItems:s,itemsPerPage:i,className:o=""}=e;const l=(t-1)*i+1,c=Math.min(t*i,s),u=(()=>{const e=[];if(n<=7)for(let t=1;t<=n;t++)e.push(t);else if(e.push(1),t<=4){for(let t=2;t<=5;t++)e.push(t);e.push("..."),e.push(n)}else if(t>=n-3){e.push("...");for(let t=n-4;t<=n;t++)e.push(t)}else{e.push("...");for(let n=t-1;n<=t+1;n++)e.push(n);e.push("..."),e.push(n)}return e})();return n<=1?null:(0,fi.jsxs)("div",{className:"page-navigator ".concat(o),children:[(0,fi.jsx)("div",{className:"page-info",children:(0,fi.jsxs)("span",{className:"page-info-text",children:["Showing ",l,"-",c," of ",s," entries"]})}),(0,fi.jsxs)("div",{className:"page-controls",children:[(0,fi.jsx)("button",{onClick:()=>a(1),disabled:1===t,className:"page-btn page-btn-nav",title:"First page",children:(0,fi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,fi.jsx)("polyline",{points:"11,17 6,12 11,7"}),(0,fi.jsx)("polyline",{points:"18,17 13,12 18,7"})]})}),(0,fi.jsx)("button",{onClick:()=>a(t-1),disabled:1===t,className:"page-btn page-btn-nav",title:"Previous page",children:(0,fi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,fi.jsx)("polyline",{points:"15,18 9,12 15,6"})})}),(0,fi.jsx)("div",{className:"page-numbers",children:u.map((e,n)=>(0,fi.jsx)(r.Fragment,{children:"..."===e?(0,fi.jsx)("span",{className:"page-ellipsis",children:"..."}):(0,fi.jsx)("button",{onClick:()=>a(e),className:"page-btn page-btn-number ".concat(t===e?"page-btn-active":""),children:e})},n))}),(0,fi.jsx)("button",{onClick:()=>a(t+1),disabled:t===n,className:"page-btn page-btn-nav",title:"Next page",children:(0,fi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,fi.jsx)("polyline",{points:"9,18 15,12 9,6"})})}),(0,fi.jsx)("button",{onClick:()=>a(n),disabled:t===n,className:"page-btn page-btn-nav",title:"Last page",children:(0,fi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,fi.jsx)("polyline",{points:"13,17 18,12 13,7"}),(0,fi.jsx)("polyline",{points:"6,17 11,12 6,7"})]})})]})]})},hc={constitution_provision:[{value:"constitution_1987",label:"1987 Constitution"},{value:"constitution_1986",label:"1986 Constitution"},{value:"constitution_1973",label:"1973 Constitution"},{value:"constitution_1935",label:"1935 Constitution"},{value:"constitution_malolos",label:"Malolos Constitution"}],statute_section:[{value:"republic_act",label:"Republic Act"},{value:"commonwealth_act",label:"Commonwealth Act"},{value:"mga_batas_pambansa",label:"Mga Batas Pambansa"},{value:"act",label:"Act"}],rule_of_court_provision:[{value:"roc_criminal_proc_1985",label:"Criminal Procedure 1985"},{value:"roc_civil_proc",label:"Civil Procedure"},{value:"roc_evidence_2019",label:"Evidence 2019"},{value:"roc_special_proceedings",label:"Special Proceedings"},{value:"roc_other",label:"Other Rules"}]},gc=e=>hc[e]||[],yc=e=>{let{entries:t,onViewEntry:n,onEditEntry:a,onDeleteEntry:s,onExportEntry:i,searchEntries:o,teamMemberNames:l={}}=e;const[u,d]=(0,r.useState)(null),[f,p]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=async e=>{var t,n;const r=null===e||void 0===e||null===(t=e.detail)||void 0===t?void 0:t.entry,a=null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.entryId;let s=r||null;if(!s&&a)try{const e=await Pt(a);e&&(s=c(c({},e),{},{id:e.entry_id}))}catch(i){}s&&(p(e=>u?[...e,u]:e),d(s),setTimeout(()=>{try{const e=document.querySelector(".entry-detail-overlay .entry-view-container");e&&(e.scrollTop=0)}catch(e){}},0))};return window.addEventListener("open-entry-detail",e),()=>window.removeEventListener("open-entry-detail",e)},[u]),(0,r.useEffect)(()=>{const e=e=>{if("Escape"===e.key&&u)if(f.length>0){const e=f[f.length-1];p(f.slice(0,-1)),d(e)}else d(null)};if(u)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[u,f]),(0,r.useEffect)(()=>{const e=e=>{if(u){if(e.preventDefault(),f.length>0){const e=f[f.length-1];p(f.slice(0,-1)),d(e)}else d(null);window.history.pushState(null,"",window.location.href)}};if(u)return window.history.pushState(null,"",window.location.href),window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[u,f]);const[m,h]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[v,b]=(0,r.useState)(!1),x="true"===String({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE:"http://localhost:4000"}.REACT_APP_USE_SERVER_SEARCH||"true").toLowerCase(),[_,w]=(0,r.useState)([]),[k,j]=(0,r.useState)(null),N=(0,r.useCallback)((e,t)=>x&&e&&"string"===typeof e?(0,fi.jsx)("span",{dangerouslySetInnerHTML:{__html:e.replaceAll("<b>",'<b style="background:#fff3cd;color:#92400e;border-radius:4px;padding:0 2px;">')}}):t,[x]),[S,C]=(0,r.useState)(!1),[D,E]=(0,r.useState)(""),[A,F]=(0,r.useState)({type:"all",subtype:"all",jurisdiction:"all",status:"all",verified:"all",team_member_id:"all"}),[P,T]=(0,r.useState)(1);(0,r.useEffect)(()=>{m!==g&&b(!0);const e=setTimeout(()=>{y(m),b(!1)},300);return()=>clearTimeout(e)},[m,g]);const O=(()=>{const e=["constitution_provision","statute_section","city_ordinance_section","rule_of_court","agency_circular","doj_issuance","executive_issuance","rights_advisory"];return Object.entries(uc).filter(t=>{let[n]=t;return e.includes(n)}).map(e=>{let[t,n]=e;return{value:t,label:n.label,description:n.description}})})(),I=(0,r.useMemo)(()=>o(g,A),[g,A,o,l]);(0,r.useEffect)(()=>{let e=!0;return(async()=>{if(!x)return;const t=String(g||"").trim();if(t)try{b(!0);const n=await Mt({query:t,type:null!==A&&void 0!==A&&A.type&&"all"!==A.type?A.type:void 0,jurisdiction:null!==A&&void 0!==A&&A.jurisdiction&&"all"!==A.jurisdiction?A.jurisdiction:void 0,status:null!==A&&void 0!==A&&A.status&&"all"!==A.status?A.status:void 0,verified:null!==A&&void 0!==A&&A.verified&&"all"!==A.verified?"yes"===A.verified?"yes":"not_verified":void 0,team_member_id:null!==A&&void 0!==A&&A.team_member_id&&"all"!==A.team_member_id?String(A.team_member_id):void 0,limit:50,explain:!0});if(!e)return;const r=Array.isArray(n.results)?n.results.map(e=>c(c({},e),{},{id:e.entry_id||e.id})):[];w(r),j(n.suggestion||null)}catch(ou){e&&(console.warn("Server search failed; using local fallback",ou),w(I),j(null))}finally{e&&b(!1)}else e&&w(I)})(),()=>{e=!1}},[x,g,A,I]),(0,r.useEffect)(()=>{try{localStorage.setItem("entry_filter_snapshot",JSON.stringify(A||{})),localStorage.setItem("entry_search_query",String(g||""))}catch(ou){}},[A,g]);const R=x?_:I,M=(0,r.useMemo)(()=>{const e=Math.ceil(R.length/20),t=20*(P-1),n=t+20;return{totalPages:e,startIndex:t,endIndex:n,paginatedEntries:R.slice(t,n)}},[R,P,20]),{totalPages:L,paginatedEntries:z}=M;(0,r.useEffect)(()=>{T(1)},[g,A,x]),(0,r.useEffect)(()=>{P>L&&L>0&&T(L)},[L,P]);const B=(e,t)=>{"jurisdiction"===e?"other"===t?F(e=>c(c({},e),{},{jurisdiction:D})):(F(e=>c(c({},e),{},{jurisdiction:t})),E("")):F("type"===e?e=>c(c({},e),{},{type:t,subtype:"all"}):n=>c(c({},n),{},{[e]:t}))},V=(0,r.useCallback)(()=>{F({type:"all",subtype:"all",jurisdiction:"all",status:"all",verified:"all",team_member_id:"all"}),h(""),y(""),E("")},[]),U=e=>{const t=O.find(t=>t.value===e);return t?t.label:e},W=(0,r.useCallback)(e=>String(e||"").toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),[]),q=W(g),H=(0,r.useMemo)(()=>{if(!q)return!0;return(x?R:t).some(e=>[e.title,e.entry_id,e.canonical_citation,e.section_id,e.law_family,Array.isArray(e.tags)?e.tags.join(" "):"",e.title&&e.canonical_citation?"".concat(e.title," ").concat(e.canonical_citation):"",e.title&&e.canonical_citation?"".concat(e.canonical_citation," ").concat(e.title):""].some(e=>W(e)===q))},[q,t,R,W,x]);return(0,fi.jsxs)("div",{className:"entry-list-container",children:[(0,fi.jsxs)("div",{className:"search-filters",children:[(0,fi.jsxs)("div",{className:"search-section",children:[(0,fi.jsxs)("div",{className:"search-input-container",children:[(0,fi.jsx)("input",{type:"text",placeholder:"Search entries by title, ID, content, or tags...",value:m,onChange:e=>h(e.target.value),className:"search-input"}),m&&(0,fi.jsx)("button",{type:"button",className:"search-clear-btn",onClick:()=>h(""),"aria-label":"Clear search",title:"Clear",children:"\xd7"}),v&&(0,fi.jsx)("div",{className:"search-loading-indicator",children:(0,fi.jsx)("div",{className:"spinner"})})]}),x&&k&&(0,fi.jsxs)("div",{style:{marginTop:6},children:[(0,fi.jsx)("span",{style:{color:"#6b7280"},children:"Did you mean:\xa0"}),(0,fi.jsx)("button",{type:"button",onClick:()=>h(k),style:{background:"transparent",border:0,color:"#2563eb",cursor:"pointer",textDecoration:"underline",padding:0,fontWeight:600},children:k})]}),(0,fi.jsx)("button",{onClick:()=>C(!S),className:"toggle-filters-btn",children:S?"Hide Filters":"Show Filters"})]}),S&&(0,fi.jsx)(fi.Fragment,{children:(0,fi.jsxs)("div",{className:"filter-row",children:[(0,fi.jsxs)("div",{className:"filter-group",children:[(0,fi.jsx)("label",{children:"Entry Type"}),(0,fi.jsxs)("select",{value:A.type,onChange:e=>B("type",e.target.value),children:[(0,fi.jsx)("option",{value:"all",children:"All Types"}),O.map(e=>(0,fi.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),"all"!==A.type&&gc(A.type).length>0&&(0,fi.jsxs)("div",{className:"filter-group",children:[(0,fi.jsx)("label",{children:"Sub Entry Type"}),(0,fi.jsxs)("select",{value:A.subtype,onChange:e=>B("subtype",e.target.value),children:[(0,fi.jsx)("option",{value:"all",children:"All Subtypes"}),gc(A.type).map(e=>(0,fi.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,fi.jsxs)("div",{className:"filter-group",children:[(0,fi.jsx)("label",{children:"Jurisdiction"}),(0,fi.jsxs)("select",{value:"all"===A.jurisdiction?"all":A.jurisdiction===D?"other":A.jurisdiction,onChange:e=>B("jurisdiction",e.target.value),children:[(0,fi.jsx)("option",{value:"all",children:"All Jurisdictions"}),(0,fi.jsx)("option",{value:"PH",children:"PH Philippines (PH)"}),(0,fi.jsx)("option",{value:"other",children:"Other\u2026"})]}),A.jurisdiction===D&&(0,fi.jsx)("input",{type:"text",placeholder:"e.g., Cavite, Quezon City, Baguio",value:D,onChange:e=>{E(e.target.value),F(t=>c(c({},t),{},{jurisdiction:e.target.value}))},className:"custom-jurisdiction-input",style:{marginTop:"8px",width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),(0,fi.jsxs)("div",{className:"filter-group",children:[(0,fi.jsx)("label",{children:"Status"}),(0,fi.jsxs)("select",{value:A.status,onChange:e=>B("status",e.target.value),children:[(0,fi.jsx)("option",{value:"all",children:"All"}),(0,fi.jsx)("option",{value:"released",children:"Released"}),(0,fi.jsx)("option",{value:"unreleased",children:"Unreleased"})]})]}),(0,fi.jsx)("div",{className:"filter-group",children:(0,fi.jsx)("button",{onClick:V,className:"btn-secondary btn-sm",children:"Clear Filters"})})]})})]}),(0,fi.jsx)("div",{className:"results-summary",children:g&&!H?(0,fi.jsxs)(fi.Fragment,{children:[(0,fi.jsxs)("p",{style:{marginBottom:"4px"},children:['No exact matches for "',g,'"']}),(0,fi.jsxs)("p",{children:["Showing ",R.length," of ",t.length," entries that might be a match",L>1&&" (Page ".concat(P," of ").concat(L,")")]})]}):(0,fi.jsxs)("p",{children:["Showing ",R.length," of ",t.length," entries",g&&' matching "'.concat(g,'"'),L>1&&" (Page ".concat(P," of ").concat(L,")")]})}),0===R.length?(0,fi.jsxs)("div",{className:"no-results",children:[(0,fi.jsx)("h3",{children:"No entries found."}),(0,fi.jsx)("p",{children:"Try adjusting your search terms or filters."})]}):(0,fi.jsxs)(fi.Fragment,{children:[(0,fi.jsx)("div",{className:"entry-list",children:z.map(e=>{return(0,fi.jsxs)("div",{className:"entry-card",children:[(0,fi.jsx)("div",{className:"entry-badges-mobile",children:(0,fi.jsx)("span",{className:"entry-type-badge",children:U(e.type)})}),(0,fi.jsxs)("div",{className:"entry-content",children:[(0,fi.jsxs)("div",{className:"entry-main",children:[(0,fi.jsxs)("div",{className:"entry-title-row",children:[(0,fi.jsx)("h3",{className:"entry-title",onClick:async()=>{p([]);try{if(x&&e&&e.entry_id){const t=await Pt(e.entry_id);if(t)return void d(c(c({},t),{},{id:t.entry_id}))}}catch(t){}d(e)},children:x&&e.hl_title?N(e.hl_title,e.title||"Untitled Entry"):e.title||"Untitled Entry"}),(0,fi.jsxs)("div",{className:"entry-badges",children:[(0,fi.jsx)("span",{className:"entry-type-badge",children:U(e.type)}),e.status&&(0,fi.jsx)("span",{className:"status-badge status-".concat(e.status),children:e.status})]})]}),(0,fi.jsxs)("div",{className:"entry-subtitle-row",children:[(0,fi.jsxs)("div",{className:"entry-subtitle",children:["civilify.local/",e.type?U(e.type).toLowerCase().replace(/\s+/g,"-"):"unknown","/",e.entry_id||"no-id",x&&(e.hl_citation||e.hl_summary)&&(0,fi.jsxs)(fi.Fragment,{children:[(0,fi.jsx)("span",{style:{margin:"0 6px",color:"#9ca3af"},children:"|"}),(0,fi.jsxs)("span",{style:{color:"#6b7280"},children:[e.hl_citation?N(e.hl_citation,e.canonical_citation):null,!e.hl_citation&&e.hl_summary?N(e.hl_summary,""):null]})]})]}),x&&Array.isArray(e.matched_fields)&&e.matched_fields.length>0&&(0,fi.jsxs)("div",{style:{marginTop:4,fontSize:12,color:"#9ca3af"},children:["matched: ",e.matched_fields.join(", ")]}),e.team_member_id&&(0,fi.jsxs)("div",{className:"entry-team-member",children:["Team: ",(t=e.team_member_id,t?l&&0!==Object.keys(l).length?l[t]||"Team Member ".concat(t):"Unknown":"Unassigned")]}),e.tags&&e.tags.length>0&&(0,fi.jsxs)("div",{className:"entry-tags-text",children:[e.tags.slice(0,3).join(", "),e.tags.length>3&&" + ".concat(e.tags.length-3," more")]})]})]}),(0,fi.jsxs)("div",{className:"entry-actions",children:[(0,fi.jsx)("button",{onClick:()=>a(e.id),className:"btn-icon",title:"Edit",children:(0,fi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,fi.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,fi.jsx)("path",{d:"m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,fi.jsx)("button",{onClick:()=>s(e.id),className:"btn-icon btn-icon-danger",title:"Delete",children:(0,fi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,fi.jsx)("polyline",{points:"3,6 5,6 21,6"}),(0,fi.jsx)("path",{d:"m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"}),(0,fi.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,fi.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]})]})]},e.id);var t})}),L>1&&(0,fi.jsx)(mc,{currentPage:P,totalPages:L,onPageChange:T,totalItems:R.length,itemsPerPage:20})]}),u&&(0,fi.jsx)("div",{className:"entry-detail-overlay",onClick:e=>{if(e.target===e.currentTarget)if(f.length>0){const e=f[f.length-1];p(f.slice(0,-1)),d(e)}else d(null)},children:(0,fi.jsx)(pc,{entry:u,onEdit:()=>a(u.id),onDelete:()=>{s(u.id),d(null)},onExport:()=>i(u),teamMemberNames:l})})]})},vc="http://localhost:4000",bc="".concat(vc.endsWith("/api")?vc:vc+"/api");function xc(){const e=localStorage.getItem("auth_token");return c(c({},e?{Authorization:"Bearer ".concat(e)}:{}),{},{"Content-Type":"application/json"})}function _c(e){let{inline:t,onClose:n,anchor:a}=e;const[s,i]=r.useState([]),[o,l]=r.useState(!1),[c,u]=r.useState(!1),d=r.useCallback(async()=>{l(!0);try{const e=await async function(){const e=await fetch("".concat(bc,"/notifications"),{headers:xc()});return await e.json()}();null!==e&&void 0!==e&&e.success&&i(e.notifications||[])}finally{l(!1)}},[]);r.useEffect(()=>{d()},[d]);const f=async e=>{await async function(e){const t=await fetch("".concat(bc,"/notifications/").concat(encodeURIComponent(e),"/dismiss"),{method:"POST",headers:xc()});return await t.json()}(e),await d()},p=async(e,t)=>{await async function(e,t){const n=await fetch("".concat(bc,"/notifications/").concat(encodeURIComponent(e),"/resolve"),{method:"POST",headers:xc(),body:JSON.stringify(t?{selected_entry_id:t}:{})});return await n.json()}(e,t),await d()};if(o)return(0,fi.jsx)("div",{className:"p-4",children:"Loading notifications\u2026"});const m=(0,fi.jsxs)("div",{className:"notif-content",children:[(0,fi.jsxs)("div",{className:"notif-left",children:[(0,fi.jsx)("div",{className:"notif-title",children:"Notifications"}),(0,fi.jsx)("button",{className:"notif-scan-btn",onClick:async()=>{u(!0);try{await async function(){const e=await fetch("".concat(bc,"/notifications/compute"),{method:"POST",headers:xc()});try{return await e.json()}catch(t){return{success:!1,error:"bad_json"}}}(),await d()}finally{u(!1)}},disabled:c,children:c?"Scanning\u2026":"Scan for external > internal"}),(0,fi.jsx)("div",{className:"notif-empty",children:0===s.length?"0 notifications found.":""})]}),(0,fi.jsx)("div",{className:"notif-right",children:s.map(e=>{const t="\u2018Entry ".concat(e.entry_id,"\u2019 \u2013 Legal Bases Citation has been identified as an internal citation.");return(0,fi.jsxs)("div",{className:"notif-card",children:[(0,fi.jsx)("div",{className:"notif-card-title",children:t}),(0,fi.jsx)("div",{className:"notif-card-sub",children:"Do you want to convert it to an internal reference?"}),(0,fi.jsxs)("div",{className:"notif-card-actions",children:[(0,fi.jsx)("button",{className:"notif-action-yes",onClick:()=>{var t;return p(e.id,null===(t=e.matched_entry_ids)||void 0===t?void 0:t[0])},children:"Convert to Internal"}),(0,fi.jsx)("button",{className:"notif-action-no",onClick:()=>f(e.id),children:"Dismiss"})]})]},e.id)})})]});if(t)return m;const h=a?{position:"fixed",top:a.top,left:Math.max(12,Math.min(a.left,window.innerWidth-980-12)),zIndex:2147483647}:{position:"fixed",top:60,right:12,zIndex:2147483647};return(0,fi.jsx)("div",{className:"notif-flyout-root",style:h,children:(0,fi.jsxs)("div",{className:"notif-panel",onClick:e=>e.stopPropagation(),children:[(0,fi.jsx)("button",{className:"notif-close",onClick:n,"aria-label":"Close",children:"\xd7"}),m]})})}const wc=e=>{let{show:t,onComplete:n}=e;const[a,s]=(0,r.useState)([]);return(0,r.useEffect)(()=>{if(t){const e=[];for(let n=0;n<50;n++)e.push({id:n,x:100*Math.random(),y:-10,vx:8*(Math.random()-.5),vy:3*Math.random()+2,rotation:360*Math.random(),rotationSpeed:10*(Math.random()-.5),color:["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff"][Math.floor(7*Math.random())],size:10*Math.random()+5});s(e);const t=setTimeout(()=>{n()},2e3);return()=>clearTimeout(t)}},[t,n]),(0,r.useEffect)(()=>{if(t&&a.length>0){const e=requestAnimationFrame(()=>{s(e=>e.map(e=>c(c({},e),{},{x:e.x+e.vx,y:e.y+e.vy,rotation:e.rotation+e.rotationSpeed,vy:e.vy+.1})).filter(e=>e.y<110))});return()=>cancelAnimationFrame(e)}},[t,a]),t?(0,fi.jsx)("div",{className:"confetti-container",children:a.map(e=>(0,fi.jsx)("div",{className:"confetti-particle",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),transform:"rotate(".concat(e.rotation,"deg)"),backgroundColor:e.color,width:"".concat(e.size,"px"),height:"".concat(e.size,"px")}},e.id))}):null},kc=e=>{let{isOpen:t,message:n="Processing...",subtitle:r="Please wait..."}=e;return t?(0,fi.jsx)("div",{className:"modal-overlay",children:(0,fi.jsxs)("div",{className:"modal-content loading-modal",children:[(0,fi.jsx)("div",{className:"modal-loading-spinner",children:(0,fi.jsx)("div",{className:"modal-spinner"})}),(0,fi.jsx)("h2",{className:"modal-title",children:n}),(0,fi.jsx)("p",{className:"modal-subtitle",children:r})]})}):null};function jc(e){let{isOpen:t,onClose:n,onImport:a}=e;const[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),c="undefined"!==typeof document&&(document.documentElement.classList.contains("dark-mode")||document.body.classList.contains("dark-mode")),u={height:"calc(100% - 16px)",width:"100%",backgroundColor:c?"#1f2937":"#f3f4f6",color:c?"#e5e7eb":"#111827"},d=()=>{if(s.trim())try{JSON.parse(s),l(""),a(s)}catch(e){l("Invalid JSON format. Please check your input.")}else l("Please enter JSON text")},f=()=>{i(""),l(""),n()};return(0,fi.jsx)(Jl,{isOpen:t,onClose:f,title:"Import Entry from JSON",subtitle:"Paste the JSON text generated by GPT or any other source to prefill the entry form.",children:(0,fi.jsx)("div",{className:"max-w-4xl w-full mx-auto h-[70vh] flex flex-col",children:(0,fi.jsxs)("div",{className:"flex-1 flex flex-col space-y-4",children:[(0,fi.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,fi.jsxs)("div",{className:"relative flex-1",children:[(0,fi.jsx)("textarea",{id:"json-input",value:s,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d())},placeholder:"Paste your JSON entry here...",className:"json-textarea w-full h-full font-mono text-sm border-2 !border-gray-200 focus:!border-blue-500 focus:!ring-2 focus:!ring-blue-200 rounded-lg resize-none placeholder:pl-4 placeholder:pt-3",style:u,rows:16}),s&&(0,fi.jsxs)("div",{className:"absolute top-2 right-8 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs px-2 py-1 rounded",children:[s.length," characters"]})]}),o&&(0,fi.jsxs)("div",{className:"flex items-center space-x-2 text-red-600 text-sm",children:[(0,fi.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,fi.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,fi.jsx)("span",{children:o})]})]}),(0,fi.jsx)("div",{className:"mt-auto flex justify-end items-center pt-8",children:(0,fi.jsxs)("div",{className:"flex gap-3",children:[(0,fi.jsx)(Ho,{type:"button",variant:"outline",size:"sm",onClick:f,className:"!px-4 !py-2 text-sm font-medium",style:{padding:"8px 16px"},children:"Go Back"}),(0,fi.jsx)(Ho,{type:"button",size:"sm",onClick:d,disabled:!s.trim(),className:"!px-4 !py-2 text-sm font-medium bg-green-600 hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white",style:{padding:"8px 16px"},children:"Import Entry"})]})})]})})})}const Nc=(0,r.createContext)(void 0),Sc=()=>{const e=(0,r.useContext)(Nc);if(!e)throw new Error("useBackgroundProcess must be used within a BackgroundProcessProvider");return e},Cc="background_processes",Dc=e=>{let{children:t}=e;const[n,a]=(0,r.useState)([]);(0,r.useEffect)(()=>{try{const e=localStorage.getItem(Cc);if(e){const t=JSON.parse(e).map(e=>c(c({},e),{},{startedAt:new Date(e.startedAt),completedAt:e.completedAt?new Date(e.completedAt):void 0}));a(t)}}catch(e){console.error("Error loading background processes:",e)}},[]),(0,r.useEffect)(()=>{try{localStorage.setItem(Cc,JSON.stringify(n))}catch(e){console.error("Error saving background processes:",e)}},[n]);const s=(0,r.useCallback)(e=>{const t="process_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),n=c(c({},e),{},{id:t,startedAt:new Date});return a(e=>[...e,n]),t},[]),i=(0,r.useCallback)((e,t)=>{a(n=>n.map(n=>n.id===e?c(c({},n),t):n))},[]),o=(0,r.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),l=(0,r.useCallback)(e=>n.find(t=>t.sessionId===e),[n]),u={processes:n,addProcess:s,updateProcess:i,removeProcess:o,getProcessBySessionId:l};return(0,fi.jsx)(Nc.Provider,{value:u,children:t})},Ec="http://localhost:4000";function Ac(e){var t,n,a,s,i,o;let{isOpen:l,onClose:u,onSuccess:d,initialSessionId:f}=e;const{addProcess:p}=Sc(),[m,h]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[x,_]=(0,r.useState)(null),[w,k]=(0,r.useState)(null),[j,N]=(0,r.useState)(0),[S,C]=(0,r.useState)(!1),[D,E]=(0,r.useState)([]),[A,F]=(0,r.useState)(!1),[P,T]=(0,r.useState)(!0),[O,I]=(0,r.useState)(""),[R,M]=(0,r.useState)(!1),[L,z]=(0,r.useState)(!1),[B,V]=(0,r.useState)(null),[U,W]=(0,r.useState)({total:0,processed:0,created:0,skipped:0,errors:0}),[q,H]=(0,r.useState)(!1),[$,Z]=(0,r.useState)(!1),[J,Y]=(0,r.useState)(!1),[K,Q]=(0,r.useState)(""),[G,X]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(!1),[ne,re]=(0,r.useState)(!1),ae=e=>{const t=(null===e||void 0===e?void 0:e.metadata)||{},n=parseInt(t.articleNumber,10),r=t.sectionNumber,a=t.actNumber,s=((null===e||void 0===e?void 0:e.extracted_text)||"").trim();if(t.preamble)return"PREAMBLE\n".concat(s);if(a)return r?"ACT ".concat(a,", SECTION ").concat(r,"\n").concat(s):"ACT ".concat(a,"\n").concat(s);if(!n||!r||!s)return null;let i="";if("string"===typeof t.title&&t.title){const e=t.title.match(/^(.+?)\s*-\s*Section\s+\d+/i);e&&e[1]&&(i=e[1].trim())}const o=(e=>{if(!e||e<1)return"";const t=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let n=Math.floor(e),r="";for(const[a,s]of t)for(;n>=a;)r+=s,n-=a;return r})(n),l="ARTICLE ".concat(o),c=i?"\n".concat(i.toUpperCase()):"",u=/^Section\s+/i.test(s)?s:"Section ".concat(r,". ").concat(s);return"".concat(l).concat(c,"\n").concat(u)},se=async()=>{if(!v)return void alert("No active session found");z(!0),V(null),k(null);const e=(null===x||void 0===x?void 0:x.parsed_documents)||0;W({total:e,processed:0,created:0,skipped:0,errors:0});try{const t=await fetch("".concat(Ec,"/api/scraping/session/").concat(v,"/generate-entries"),{method:"POST",headers:{"Content-Type":"application/json"}}),n=await t.json();if(!t.ok)throw new Error(n.error||"Failed to generate entries");V(n),W({total:n.total_documents||e,processed:n.total_documents||e,created:n.created_count||0,skipped:n.skipped_count||0,errors:n.error_count||0}),Z(!0),console.log("\u2705 Entry generation completed:",n)}catch(w){console.error("Failed to generate entries:",w),k(w instanceof Error?w.message:"Failed to generate entries"),alert("Failed to generate entries: ".concat(w instanceof Error?w.message:"Unknown error"))}finally{z(!1)}};(0,r.useEffect)(()=>{l&&(I(""),g||(h(""),_(null),N(0),b(null),V(null),Z(!1),F(!1),E([]),C(!1)))},[l]),(0,r.useEffect)(()=>{const e=e=>{S&&("Escape"===e.key?(C(!1),I("")):"Escape"===e.key&&O&&I(""))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[S,O]),(0,r.useEffect)(()=>{if(!v||!g)return;const e=setInterval(async()=>{try{const t=await fetch("".concat(Ec,"/api/scraping/session/").concat(v,"/status")),n=await t.json();if(n.success){if(_(n.status),n.status.total_documents>0){const e=n.status.parsed_documents/n.status.total_documents*100;N(Math.round(e))}if(("completed"===n.status.status||"failed"===n.status.status)&&"completed"===n.status.status){null===d||void 0===d||d();try{localStorage.setItem("lastScrapeCompleted","1")}catch(e){}F(!0)}}}catch(t){console.error("Failed to poll status:",t)}},1e3);return()=>clearInterval(e)},[v,g,d]),(0,r.useEffect)(()=>{if(l&&!g)try{const e=localStorage.getItem("lastScrapeCompleted");F("1"===e)}catch(e){}},[l,g]),(0,r.useEffect)(()=>{l&&f&&(console.log("Resetting modal state for session:",f),h(""),y(!1),b(null),_(null),k(null),N(0),C(!1),E([]),F(!1),T(!0),I(""),M(!1),z(!1),V(null),W({total:0,processed:0,created:0,skipped:0,errors:0}),H(!1),Z(!1),Y(!1),Q(""),X(!1),te(!1),re(!1))},[l,f]),(0,r.useEffect)(()=>{if(l&&f&&!g){console.log("Loading session data for:",f);const e=async()=>{try{const e=await fetch("".concat(Ec,"/api/scraping/session/").concat(f,"/status")),t=await e.json();console.log("Session data loaded:",t),t.success&&t.status&&(b(f),_(t.status),h(t.status.root_url||""),console.log("Session status:",t.status.status),"completed"===t.status.status&&(console.log("Showing success view for completed session"),F(!0),null===d||void 0===d||d()))}catch(w){console.error("Failed to load session data:",w)}};e()}},[l,f,g,d]),(0,r.useEffect)(()=>{l&&A&&!v&&(async()=>{try{const e=await fetch("".concat(Ec,"/api/scraping/sessions")),t=await e.json();if(null!==t&&void 0!==t&&t.success&&Array.isArray(t.sessions)&&t.sessions.length>0){const e=t.sessions[0];b(String(e.id)),_({id:String(e.id),status:e.status||"completed",total_documents:Number(e.total_documents||0),parsed_documents:Number(e.parsed_documents||0),failed_documents:Number(e.failed_documents||0),started_at:e.started_at,finished_at:e.finished_at}),e.root_url&&h(e.root_url)}}catch(ou){}})()},[l,A,v]);const ie=()=>{h(""),k(null),_(null),N(0),b(null),u()};(0,r.useEffect)(()=>{if(!l)return;const e=e=>{if("Escape"===e.key){if(e.preventDefault(),S)return void C(!1);ie()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l,S]);return(0,r.useEffect)(()=>{"completed"===(null===x||void 0===x?void 0:x.status)&&!L&&((null===B||void 0===B?void 0:B.created_count)||0)>0&&re(!0)},[null===x||void 0===x?void 0:x.status,L,null===B||void 0===B?void 0:B.created_count]),(0,r.useEffect)(()=>{if(!$&&B)try{localStorage.removeItem("lastScrapeCompleted")}catch(e){}},[$,B]),(0,fi.jsxs)(Jl,{isOpen:l,onClose:ie,title:"Scrape Entries",subtitle:"Extract and parse legal documents from LawPhil",children:[(0,fi.jsxs)("div",{className:"scrape-modal-content",style:{overflow:"hidden"},children:[R&&(0,fi.jsxs)("div",{className:"alert alert-info",children:[(0,fi.jsx)("div",{className:"spinner"}),"Clearing all stored scraped data for fresh start..."]}),g||A?(0,fi.jsxs)("div",{className:"scraping-progress",children:["failed"===(null===x||void 0===x?void 0:x.status)&&(0,fi.jsxs)("div",{className:"progress-header",children:[(0,fi.jsx)("h3",{children:"Scraping Failed"}),(0,fi.jsx)("div",{className:"status-badge",style:{backgroundColor:(e=>{switch(e){case"running":return"#007bff";case"completed":return"#28a745";case"failed":return"#dc3545";case"paused":return"#ffc107";default:return"#6c757d"}})("failed")},children:(e=>{switch(e){case"running":return"Scraping in progress...";case"completed":return"Scraping completed!";case"failed":return"Scraping failed";case"paused":return"Scraping paused";default:return"Unknown status"}})("failed")})]}),(0,fi.jsx)("div",{className:"progress-section",children:"running"===(null===x||void 0===x?void 0:x.status)?(0,fi.jsxs)("div",{className:"spinner-wrapper",children:[(0,fi.jsxs)("div",{className:"caterpillar","aria-label":"Loading",children:[(0,fi.jsx)("span",{className:"dot"}),(0,fi.jsx)("span",{className:"dot"}),(0,fi.jsx)("span",{className:"dot"})]}),(0,fi.jsx)("div",{className:"spinner-text",children:"Scraping in progress..."}),(0,fi.jsxs)("div",{className:"progress-stats",children:[(0,fi.jsxs)("div",{className:"stat",children:[(0,fi.jsx)("span",{className:"stat-label",children:"Total Documents:"}),(0,fi.jsx)("span",{className:"stat-value warning",children:null!==(t=null===x||void 0===x?void 0:x.total_documents)&&void 0!==t?t:0})]}),(0,fi.jsxs)("div",{className:"stat",children:[(0,fi.jsx)("span",{className:"stat-label",children:"Parsed:"}),(0,fi.jsx)("span",{className:"stat-value success",children:null!==(n=null===x||void 0===x?void 0:x.parsed_documents)&&void 0!==n?n:0})]}),(0,fi.jsxs)("div",{className:"stat",children:[(0,fi.jsx)("span",{className:"stat-label",children:"Failed:"}),(0,fi.jsx)("span",{className:"stat-value error",children:null!==(a=null===x||void 0===x?void 0:x.failed_documents)&&void 0!==a?a:0})]})]})]}):(0,fi.jsx)(fi.Fragment,{children:(0,fi.jsxs)("div",{className:"progress-stats",children:[(0,fi.jsxs)("div",{className:"stat",children:[(0,fi.jsx)("span",{className:"stat-label",children:"Total Documents:"}),(0,fi.jsx)("span",{className:"stat-value warning",children:null!==(s=null===x||void 0===x?void 0:x.total_documents)&&void 0!==s?s:0})]}),(0,fi.jsxs)("div",{className:"stat",children:[(0,fi.jsx)("span",{className:"stat-label",children:"Parsed:"}),(0,fi.jsx)("span",{className:"stat-value success",children:null!==(i=null===x||void 0===x?void 0:x.parsed_documents)&&void 0!==i?i:0})]}),(0,fi.jsxs)("div",{className:"stat",children:[(0,fi.jsx)("span",{className:"stat-label",children:"Failed:"}),(0,fi.jsx)("span",{className:"stat-value error",children:null!==(o=null===x||void 0===x?void 0:x.failed_documents)&&void 0!==o?o:0})]})]})})}),(0,fi.jsxs)("div",{className:"scraping-details",children:[(0,fi.jsxs)("p",{children:[(0,fi.jsx)("strong",{children:"URL:"})," ",m]}),(0,fi.jsxs)("p",{children:[(0,fi.jsx)("strong",{children:"Session ID:"})," ",v]}),(null===x||void 0===x?void 0:x.started_at)&&(0,fi.jsxs)("p",{children:[(0,fi.jsx)("strong",{children:"Started:"})," ",new Date(x.started_at).toLocaleString()]})]}),L&&(0,fi.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"24px 0"},children:(0,fi.jsx)("div",{className:"wave-text","aria-live":"polite","aria-busy":"true",children:["G","e","n","e","r","a","t","i","n","g","\xa0","e","n","t","r","i","e","s",".",".","."].map((e,t)=>(0,fi.jsx)("span",{children:e},t))})}),"completed"===(null===x||void 0===x?void 0:x.status)&&!L&&(0,fi.jsxs)("div",{className:"completion-message",children:[(0,fi.jsx)(wc,{show:ne,onComplete:()=>re(!1)}),(0,fi.jsxs)("div",{style:{background:"linear-gradient(135deg, #22c55e 0%, #16a34a 40%, #0ea5e9 100%)",color:"white",borderRadius:12,padding:"18px 16px",textAlign:"center",boxShadow:"0 8px 24px rgba(16,185,129,0.35)"},children:[(0,fi.jsx)("div",{style:{fontSize:18,fontWeight:600,marginBottom:6},children:"Scraping Completed"}),(0,fi.jsxs)("div",{style:{opacity:.95},children:["Processed ",x.parsed_documents," of ",x.total_documents," documents",x.failed_documents>0?" \u2022 ".concat(x.failed_documents," failed"):"","."]}),(0,fi.jsx)("div",{style:{marginTop:8},children:(0,fi.jsx)("button",{type:"button",onClick:()=>X(!0),style:{background:"transparent",border:"none",color:"#ffffff",textDecoration:"underline",cursor:"pointer",fontWeight:700},children:"Save as Batch"})})]}),B&&(0,fi.jsxs)("div",{style:{marginTop:16,display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:12},children:[(0,fi.jsxs)("div",{style:{background:"#052e16",border:"1px solid #064e3b",color:"#bbf7d0",borderRadius:10,padding:12,textAlign:"center"},children:[(0,fi.jsx)("div",{style:{fontSize:12,opacity:.9},children:"Entries Created"}),(0,fi.jsx)("div",{style:{fontSize:24,fontWeight:700},children:B.created_count})]}),(0,fi.jsxs)("div",{style:{background:"#111827",border:"1px solid #374151",color:"#fde68a",borderRadius:10,padding:12,textAlign:"center"},children:[(0,fi.jsx)("div",{style:{fontSize:12,opacity:.9},children:"Skipped"}),(0,fi.jsx)("div",{style:{fontSize:24,fontWeight:700},children:B.skipped_count})]}),(0,fi.jsxs)("div",{style:{background:"#180d0f",border:"1px solid #7f1d1d",color:"#fca5a5",borderRadius:10,padding:12,textAlign:"center"},children:[(0,fi.jsx)("div",{style:{fontSize:12,opacity:.9},children:"Errors"}),(0,fi.jsx)("div",{style:{fontSize:24,fontWeight:700},children:B.error_count})]})]}),(0,fi.jsxs)("div",{className:"modal-actions",style:{marginTop:0,display:"flex",gap:8,alignItems:"center",flexWrap:"nowrap",justifyContent:"center",flexShrink:0},children:[(0,fi.jsx)("button",{type:"button",className:"btn btn-warning",style:{minWidth:"120px",padding:"6px 12px",fontSize:"0.9rem"},onClick:async()=>{try{if(!v)return;const e=await fetch("".concat(Ec,"/api/scraping/session/").concat(v,"/documents?t=").concat(Date.now())),t=await e.json();let n=(Array.isArray(null===t||void 0===t?void 0:t.documents)?t.documents:[]).map((e,t)=>{var n,r,a;let s=(null===e||void 0===e?void 0:e.extracted_text)||"";if(P){const t=ae(e);if(!t)return null;s=t}return{index:t,title:(null===e||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.title)||"Act ".concat(null===e||void 0===e||null===(r=e.metadata)||void 0===r?void 0:r.actNumber," - Section ").concat(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.sectionNumber),metadata:null===e||void 0===e?void 0:e.metadata,extracted_text:s}}).filter(Boolean);E(n),C(!0)}catch(ou){alert("Failed to load scraped documents.")}},children:"View Entries"}),(0,fi.jsx)("button",{type:"button",className:"btn btn-success",style:{minWidth:"120px",padding:"6px 12px",fontSize:"0.9rem"},disabled:L||!v,onClick:se,children:L?"Generating\u2026":"Generate"}),(0,fi.jsx)("button",{type:"button",className:"btn btn-danger",style:{minWidth:"120px",padding:"6px 12px",fontSize:"0.9rem"},onClick:()=>H(!0),title:"Start a new scrape (saved batches are preserved)",children:"Run Another"})]})]}),"failed"===(null===x||void 0===x?void 0:x.status)&&(0,fi.jsxs)("div",{className:"error-message",children:[(0,fi.jsxs)("div",{className:"alert alert-danger",children:[(0,fi.jsx)("h4",{children:"Scraping Failed"}),(0,fi.jsx)("p",{children:"There was an error during the scraping process. Please try again."})]}),(0,fi.jsxs)("div",{className:"modal-actions",children:[(0,fi.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{y(!1),_(null),N(0),b(null)},children:"Try Again"}),(0,fi.jsx)("button",{type:"button",className:"btn btn-primary",onClick:ie,children:"Close"})]})]})]}):(0,fi.jsxs)("div",{className:"scrape-form",children:[(0,fi.jsxs)("div",{className:"form-group",children:[(0,fi.jsx)("label",{htmlFor:"url",children:"Enter LawPhil URL:"}),(0,fi.jsx)("input",{id:"url",type:"url",value:m,onChange:e=>h(e.target.value),placeholder:"https://lawphil.net/consti/cons1987.html",className:"form-control",disabled:g||R}),(0,fi.jsx)("small",{className:"form-text",children:"Paste the URL of the legal document you want to scrape and parse."})]}),w&&(0,fi.jsx)("div",{className:"alert alert-danger",children:w}),(0,fi.jsxs)("div",{className:"modal-actions",style:{display:"flex",alignItems:"center",gap:12,justifyContent:"center"},children:[(0,fi.jsx)("button",{type:"button",className:"btn btn-secondary btn-cancel",style:{marginTop:-16},onClick:ie,disabled:g,children:"Cancel"}),(0,fi.jsx)("button",{type:"button",className:"btn btn-orange",style:{marginTop:0},onClick:async()=>{if(m.trim()){y(!0),k(null),N(0),_(null);try{const e=await fetch("".concat(Ec,"/api/scraping/start"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:m.trim(),category:m.includes("/acts/")?"acts":"constitution_1987",operator:"user"})});if(!e.ok){const t=await e.text();throw new Error(t||"Failed to start scraping session")}const t=await e.json();if(!t.success)throw new Error(t.error||"Failed to start scraping session");b(t.sessionId),p({type:"scraping",status:"running",sessionId:t.sessionId,title:"Scraping ".concat(m.includes("/acts/")?"Acts":"Constitution"," from ").concat(m)});const n=m.includes("/acts/"),r=await fetch("".concat(Ec,"/api/scraping/").concat(n?"process-acts":"process"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c({sessionId:t.sessionId},n?{yearPageUrl:m.trim()}:{url:m.trim(),parserType:"constitution_1987"}))});if(!r.ok){const e=await r.json().catch(async()=>({error:await r.text()}));throw new Error((null===e||void 0===e?void 0:e.error)||"Failed to process URL")}const a=await r.json();if(null===a||void 0===a||!a.success)throw new Error((null===a||void 0===a?void 0:a.error)||"Failed to process URL");await fetch("".concat(Ec,"/api/scraping/session/").concat(t.sessionId,"/complete"),{method:"POST"})}catch(e){console.error("Scraping failed:",e),k(e instanceof Error?e.message:"Scraping failed"),y(!1),_({id:v||"n/a",status:"failed",total_documents:0,parsed_documents:0,failed_documents:1,started_at:(new Date).toISOString()})}}else k("Please enter a URL")},disabled:!m.trim()||g||R,children:R?"Clearing Data...":g?"Scraping...":"Start Scraping"})]})]})]}),S&&(0,fi.jsx)("div",{className:"notepad-overlay",onClick:()=>C(!1),children:(0,fi.jsxs)("div",{className:"notepad-window",onClick:e=>e.stopPropagation(),children:[(0,fi.jsxs)("div",{className:"notepad-header",children:[(0,fi.jsxs)("div",{className:"notepad-title",children:["Scraped Documents ",P?"(Normalized Per Entry)":"(Parsed Per Entry)"," \u2014 press Esc to close"]}),(0,fi.jsxs)("div",{className:"notepad-controls",children:[(0,fi.jsx)("div",{className:"notepad-search",children:(0,fi.jsx)("input",{type:"text",placeholder:"Search by title, article, section, or content...",value:O,onChange:e=>I(e.target.value),className:"notepad-search-input"})}),(0,fi.jsx)("div",{className:"notepad-toggle",children:(0,fi.jsxs)("label",{children:[(0,fi.jsx)("input",{type:"checkbox",checked:P,onChange:e=>T(e.target.checked)})," Normalized"]})})]})]}),(0,fi.jsx)("div",{className:"notepad-body",children:0===D.length?(0,fi.jsx)("pre",{className:"notepad-pre",children:"No documents to display."}):(()=>{const e=((e,t)=>{if(!t.trim())return e;const n=t.toLowerCase();return e.filter(e=>{var t,r,a;const s=(e.title||"").toLowerCase(),i=(e.extracted_text||"").toLowerCase(),o=e.metadata||{},l=(null===(t=o.articleNumber)||void 0===t?void 0:t.toString())||"",c=(null===(r=o.sectionNumber)||void 0===r?void 0:r.toString())||"",u=(null===(a=o.actNumber)||void 0===a?void 0:a.toString())||"",d=(o.topics||[]).join(" ").toLowerCase();return s.includes(n)||i.includes(n)||l.includes(n)||c.includes(n)||u.includes(n)||d.includes(n)||"article ".concat(l).includes(n)||"section ".concat(c).includes(n)||"act ".concat(u).includes(n)})})(D,O);return 0===e.length?(0,fi.jsx)("pre",{className:"notepad-pre",children:"No documents match your search."}):(0,fi.jsxs)(fi.Fragment,{children:[O&&(0,fi.jsxs)("div",{className:"notepad-search-results",children:["Showing ",e.length," of ",D.length," documents"]}),e.map(e=>{const t=P&&ae(e)||e.extracted_text;return(0,fi.jsxs)("div",{className:"notepad-doc",children:[(0,fi.jsx)("div",{className:"notepad-doc-title",children:e.title||"Document ".concat(e.index+1)}),(0,fi.jsx)("pre",{className:"notepad-pre",children:t})]},e.index)})]})})()})]})}),(0,fi.jsx)("style",{children:"\n        .scrape-modal-content {\n          max-width: 600px;\n          margin: 0 auto;\n        }\n\n        .form-group {\n          margin-bottom: 1.5rem;\n        }\n\n        .form-group label {\n          display: block;\n          margin-bottom: 0.5rem;\n          font-weight: 600;\n          color: white;\n        }\n\n        .form-control {\n          width: 100%;\n          padding: 0.75rem;\n          border: 2px solid #ddd;\n          border-radius: 6px;\n          font-size: 1rem;\n          transition: border-color 0.2s;\n        }\n\n        .form-control:focus {\n          outline: none;\n          border-color: #007bff;\n          box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);\n        }\n\n        .form-text {\n          display: block;\n          margin-top: 0.25rem;\n          color: #d1d5db;\n          font-size: 0.875rem;\n        }\n\n        .alert {\n          padding: 1rem;\n          border-radius: 6px;\n          margin-bottom: 1rem;\n        }\n\n        .alert-danger {\n          background-color: #f8d7da;\n          border: 1px solid #f5c6cb;\n          color: #721c24;\n        }\n\n        .alert-success {\n          background-color: #d4edda;\n          border: 1px solid #c3e6cb;\n          color: #155724;\n        }\n\n        .alert-info {\n          background-color: #d1ecf1;\n          border: 1px solid #bee5eb;\n          color: #0c5460;\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n        }\n\n        .spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid #0c5460;\n          border-top: 2px solid transparent;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        .modal-actions {\n          display: flex;\n          gap: 1rem;\n          justify-content: center;\n          align-items: center;\n          flex-wrap: nowrap; /* force one row */\n          margin-top: 2rem;\n        }\n\n        .btn {\n          padding: 0.75rem 1.5rem;\n          border: none;\n          border-radius: 6px;\n          font-weight: 500;\n          font-size: 14px; /* keep text on one line without wrap */\n          line-height: 1;  /* avoid multi-line height growth */\n          cursor: pointer;\n          transition: all 0.2s;\n          min-width: 180px;\n          height: 44px;\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n          box-sizing: border-box;\n          white-space: nowrap; /* single-line labels */\n        }\n\n        .btn:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        .btn-primary {\n          background-color: #007bff;\n          color: white;\n        }\n\n        .btn-primary:hover:not(:disabled) {\n          background-color: #0056b3;\n          transform: translateY(-1px);\n        }\n\n        .btn-secondary {\n          background-color: #dc3545;\n          color: white;\n        }\n        .btn-success {\n          background-color: #16a34a; /* green */\n          color: #ffffff;\n        }\n\n        .btn-success:hover:not(:disabled) {\n          background-color: #15803d;\n          transform: translateY(-1px);\n        }\n\n        .btn-warning {\n          background-color: #f59e0b; /* amber */\n          color: #ffffff; /* white text requested */\n        }\n\n        .btn-warning:hover:not(:disabled) {\n          background-color: #d97706;\n          color: #ffffff;\n          transform: translateY(-1px);\n        }\n\n        .btn-danger {\n          background-color: #b91c1c;\n          color: #ffffff;\n        }\n\n        .btn-danger:hover:not(:disabled) {\n          background-color: #991b1b;\n          transform: translateY(-1px);\n        }\n\n        .btn-outline-danger {\n          background-color: transparent;\n          color: #b91c1c;\n          border: 2px solid #b91c1c;\n        }\n\n        .btn-outline-danger:hover:not(:disabled) {\n          background-color: #b91c1c;\n          color: #ffffff;\n          transform: translateY(-1px);\n        }\n\n\n        .btn-secondary:hover:not(:disabled) {\n          background-color: #c82333;\n          transform: translateY(7px);\n        }\n\n        .btn-cancel {\n          transform: translateY(8px);\n        }\n\n        .scraping-progress {\n          text-align: center;\n        }\n\n        .progress-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 2rem;\n        }\n\n        .progress-header h3 {\n          margin: 0;\n          color: #333;\n        }\n\n        .status-badge {\n          padding: 0.5rem 1rem;\n          border-radius: 20px;\n          color: white;\n          font-weight: 500;\n          font-size: 0.875rem;\n        }\n\n        .progress-section {\n          margin-bottom: 2rem;\n        }\n\n        .spinner-wrapper { \n          display: flex; \n          flex-direction: column; \n          align-items: center; \n          gap: 0.5rem; \n        }\n\n        /* Caterpillar loader */\n        .caterpillar { display: flex; gap: 8px; align-items: flex-end; height: 24px; }\n        .caterpillar .dot { width: 10px; height: 10px; background: #ff8c42; border-radius: 50%; animation: caterpillar-bounce 1.2s ease-in-out infinite; box-shadow: 0 0 6px rgba(255,140,66,0.6); }\n        .caterpillar .dot:nth-child(2) { animation-delay: 0.15s; }\n        .caterpillar .dot:nth-child(3) { animation-delay: 0.3s; }\n        @keyframes caterpillar-bounce { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-8px); } }\n\n        .spinner-text { \n          color: #22c55e; /* green */\n          font-weight: 600; \n        }\n\n        @keyframes spin { \n          to { transform: rotate(360deg); } \n        }\n\n        .progress-bar-container {\n          margin-bottom: 1rem;\n        }\n\n        .progress-bar {\n          width: 100%;\n          height: 20px;\n          background-color: #e9ecef;\n          border-radius: 10px;\n          overflow: hidden;\n          margin-bottom: 0.5rem;\n        }\n\n        .progress-fill {\n          height: 100%;\n          background-color: #007bff;\n          transition: width 0.3s ease;\n        }\n\n        .progress-text {\n          font-weight: 600;\n          color: #333;\n        }\n\n        .progress-stats {\n          display: flex;\n          gap: 1rem;\n          margin-top: 1rem;\n          justify-content: center;\n          flex-wrap: wrap;\n        }\n\n\n        .stat-label {\n          display: block;\n          font-size: 0.875rem;\n          color: #6c757d;\n          margin-bottom: 0.25rem;\n        }\n\n        .modal-content .progress-stats .stat {\n          text-align: center;\n          min-width: 120px;\n          background: none !important;\n          background-color: transparent !important;\n          border: none !important;\n          padding: 0 !important;\n          margin: 0 !important;\n          box-shadow: none !important;\n        }\n\n        /* Override any inherited styles */\n        .modal-content .progress-stats .stat * {\n          background: none !important;\n          background-color: transparent !important;\n          border: none !important;\n        }\n\n        .stat-value {\n          display: block;\n          font-size: 1.25rem;\n          font-weight: 600;\n        }\n\n        .modal-content .progress-stats .stat-value.warning {\n          color: #f59e0b !important; /* yellow text */\n        }\n\n        .modal-content .progress-stats .stat-value.success {\n          color: #22c55e !important; /* green text */\n        }\n\n        .modal-content .progress-stats .stat-value.error {\n          color: #ef4444 !important; /* red text */\n        }\n\n        .scraping-details {\n          background-color: #f8f9fa;\n          padding: 1rem;\n          border-radius: 6px;\n          margin-bottom: 2rem;\n          text-align: left;\n        }\n\n        .scraping-details p {\n          margin: 0.5rem 0;\n          font-size: 0.875rem;\n        }\n\n        /* Dark mode overrides */\n        :root.dark-mode .scrape-modal-content .scraping-details {\n          background-color: #111827; /* slate-900 */\n          border: 1px solid #1f2937; /* slate-800 */\n          color: #d1d5db; /* slate-300 */\n        }\n        :root.dark-mode .scrape-modal-content .scraping-details p {\n          color: #d1d5db;\n        }\n\n        .completion-message,\n        .error-message {\n          margin-top: 2rem;\n        }\n\n        .completion-message h4,\n        .error-message h4 {\n          margin-top: 0;\n        }\n\n        /* Notepad overlay */\n        .notepad-overlay {\n          position: fixed;\n          inset: 0;\n          background: rgba(0,0,0,0.5);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 9999;\n        }\n        .notepad-window { \n          width: 80vw; \n          max-width: 900px; \n          max-height: 80vh; \n          background: #111827; \n          color: #e5e7eb; \n          border: 1px solid #374151; \n          border-radius: 8px; \n          box-shadow: 0 10px 30px rgba(0,0,0,0.4); \n          display: flex; \n          flex-direction: column; \n        }\n        .notepad-header { \n          padding: 0.75rem 1rem; \n          background: #1f2937; \n          border-bottom: 1px solid #374151; \n        }\n        .notepad-title { \n          font-weight: 700; \n          margin-bottom: 0.5rem; \n          font-size: 0.9rem;\n        }\n        .notepad-controls {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          gap: 1rem;\n        }\n        .notepad-search {\n          flex: 1;\n        }\n        .notepad-search-input {\n          width: 100%;\n          padding: 0.5rem;\n          border: 1px solid #374151;\n          border-radius: 4px;\n          font-size: 0.8rem;\n          background: #111827;\n          color: #f9fafb;\n        }\n        .notepad-search-input:focus {\n          outline: none;\n          border-color: #3b82f6;\n          box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.25);\n        }\n        .notepad-search-input::placeholder {\n          color: #6b7280;\n        }\n        .notepad-toggle { font-weight: 400; font-size: 0.9rem; }\n        .notepad-toggle input { margin-right: 0.5rem; }\n        .notepad-search-results {\n          padding: 0.5rem 1rem;\n          background: #374151;\n          border-bottom: 1px solid #4b5563;\n          font-size: 0.8rem;\n          color: #9ca3af;\n          font-style: italic;\n        }\n        .notepad-body { \n          padding: 1rem; \n          overflow: auto; \n        }\n        .notepad-doc { \n          margin-bottom: 1rem; \n          border-bottom: 1px dashed #374151; \n          padding-bottom: 1rem; \n        }\n        .notepad-doc-title { \n          font-weight: 700; \n          margin-bottom: 0.5rem; \n        }\n        .notepad-pre { \n          white-space: pre-wrap; \n          font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; \n          background: #0b1220; \n          border: 1px solid #1f2937; \n          border-radius: 6px; \n          padding: 0.75rem; \n          color: #d1d5db; \n        }\n        \n        /* Generation Progress Styles */\n        .generating-content {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 0.5rem;\n        }\n        \n        .spinner {\n          width: 20px;\n          height: 20px;\n          border: 2px solid #f3f3f3;\n          border-top: 2px solid #007bff;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        \n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        \n        .progress-stats {\n          display: flex;\n          gap: 1rem;\n          font-size: 0.8rem;\n          color: #666;\n        }\n        \n        .progress-stats span {\n          padding: 0.2rem 0.5rem;\n          background: #f8f9fa;\n          border-radius: 4px;\n        }\n        \n        /* Success Modal Styles */\n        .success-modal {\n          max-width: 500px;\n          background: white;\n          border-radius: 12px;\n          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n        }\n        \n        .success-stats {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 1rem;\n          margin-bottom: 1.5rem;\n        }\n\n        /* Custom button colors */\n        .btn { margin-top: 32px; }\n        .btn.btn-warning { background: #f59e0b; border-color: #f59e0b; color: #ffffff; }\n        .btn.btn-warning:hover { background: #d97706; border-color: #d97706; color: #111827; }\n        .btn.btn-orange { background: #c2410c; border-color: #c2410c; color: #ffffff; }\n        .btn.btn-orange:hover { background: #9a3412; border-color: #9a3412; color: #ffffff; }\n\n        /* Animated wave text for generating indicator */\n        .wave-text {\n          font-weight: 700;\n          font-size: 1.25rem;\n          color: #22c55e; /* green */\n          display: inline-block;\n          letter-spacing: 1px;\n        }\n        .wave-text span {\n          display: inline-block;\n          animation: wave 1.2s ease-in-out infinite;\n        }\n        .wave-text span:nth-child(2) { animation-delay: 0.1s; }\n        .wave-text span:nth-child(3) { animation-delay: 0.2s; }\n        .wave-text span:nth-child(4) { animation-delay: 0.3s; }\n        .wave-text span:nth-child(5) { animation-delay: 0.4s; }\n        .wave-text span:nth-child(6) { animation-delay: 0.5s; }\n        .wave-text span:nth-child(7) { animation-delay: 0.6s; }\n        .wave-text span:nth-child(8) { animation-delay: 0.7s; }\n        .wave-text span:nth-child(9) { animation-delay: 0.8s; }\n        .wave-text span:nth-child(10) { animation-delay: 0.9s; }\n        .wave-text span:nth-child(11) { animation-delay: 1.0s; }\n        .wave-text span:nth-child(12) { animation-delay: 1.1s; }\n        .wave-text span:nth-child(13) { animation-delay: 1.2s; }\n        @keyframes wave {\n          0%, 100% { transform: translateY(0); opacity: 0.85; }\n          50% { transform: translateY(-4px); opacity: 1; }\n        }\n        \n        .stat-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 0.75rem;\n          border-radius: 8px;\n          background: #f8f9fa;\n          border: 1px solid #e9ecef;\n        }\n        \n        .stat-item.success {\n          background: #d4edda;\n          border-color: #c3e6cb;\n        }\n        \n        .stat-item.warning {\n          background: #fff3cd;\n          border-color: #ffeaa7;\n        }\n        \n        .stat-item.error {\n          background: #f8d7da;\n          border-color: #f5c6cb;\n        }\n        \n        .stat-label {\n          font-weight: 500;\n          color: #495057;\n        }\n        \n        .stat-value {\n          font-weight: 700;\n          font-size: 1.1rem;\n        }\n        \n        .stat-item.success .stat-value {\n          color: #155724;\n        }\n        \n        .stat-item.warning .stat-value {\n          color: #856404;\n        }\n        \n        .stat-item.error .stat-value {\n          color: #721c24;\n        }\n        \n        .success-message {\n          text-align: center;\n          margin-bottom: 1.5rem;\n        }\n        \n        .success-message p {\n          margin-bottom: 0.5rem;\n          color: #495057;\n        }\n        \n        .success-message strong {\n          color: #28a745;\n        }\n      "}),$&&(0,fi.jsx)("div",{className:"modal-overlay",onClick:()=>Z(!1),children:(0,fi.jsxs)("div",{className:"modal-content success-modal",onClick:e=>e.stopPropagation(),style:{overflow:"visible"},children:[(0,fi.jsx)("div",{className:"modal-header",style:{marginBottom:12},children:(0,fi.jsx)("h3",{children:"\u2705 Entry Generation Complete!"})}),(0,fi.jsxs)("div",{className:"modal-body",children:[(0,fi.jsxs)("div",{className:"success-stats",children:[(0,fi.jsxs)("div",{className:"stat-item",children:[(0,fi.jsx)("span",{className:"stat-label",children:"Total Documents:"}),(0,fi.jsx)("span",{className:"stat-value",style:{color:"#6b7280"},children:U.total})]}),(0,fi.jsxs)("div",{className:"stat-item success",children:[(0,fi.jsx)("span",{className:"stat-label",children:"Entries Created:"}),(0,fi.jsx)("span",{className:"stat-value",children:U.created})]}),(0,fi.jsxs)("div",{className:"stat-item warning",children:[(0,fi.jsx)("span",{className:"stat-label",children:"Skipped:"}),(0,fi.jsx)("span",{className:"stat-value",children:U.skipped})]}),(0,fi.jsxs)("div",{className:"stat-item error",children:[(0,fi.jsx)("span",{className:"stat-label",children:"Errors:"}),(0,fi.jsx)("span",{className:"stat-value",children:U.errors})]})]}),(0,fi.jsxs)("div",{className:"success-message",children:[(0,fi.jsxs)("p",{children:["\ud83c\udf89 Successfully generated ",(0,fi.jsx)("strong",{children:U.created})," KB entries with comprehensive GPT enrichment and vector embeddings!"]}),(0,fi.jsx)("p",{children:"You can now view these entries in the dashboard and release them when ready."})]})]}),(0,fi.jsxs)("div",{className:"modal-footer",style:{display:"flex",gap:12},children:[(0,fi.jsx)("button",{className:"btn btn-orange",style:{flex:1,minWidth:0},onClick:()=>{try{localStorage.setItem("lastScrapeCompleted","0")}catch(w){console.warn("Failed to update localStorage:",w)}Z(!1),null===d||void 0===d||d()},children:"View Entries in Dashboard"}),(0,fi.jsx)("button",{className:"btn btn-success",style:{flex:1,minWidth:0},onClick:async()=>{if(v)try{if(!(await fetch("".concat(Ec,"/api/scraping/clear-draft-entries"),{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to clear draft entries");V(null),Z(!1),await se()}catch(w){console.error("Failed to regenerate entries:",w),k(w instanceof Error?w.message:"Failed to regenerate entries")}else alert("No active session found")},children:"Regenerate Entries"})]})]})}),q&&(0,fi.jsx)("div",{className:"modal-overlay",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:(0,fi.jsxs)("div",{className:"modal-content",style:{background:"#111827",color:"#e5e7eb",border:"1px solid #1f2937",borderRadius:16,padding:24,width:420,boxShadow:"0 20px 40px rgba(0,0,0,0.35)",textAlign:"center"},children:[(0,fi.jsx)("h3",{style:{margin:"0 0 8px 0"},children:"You're deleting this scraping session"}),(0,fi.jsx)("p",{style:{margin:"0 0 16px 0",color:"#cbd5e1"},children:"All recently scraped documents will be removed. Confirm?"}),(0,fi.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[(0,fi.jsx)("button",{className:"btn",style:{minWidth:110,background:"transparent",color:"#b91c1c",border:"2px solid #b91c1c",borderRadius:6,padding:"8px 16px"},onClick:()=>H(!1),onMouseEnter:e=>{e.currentTarget.style.background="#b91c1c",e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#b91c1c"},children:"Go Back"}),(0,fi.jsx)("button",{className:"btn btn-danger",style:{minWidth:110},onClick:async()=>{try{const e=await fetch("".concat(Ec,"/api/scraping/clear-unsaved"),{method:"POST"}),t=await e.json();localStorage.removeItem("lastScrapeCompleted"),h(""),_(null),N(0),b(null),y(!1),V(null),Z(!1),F(!1),H(!1),E([]),C(!1),console.log("Cleared ".concat(t.deleted_count||0," scraped documents and sessions."))}catch(ou){alert("Failed to clear scraped data.")}},children:"Confirm"})]})]})}),G&&(0,fi.jsx)("div",{className:"modal-overlay",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:(0,fi.jsxs)("div",{className:"modal-content",style:{background:"#111827",color:"#e5e7eb",border:"1px solid #374151",borderRadius:12,padding:20,width:420},children:[(0,fi.jsx)("h3",{style:{marginTop:0,marginBottom:8},children:"Add description"}),(0,fi.jsx)("input",{type:"text",placeholder:"Short description",value:K,onChange:e=>Q(e.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1px solid #4b5563",background:"#0b1220",color:"#e5e7eb"}}),(0,fi.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:14},children:[(0,fi.jsx)("button",{className:"btn",style:{minWidth:130,background:"transparent",color:"#b91c1c",border:"2px solid #b91c1c",borderRadius:6,padding:"8px 16px"},onClick:()=>X(!1),onMouseEnter:e=>{e.currentTarget.style.background="#b91c1c",e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#b91c1c"},children:"Go back"}),(0,fi.jsx)("button",{className:"btn btn-success",style:{minWidth:130},disabled:!v||!K.trim()||J,onClick:async()=>{if(v&&K.trim())try{Y(!0);const e="http://localhost:4000",t="".concat(e.endsWith("/api")?e:e+"/api","/scraping/session/").concat(encodeURIComponent(v),"/save-batch"),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:K.trim()})}),r=await n.json().catch(()=>({}));if(!n.ok)throw new Error((null===r||void 0===r?void 0:r.error)||"Failed to save batch");X(!1),Q(""),y(!1),_(null),N(0),b(null),V(null),Z(!1),F(!1),E([]),C(!1),te(!0)}catch(ou){alert((null===ou||void 0===ou?void 0:ou.message)||"Failed to save batch")}finally{Y(!1)}},children:J?"Saving\u2026":"Save as Batch"})]})]})}),ee&&(0,fi.jsx)("div",{className:"modal-overlay",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:(0,fi.jsxs)("div",{className:"modal-content",style:{background:"#111827",border:"1px solid #1f2937",color:"#e5e7eb",borderRadius:16,padding:24,maxWidth:420,width:"90%",textAlign:"center",boxShadow:"0 20px 40px rgba(0,0,0,0.35)"},children:[(0,fi.jsx)("h3",{style:{marginTop:0,marginBottom:6},children:"Batch Saved"}),(0,fi.jsx)("p",{style:{color:"#cbd5e1",marginTop:2},children:"Your scraped documents were saved as a batch. You can now enter another URL."}),(0,fi.jsx)("div",{style:{marginTop:16},children:(0,fi.jsx)("button",{className:"btn btn-success",style:{minWidth:140,background:"#16a34a",color:"#ffffff",border:"none"},onClick:()=>{te(!1),y(!1),_(null),N(0),b(null),V(null),Z(!1),F(!1),E([]),C(!1);try{localStorage.setItem("lastScrapeCompleted","0")}catch(e){}h("")},children:"OK"})})]})})]})}function Fc(e){let{isOpen:t,onClose:n}=e;const{addProcess:a}=Sc(),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(null),[d,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[h,g]=(0,r.useState)("10"),[y,v]=(0,r.useState)(null),b=async()=>{i(!0),u(null);try{const e=await It();l(Array.isArray(null===e||void 0===e?void 0:e.batches)?e.batches:[])}catch(ou){u((null===ou||void 0===ou?void 0:ou.message)||"Failed to load batches")}finally{i(!1)}};(0,r.useEffect)(()=>{t&&b()},[t]);const x=async e=>{f(null);try{await async function(e){const t=await fetch("".concat(Ot,"/batch/").concat(encodeURIComponent(e)),{method:"DELETE"}),n=await t.json().catch(()=>({}));if(!t.ok)throw new Error((null===n||void 0===n?void 0:n.error)||"Failed to delete batch");return n}(e),await b()}catch(ou){alert((null===ou||void 0===ou?void 0:ou.message)||"Failed to delete batch")}};return(0,fi.jsxs)(Jl,{isOpen:t,onClose:n,title:"Scrape Batches",subtitle:"View previously scraped and parsed documents in batches, ready for entry generation",children:[c&&(0,fi.jsx)("div",{className:"alert alert-danger",children:c}),s?(0,fi.jsx)("div",{style:{padding:16},children:"Loading\u2026"}):(0,fi.jsx)("div",{style:{display:"grid",gap:12},children:0===o.length?(0,fi.jsx)("div",{style:{padding:16,color:"#9ca3af"},children:"No saved batches yet."}):o.map(e=>(0,fi.jsx)("div",{style:{border:"1px solid #1f2937",borderRadius:10,padding:14,background:"#111827",boxShadow:"0 6px 18px rgba(0,0,0,0.25)"},children:(0,fi.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(0,fi.jsxs)("div",{style:{minWidth:0},children:[(0,fi.jsxs)("div",{style:{fontWeight:700,color:"#e5e7eb"},children:["Batch ",e.id]}),(0,fi.jsxs)("div",{style:{fontSize:12,color:"#9ca3af",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"52vw"},children:[e.category," \u2022 ",new Date(e.created_at).toLocaleString(),e.description?" \u2022 ".concat(e.description):""]})]}),(0,fi.jsxs)("div",{style:{textAlign:"right"},children:[(0,fi.jsx)("div",{style:{fontSize:12,color:"#9ca3af"},children:"Count"}),(0,fi.jsx)("div",{style:{fontWeight:700,color:"#e5e7eb"},children:e.total_documents})]}),(0,fi.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,fi.jsx)("button",{className:"btn",style:{background:"#16a34a",color:"#ffffff",border:"none",minWidth:"120px",padding:"8px 16px",borderRadius:6,height:44},onMouseEnter:e=>{e.currentTarget.style.background="#15803d"},onMouseLeave:e=>{e.currentTarget.style.background="#16a34a"},onClick:()=>f({action:"generate",id:e.id}),children:"Generate Entries"}),(0,fi.jsx)("button",{className:"btn btn-danger",style:{minWidth:"120px",padding:"8px 16px",borderRadius:6,height:44},onClick:()=>f({action:"delete",id:e.id}),children:"Delete Batch"})]})]})},e.id))}),d&&(0,fi.jsx)("div",{className:"modal-overlay",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,fi.jsxs)("div",{className:"modal-content",style:{background:"#111827",border:"1px solid #1f2937",color:"#e5e7eb",borderRadius:12,padding:20,width:360},children:[(0,fi.jsx)("h3",{style:{marginTop:0},children:"generate"===d.action?"Generate Entries?":"Delete Batch?"}),(0,fi.jsx)("p",{style:{color:"#9ca3af"},children:"generate"===d.action?"This will generate KB entries for this batch.":"This will permanently delete the batch and its parsed documents."}),(0,fi.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[(0,fi.jsx)("button",{className:"btn btn-secondary",onClick:()=>f(null),children:"Cancel"}),"generate"===d.action?(0,fi.jsx)("button",{className:"btn btn-success",style:{background:"#16a34a",color:"#ffffff",border:"none"},onClick:()=>(async e=>{f(null);const t=o.find(t=>t.id===e);if("acts"===(null===t||void 0===t?void 0:t.category))v(e),m(!0);else try{a({type:"entry_generation",status:"running",sessionId:e,title:"Generating entries for batch ".concat(e)}),await Rt(e),alert("Generation started/completed for this batch. Check entries.")}catch(ou){alert((null===ou||void 0===ou?void 0:ou.message)||"Failed to generate entries")}})(d.id),children:"Confirm"}):(0,fi.jsx)("button",{className:"btn btn-danger",onClick:()=>x(d.id),children:"Confirm"})]})]})}),p&&(0,fi.jsx)("div",{className:"modal-overlay",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,fi.jsxs)("div",{className:"modal-content",style:{background:"#111827",border:"1px solid #1f2937",color:"#e5e7eb",borderRadius:12,padding:20,width:400},children:[(0,fi.jsx)("h3",{style:{marginTop:0},children:"How many to enrich?"}),(0,fi.jsx)("p",{style:{color:"#9ca3af",marginBottom:16},children:"Enter the number of entries to generate (for testing purposes to save credits):"}),(0,fi.jsx)("div",{style:{marginBottom:20},children:(0,fi.jsx)("input",{type:"number",value:h,onChange:e=>g(e.target.value),placeholder:"10",min:"1",style:{width:"100%",padding:"8px 12px",background:"#1f2937",border:"1px solid #374151",borderRadius:6,color:"#e5e7eb",fontSize:14}})}),(0,fi.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[(0,fi.jsx)("button",{className:"btn btn-secondary",onClick:()=>{m(!1),v(null)},children:"Cancel"}),(0,fi.jsxs)("button",{className:"btn btn-success",style:{background:"#16a34a",color:"#ffffff",border:"none"},onClick:async()=>{if(!y)return;const e=parseInt(h);if(isNaN(e)||e<=0)return void alert("Please enter a valid number greater than 0");m(!1);const t=y;v(null);try{a({type:"entry_generation",status:"running",sessionId:t,title:"Generating ".concat(e," entries for batch ").concat(t)}),await Rt(t,e),alert("Generation started/completed for ".concat(e," entries in this batch. Check entries."))}catch(ou){alert((null===ou||void 0===ou?void 0:ou.message)||"Failed to generate entries")}},children:["Generate ",h," Entries"]})]})]})})]})}function Pc(e){let{isOpen:t,onClose:n,draftEntries:a,onReleaseAll:s}=e;const[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[f,p]=(0,r.useState)(null),[m,h]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),v=()=>{d(null),p(null)},b=()=>{o([]),n()};return(0,fi.jsxs)(Jl,{isOpen:t,onClose:b,title:"Release Draft Entries",subtitle:"Manage and publish draft entries from scraping",children:[(0,fi.jsx)("div",{className:"release-modal-content",children:0===a.length?(0,fi.jsxs)("div",{className:"no-entries",children:[(0,fi.jsx)("p",{children:"No draft entries found."}),(0,fi.jsx)("p",{children:"All entries have been published or no scraping has been done yet."})]}):(0,fi.jsxs)(fi.Fragment,{children:[(0,fi.jsxs)("div",{className:"entries-header",children:[(0,fi.jsxs)("h3",{children:[(0,fi.jsx)("span",{className:"entries-title",children:"Draft Entries"}),(0,fi.jsx)("span",{className:"count-badge",children:i.length>0?"".concat(i.length," selected out of ").concat(a.length):a.length})]}),(0,fi.jsx)("div",{className:"header-actions",style:{display:"flex",alignItems:"center",gap:12},children:(0,fi.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,fi.jsx)("input",{type:"checkbox",checked:i.length===a.length&&a.length>0,onChange:()=>{i.length===a.length?o([]):o(a.map(e=>e.entry_id))}}),(0,fi.jsx)("span",{className:i.length===a.length&&a.length>0?"label-orange":"",children:"Select All"})]})})]}),(0,fi.jsx)("div",{className:"entries-list",children:a.map(e=>(0,fi.jsxs)("div",{className:"entry-item no-hover",children:[(0,fi.jsxs)("div",{className:"entry-checkbox",children:[(0,fi.jsx)("input",{type:"checkbox",id:e.entry_id,checked:i.includes(e.entry_id),onChange:()=>{return t=e.entry_id,void o(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}}),(0,fi.jsx)("label",{htmlFor:e.entry_id})]}),(0,fi.jsxs)("div",{className:"entry-details",children:[(0,fi.jsx)("div",{className:"entry-title entry-title-orange",children:e.title}),(0,fi.jsxs)("div",{className:"entry-meta",children:[(0,fi.jsx)("span",{className:"entry-type orange-chip",children:e.type}),(0,fi.jsx)("span",{className:"entry-subtype subtype-text lowered",children:e.entry_subtype}),(0,fi.jsx)("span",{className:"entry-date light-dark lowered",children:new Date(e.created_at).toLocaleDateString()})]}),(0,fi.jsxs)("div",{className:"entry-id green-text lowered-more",children:["ID: ",e.entry_id]})]})]},e.entry_id))}),(0,fi.jsxs)("div",{className:"modal-actions",style:{display:"flex",gap:12},children:[(0,fi.jsx)("button",{type:"button",className:"btn btn-danger equal",onClick:b,disabled:l,children:"Cancel"}),(0,fi.jsx)("button",{type:"button",className:"btn btn-orange equal",onClick:()=>{0!==i.length?y(!0):alert("Please select entries to release")},disabled:0===i.length||l,children:l?"Releasing...":"Release Selected (".concat(i.length,")")})]})]})}),u&&(0,fi.jsx)("div",{className:"expanded-entry-overlay",onClick:v,children:(0,fi.jsxs)("div",{className:"expanded-entry-modal",onClick:e=>e.stopPropagation(),children:[(0,fi.jsxs)("div",{className:"expanded-entry-header",children:[(0,fi.jsx)("h3",{children:u.title}),(0,fi.jsx)("button",{className:"close-btn",onClick:v,title:"Close",children:"\xd7"})]}),(0,fi.jsx)("div",{className:"expanded-entry-content",children:m?(0,fi.jsx)("div",{className:"loading",children:"Loading entry details..."}):f?(0,fi.jsxs)(fi.Fragment,{children:[(0,fi.jsxs)("div",{className:"entry-info",children:[(0,fi.jsxs)("div",{className:"info-row",children:[(0,fi.jsx)("strong",{children:"Entry ID:"})," ",f.entry_id]}),(0,fi.jsxs)("div",{className:"info-row",children:[(0,fi.jsx)("strong",{children:"Type:"})," ",f.type]}),(0,fi.jsxs)("div",{className:"info-row",children:[(0,fi.jsx)("strong",{children:"Subtype:"})," ",f.entry_subtype]}),(0,fi.jsxs)("div",{className:"info-row",children:[(0,fi.jsx)("strong",{children:"Citation:"})," ",f.canonical_citation]})]}),f.summary&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h4",{children:"Summary:"}),(0,fi.jsx)("div",{className:"summary-text",children:f.summary})]}),f.tags&&f.tags.length>0&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h4",{children:"Tags:"}),(0,fi.jsx)("div",{className:"tags-list",children:f.tags.map(e=>(0,fi.jsx)("span",{className:"tag",children:e},e))})]}),f.key_concepts&&f.key_concepts.length>0&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h4",{children:"Key Concepts:"}),(0,fi.jsx)("div",{className:"tags-list",children:f.key_concepts.map(e=>(0,fi.jsx)("span",{className:"tag tag-concept",children:e},e))})]}),(f.applicability||f.penalties||f.defenses||f.time_limits||f.required_forms)&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h4",{children:"Legal Analysis:"}),(0,fi.jsxs)("div",{className:"info-grid",children:[f.applicability&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Applicability:"}),(0,fi.jsx)("span",{className:"value",children:f.applicability})]}),f.penalties&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Penalties:"}),(0,fi.jsx)("span",{className:"value",children:f.penalties})]}),f.defenses&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Defenses:"}),(0,fi.jsx)("span",{className:"value",children:f.defenses})]}),f.time_limits&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Time Limits:"}),(0,fi.jsx)("span",{className:"value",children:f.time_limits})]}),f.required_forms&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Required Forms:"}),(0,fi.jsx)("span",{className:"value",children:f.required_forms})]})]})]}),f.elements&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h4",{children:"Legal Elements:"}),(0,fi.jsx)("div",{className:"text-content",children:f.elements})]}),f.triggers&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h4",{children:"Triggers:"}),(0,fi.jsx)("div",{className:"text-content",children:f.triggers})]}),(f.violation_code||f.violation_name||f.fine_schedule||f.license_action)&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h4",{children:"Violation Information:"}),(0,fi.jsxs)("div",{className:"info-grid",children:[f.violation_code&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Violation Code:"}),(0,fi.jsx)("span",{className:"value",children:f.violation_code})]}),f.violation_name&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Violation Name:"}),(0,fi.jsx)("span",{className:"value",children:f.violation_name})]}),f.fine_schedule&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Fine Schedule:"}),(0,fi.jsx)("span",{className:"value",children:f.fine_schedule})]}),f.license_action&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"License Action:"}),(0,fi.jsx)("span",{className:"value",children:f.license_action})]})]})]}),(f.apprehension_flow||f.incident)&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h4",{children:"Enforcement Process:"}),(0,fi.jsxs)("div",{className:"info-grid",children:[f.apprehension_flow&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Apprehension Flow:"}),(0,fi.jsx)("span",{className:"value",children:f.apprehension_flow})]}),f.incident&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Incident Definition:"}),(0,fi.jsx)("span",{className:"value",children:f.incident})]})]})]}),(f.phases||f.forms||f.handoff)&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h4",{children:"Process Information:"}),(0,fi.jsxs)("div",{className:"info-grid",children:[f.phases&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Phases:"}),(0,fi.jsx)("span",{className:"value",children:f.phases})]}),f.forms&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Forms:"}),(0,fi.jsx)("span",{className:"value",children:f.forms})]}),f.handoff&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Handoff Procedures:"}),(0,fi.jsx)("span",{className:"value",children:f.handoff})]})]})]}),(f.rights_callouts||f.rights_scope||f.advice_points)&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h4",{children:"Rights and Protections:"}),(0,fi.jsxs)("div",{className:"info-grid",children:[f.rights_callouts&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Rights Callouts:"}),(0,fi.jsx)("span",{className:"value",children:f.rights_callouts})]}),f.rights_scope&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Rights Scope:"}),(0,fi.jsx)("span",{className:"value",children:f.rights_scope})]}),f.advice_points&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Advice Points:"}),(0,fi.jsx)("span",{className:"value",children:f.advice_points})]})]})]}),(f.jurisprudence||f.legal_bases)&&(0,fi.jsxs)("div",{className:"entry-section",children:[(0,fi.jsx)("h4",{children:"Legal Context:"}),(0,fi.jsxs)("div",{className:"info-grid",children:[f.jurisprudence&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Jurisprudence:"}),(0,fi.jsx)("span",{className:"value",children:f.jurisprudence})]}),f.legal_bases&&(0,fi.jsxs)("div",{className:"info-item",children:[(0,fi.jsx)("span",{className:"label",children:"Legal Bases:"}),(0,fi.jsx)("span",{className:"value",children:f.legal_bases})]})]})]}),(0,fi.jsxs)("div",{className:"entry-text",children:[(0,fi.jsx)("h4",{children:"Content:"}),(0,fi.jsx)("div",{className:"text-content",children:f.text})]}),f.provenance&&(0,fi.jsxs)("div",{className:"entry-provenance",children:[(0,fi.jsx)("h4",{children:"Provenance:"}),(0,fi.jsx)("pre",{className:"provenance-content",children:JSON.stringify(f.provenance,null,2)})]})]}):(0,fi.jsx)("div",{className:"error",children:"Failed to load entry details"})})]})}),g&&(0,fi.jsx)("div",{className:"expanded-entry-overlay dark-blur",onClick:()=>y(!1),children:(0,fi.jsxs)("div",{className:"confirm-modal dark-surface",onClick:e=>e.stopPropagation(),children:[(0,fi.jsxs)("h3",{children:["You are releasing ",i.length," entries"]}),(0,fi.jsx)("p",{style:{marginTop:"0.25rem"},children:"Confirming will add all selected entries into the KB."}),(0,fi.jsxs)("div",{className:"confirm-actions",children:[(0,fi.jsx)("button",{className:"btn btn-danger",onClick:()=>y(!1),disabled:l,children:"Go back"}),(0,fi.jsx)("button",{className:"btn btn-orange",onClick:async()=>{c(!0);try{const e="http://localhost:4000",t=await fetch("".concat(e,"/api/scraping/release-entries"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entryIds:i})}),r=await t.json();r.success?(alert("Successfully released ".concat(r.released_count," entries!")),n(),o([]),window.location.reload()):alert("Failed to release entries")}catch(e){console.error("Error releasing entries:",e),alert("Failed to release entries")}finally{c(!1),y(!1)}},disabled:l,children:l?"Releasing...":"Confirm"})]})]})}),(0,fi.jsx)("style",{children:'\n        .release-modal-content {\n          max-width: 800px;\n          margin: 0 auto;\n        }\n\n        .no-entries {\n          text-align: center;\n          padding: 2rem;\n          color: #6c757d;\n        }\n\n        .no-entries p {\n          margin: 0.5rem 0;\n        }\n\n        .entries-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 1.5rem;\n          padding-bottom: 1rem;\n          border-bottom: 1px solid #dee2e6;\n        }\n\n        .entries-header h3 { margin: 0; color: #333; }\n        .entries-header .entries-title { color: #ffffff; }\n\n        .count-badge {\n          background: #111827;\n          color: #e5e7eb;\n          border: 1px solid #1f2937;\n          font-size: 0.85rem;\n          padding: 2px 8px;\n          border-radius: 999px;\n          margin-left: 6px;\n        }\n\n        .header-actions {\n          display: flex;\n          gap: 0.5rem;\n        }\n\n        .entries-list {\n          max-height: 400px;\n          overflow-y: auto;\n          border: 1px solid #dee2e6;\n          border-radius: 6px;\n          margin-bottom: 1.5rem;\n        }\n\n        .entry-item {\n          display: flex;\n          align-items: flex-start;\n          padding: 1rem;\n          border-bottom: 1px solid #f8f9fa;\n        }\n\n        .entry-item:last-child {\n          border-bottom: none;\n        }\n\n        .entry-checkbox {\n          margin-right: 1rem;\n          margin-top: 0.25rem;\n        }\n\n        .entry-checkbox input[type="checkbox"] {\n          width: 18px;\n          height: 18px;\n          cursor: pointer;\n        }\n\n        .entry-details {\n          flex: 1;\n        }\n\n        .entry-details { cursor: pointer; }\n\n        .entry-title { font-weight: 600; margin-bottom: 0.5rem; }\n        .entry-title-orange { color: #d97706; }\n\n        .entry-meta { display: flex; gap: 1rem; margin-bottom: 0.25rem; font-size: 0.875rem; color: #6c757d; }\n        .lowered { position: relative; top: 2px; }\n        .lowered-more { position: relative; top: 4px; }\n\n        .entry-type.orange-chip { background: #d97706; color: #ffffff; padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: 500; }\n        .entry-subtype.subtype-text { background: none; color: #b45309; padding: 0; font-weight: 600; }\n        .entry-date.light-dark { background: none; color: #6b7280; padding: 0; }\n        .green-text { color: #16a34a; }\n\n        .entry-id { font-size: 0.75rem; color: #16a34a; font-family: monospace; background: none; }\n        .entry-checkbox input[type="checkbox"]:checked { accent-color: #d97706; }\n\n        .modal-actions {\n          display: flex;\n          gap: 1rem;\n          justify-content: flex-end;\n          margin-top: 1.5rem;\n        }\n\n        .btn {\n          padding: 0.75rem 1.5rem;\n          border: none;\n          border-radius: 6px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.2s;\n        }\n\n        .btn:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        .btn-primary {\n          background-color: #007bff;\n          color: white;\n        }\n\n        .btn-primary:hover:not(:disabled) {\n          background-color: #0056b3;\n        }\n\n        .btn-secondary {\n          background-color: #6c757d;\n          color: white;\n        }\n\n        .btn-secondary:hover:not(:disabled) {\n          background-color: #545b62;\n        }\n\n        .btn-orange { background-color: #d97706; color: #ffffff; }\n        .btn-orange:hover:not(:disabled) { background-color: #b45309; }\n\n        /* Expanded Entry Modal Styles */\n        .expanded-entry-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; display: flex; align-items: center; justify-content: center; z-index: 1001; }\n        .dark-blur { background-color: rgba(0,0,0,0.55); backdrop-filter: blur(6px); }\n\n        .expanded-entry-modal {\n          background: white;\n          border-radius: 8px;\n          max-width: 90vw;\n          max-height: 90vh;\n          width: 800px;\n          display: flex;\n          flex-direction: column;\n          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n        }\n\n        .confirm-modal { border-radius: 12px; width: 520px; padding: 1.25rem 1.5rem; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }\n        .dark-surface { background: #0f172a; color: #e5e7eb; border: 1px solid rgba(148,163,184,0.15); }\n        .dark-surface h3 { color: #e5e7eb; margin: 0 0 0.25rem 0; }\n        .dark-surface p { color: #cbd5e1; }\n\n        .confirm-actions {\n          display: flex;\n          justify-content: flex-end;\n          gap: 0.75rem;\n          margin-top: 1rem;\n        }\n\n        .expanded-entry-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 1rem 1.5rem;\n          border-bottom: 1px solid #dee2e6;\n          background-color: #f8f9fa;\n          border-radius: 8px 8px 0 0;\n        }\n\n        .expanded-entry-header h3 {\n          margin: 0;\n          color: #333;\n          font-size: 1.25rem;\n        }\n\n        .close-btn {\n          background: none;\n          border: none;\n          font-size: 1.5rem;\n          cursor: pointer;\n          color: #6c757d;\n          padding: 0;\n          width: 30px;\n          height: 30px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-radius: 50%;\n          transition: background-color 0.2s;\n        }\n\n        .close-btn:hover {\n          background-color: #e9ecef;\n          color: #495057;\n        }\n\n        .expanded-entry-content {\n          padding: 1.5rem;\n          overflow-y: auto;\n          flex: 1;\n        }\n\n        .entry-info {\n          margin-bottom: 1.5rem;\n          padding: 1rem;\n          background-color: #f8f9fa;\n          border-radius: 6px;\n        }\n\n        .info-row {\n          margin-bottom: 0.5rem;\n          display: flex;\n          gap: 0.5rem;\n        }\n\n        .info-row strong {\n          min-width: 100px;\n          color: #495057;\n        }\n\n        .entry-text {\n          margin-bottom: 1.5rem;\n        }\n\n        .entry-text h4 {\n          margin: 0 0 1rem 0;\n          color: #333;\n          font-size: 1.1rem;\n        }\n\n        .text-content {\n          padding: 1rem;\n          background-color: #f8f9fa;\n          border-radius: 6px;\n          white-space: pre-wrap;\n          line-height: 1.6;\n          max-height: 300px;\n          overflow-y: auto;\n        }\n\n        .entry-provenance {\n          margin-bottom: 1rem;\n        }\n\n        .entry-provenance h4 {\n          margin: 0 0 1rem 0;\n          color: #333;\n          font-size: 1.1rem;\n        }\n\n        .provenance-content {\n          padding: 1rem;\n          background-color: #f8f9fa;\n          border-radius: 6px;\n          font-size: 0.9rem;\n          max-height: 200px;\n          overflow-y: auto;\n          margin: 0;\n        }\n\n        .loading, .error {\n          text-align: center;\n          padding: 2rem;\n          color: #6c757d;\n        }\n\n        .error {\n          color: #dc3545;\n        }\n      '})]})}const Tc="http://localhost:4000",Oc="".concat(Tc.endsWith("/api")?Tc:Tc+"/api");const Ic=xi("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Rc=xi("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Mc=xi("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Lc=xi("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),zc=xi("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function Bc(e){let{isOpen:t,onClose:n}=e;const[a,s]=r.useState(""),[i,o]=r.useState(!1),[l,u]=r.useState([]),[d,f]=r.useState([]),[p,m]=r.useState(null),[h,g]=r.useState(!0),y=r.useRef(null);r.useEffect(()=>{try{const e=localStorage.getItem("villy_chat_history");if(e){const t=JSON.parse(e);Array.isArray(t)&&u(t)}}catch(e){}},[]),r.useEffect(()=>{try{localStorage.setItem("villy_chat_history",JSON.stringify(l))}catch(e){}},[l]),r.useEffect(()=>{try{const e=y.current;e&&(e.scrollTop=e.scrollHeight)}catch(e){}},[l,i]);const v=async()=>{const e=a.trim();if(!e||i)return;o(!0),m(null),f([]);const t={id:"".concat(Date.now()),role:"user",content:e,ts:Date.now()};u(e=>[...e,t]),s("");const n=await async function(e){try{const t="undefined"!==typeof localStorage?localStorage.getItem("auth_token"):null,n=await fetch("".concat(Oc,"/chat"),{method:"POST",headers:c({"Content-Type":"application/json"},t?{Authorization:"Bearer ".concat(t)}:{}),body:JSON.stringify({question:e})}),r=await n.json();return n.ok?{answer:(null===r||void 0===r?void 0:r.answer)||"",sources:(null===r||void 0===r?void 0:r.sources)||[]}:{answer:"",sources:[],error:(null===r||void 0===r?void 0:r.error)||"Chat server error"}}catch(ou){return{answer:"",sources:[],error:String((null===ou||void 0===ou?void 0:ou.message)||ou)}}}(e);n.error&&m(n.error);const r={id:"".concat(Date.now()+1),role:"assistant",content:n.answer||"",ts:Date.now()+1};u(e=>[...e,r]),f(n.sources||[]),o(!1)};return(0,fi.jsx)(Jl,{isOpen:t,onClose:n,title:"Ask Villy (RAG)",subtitle:null,children:(0,fi.jsxs)("div",{className:"space-y-3",children:[(0,fi.jsxs)("div",{ref:y,className:"rounded-md border bg-gray-50 max-h-[50vh] overflow-auto p-3",children:[0===l.length&&(0,fi.jsx)("div",{className:"text-sm text-gray-500 text-center py-10",children:"Start by asking a question"}),l.map(e=>(0,fi.jsx)("div",{className:"mb-3 flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,fi.jsx)("div",{className:"max-w-[85%] whitespace-pre-wrap text-sm p-2 rounded-md border bg-white shadow-sm ".concat("user"===e.role?"bg-blue-50 border-blue-200":""),children:(0,fi.jsxs)("div",{className:"flex items-start gap-2",children:[(0,fi.jsx)("div",{className:"flex-1",children:e.content}),(0,fi.jsx)("button",{className:"opacity-60 hover:opacity-100",title:"Copy",onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e)}catch(t){}})(e.content),children:(0,fi.jsx)(Ic,{size:14})})]})})},e.id)),i&&(0,fi.jsxs)("div",{className:"mb-2 flex items-center gap-2 text-xs text-gray-500",children:[(0,fi.jsx)(Rc,{className:"animate-spin",size:14}),"Thinking\u2026"]})]}),(0,fi.jsxs)("div",{className:"space-y-2",children:[(0,fi.jsx)("textarea",{className:"kb-input",rows:3,placeholder:"Ask a question\u2026 (Enter to send, Shift+Enter for new line)",value:a,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v())},disabled:i}),(0,fi.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,fi.jsx)("button",{className:"modal-button",onClick:v,disabled:i||!a.trim(),children:i?(0,fi.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,fi.jsx)(Rc,{className:"animate-spin",size:16})," Asking\u2026"]}):(0,fi.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,fi.jsx)(Mc,{size:16})," Ask"]})}),(0,fi.jsx)("button",{className:"modal-button cancel",onClick:n,children:"Close"}),(0,fi.jsx)("button",{className:"modal-button cancel",onClick:()=>{u([]),f([]),m(null);try{localStorage.removeItem("villy_chat_history")}catch(e){}},disabled:0===l.length,children:(0,fi.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,fi.jsx)(Yo,{size:16})," Clear"]})}),(0,fi.jsx)("button",{className:"modal-button cancel",onClick:async()=>{try{const e=[...l].reverse().find(e=>"assistant"===e.role);e&&await navigator.clipboard.writeText(e.content)}catch(e){}},disabled:!l.some(e=>"assistant"===e.role),children:(0,fi.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,fi.jsx)(Ic,{size:16})," Copy last answer"]})})]})]}),p&&(0,fi.jsx)("div",{className:"text-red-600 text-sm",children:p}),d&&d.length>0&&(0,fi.jsxs)("div",{className:"space-y-2",children:[(0,fi.jsxs)("button",{className:"w-full flex items-center justify-between text-left text-sm font-semibold",onClick:()=>g(e=>!e),children:[(0,fi.jsxs)("span",{children:["Sources (",d.length,")"]}),h?(0,fi.jsx)(Lc,{size:16}):(0,fi.jsx)($o,{size:16})]}),h&&(0,fi.jsx)("ul",{className:"space-y-2 text-sm",children:d.map((e,t)=>(0,fi.jsxs)("li",{className:"p-3 rounded border bg-white",children:[(0,fi.jsxs)("div",{className:"font-medium",children:[e.title," ",e.type?"(".concat(e.type,")"):""]}),e.canonical_citation&&(0,fi.jsx)("div",{className:"text-gray-600",children:e.canonical_citation}),e.summary&&(0,fi.jsx)("div",{className:"text-gray-700 mt-1",children:e.summary}),(0,fi.jsx)("div",{className:"mt-2",children:(0,fi.jsxs)("a",{href:"/entry/".concat(encodeURIComponent(e.entry_id)),className:"inline-flex items-center gap-1 text-blue-600 hover:underline",target:"_blank",rel:"noreferrer",children:[(0,fi.jsx)(zc,{size:14})," View entry"]})})]},t))})]})]})})}const Vc=(0,r.createContext)(void 0),Uc=()=>{const e=(0,r.useContext)(Vc);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},Wc=e=>{let{children:t}=e;const[n,a]=(0,r.useState)([]),s={toasts:n,addToast:(0,r.useCallback)(e=>{const t="toast_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),n=c(c({},e),{},{id:t});return console.log("Adding toast:",n),a(e=>{const t=[...e,n];return console.log("Updated toasts:",t),t}),e.persistent||setTimeout(()=>{a(e=>e.filter(e=>e.id!==t))},5e3),t},[]),removeToast:(0,r.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),clearAllToasts:(0,r.useCallback)(()=>{a([])},[])};return(0,fi.jsx)(Vc.Provider,{value:s,children:t})},qc=e=>{let{onScrapingClick:t,onEntryGenerationClick:n}=e;const{processes:r}=Sc(),a=r.filter(e=>"running"===e.status),s=r.filter(e=>"completed"===e.status);return 0===a.length&&0===s.length?null:(0,fi.jsxs)("div",{className:"process-status",children:[a.map(e=>(0,fi.jsx)("div",{className:"process-item",children:"scraping"===e.type?(0,fi.jsx)("span",{className:"process-link",onClick:()=>t(e.sessionId),children:"Scraping in process..."}):(0,fi.jsx)("span",{className:"process-link",onClick:()=>n(e.sessionId||""),children:"Entry Generation in process..."})},e.id)),s.map(e=>(0,fi.jsx)("div",{className:"process-item",children:"scraping"===e.type?(0,fi.jsx)("span",{className:"process-link",onClick:()=>t(e.sessionId),children:"Scraping completed - View results"}):(0,fi.jsx)("span",{className:"process-link",onClick:()=>n(e.sessionId||""),children:"Entry Generation completed - View results"})},e.id))]})},Hc=()=>{const{toasts:e,removeToast:t}=Uc(),n=e=>{switch(e){case"success":return(0,fi.jsx)(Ml,{size:20});case"error":return(0,fi.jsx)(Ll,{size:20});case"warning":return(0,fi.jsx)(Rl,{size:20});default:return(0,fi.jsx)(Il,{size:20})}},r=e=>{switch(e){case"success":return"toast-success";case"error":return"toast-error";case"warning":return"toast-warning";default:return"toast-info"}};return 0===e.length?null:(0,fi.jsx)("div",{className:"toast-container",children:e.map(e=>(0,fi.jsx)("div",{className:"toast ".concat(r(e.type)),children:(0,fi.jsxs)("div",{className:"toast-content",children:[(0,fi.jsx)("div",{className:"toast-icon",children:n(e.type)}),(0,fi.jsxs)("div",{className:"toast-text",children:[(0,fi.jsx)("div",{className:"toast-title",children:e.title}),e.message&&(0,fi.jsx)("div",{className:"toast-message",children:e.message})]}),(0,fi.jsx)("button",{className:"toast-close",onClick:()=>t(e.id),children:(0,fi.jsx)(Ol,{size:16})})]})},e.id))})},$c=xi("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Zc=xi("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Jc=xi("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),Yc=xi("file-down",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Kc="http://localhost:4000";function Qc(){return(0,fi.jsx)("button",{"aria-label":"Refresh from DB",className:"icon-btn",onClick:()=>{try{localStorage.removeItem("law_entries"),sessionStorage.clear()}catch(e){}try{window.dispatchEvent(new Event("force-refresh-entries"))}catch(t){}},title:"Refresh from DB",style:{borderRadius:"9999px"},children:(0,fi.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,fi.jsx)("path",{d:"M17.65 6.35A7.95 7.95 0 0 0 12 4V1L7 6l5 5V7a6 6 0 1 1-6 6H4a8 8 0 1 0 13.65-6.65z"})})})}function Gc(){return(()=>{const{processes:e,updateProcess:t,removeProcess:n}=Sc(),{addToast:a}=Uc(),s=(0,r.useCallback)(async e=>{try{let n="";if(("scraping"===e.type||"entry_generation"===e.type)&&(n="/api/scraping/session/".concat(e.sessionId,"/status")),!n)return;const r=await fetch("".concat("http://localhost:4000").concat(n));if(!r.ok)return void console.log("Failed to fetch status for ".concat(e.sessionId,": ").concat(r.status));const s=await r.json();if(console.log("Status check for ".concat(e.sessionId,":"),s),s.success&&s.status){const n=s.status.status;console.log("Session ".concat(e.sessionId," status: ").concat(n)),"completed"===n?(t(e.id,{status:"completed",completedAt:new Date}),console.log("Creating completion toast for ".concat(e.type," process")),"scraping"===e.type?a({type:"success",title:"Scraping Session is finished",persistent:!0}):"entry_generation"===e.type&&a({type:"success",title:"Entry Generation is finished",persistent:!0})):"failed"===n&&(t(e.id,{status:"failed",completedAt:new Date,error:s.status.error||"Process failed"}),a({type:"error",title:"".concat("scraping"===e.type?"Scraping":"Entry Generation"," failed"),message:s.status.error||"An error occurred during the process",persistent:!0}))}}catch(n){console.error("Error checking process status:",n)}},[t,a]);(0,r.useEffect)(()=>{const t=e.filter(e=>"running"===e.status);if(0===t.length)return;const n=setInterval(()=>{t.forEach(e=>{s(e)})},5e3);return()=>clearInterval(n)},[e,s]),(0,r.useEffect)(()=>{e.filter(e=>"completed"===e.status&&e.completedAt&&Date.now()-e.completedAt.getTime()>36e5).forEach(e=>{n(e.id)})},[e,n])})(),(0,fi.jsx)(Xc,{})}function Xc(){return(0,fi.jsx)(Xl,{children:(0,fi.jsx)(mt,{children:(0,fi.jsxs)(Ie,{children:[(0,fi.jsx)(Te,{path:"/",element:(0,fi.jsx)(eu,{})}),(0,fi.jsx)(Te,{path:"/dashboard",element:(0,fi.jsx)(eu,{})}),(0,fi.jsx)(Te,{path:"/law-entry/:step",element:(0,fi.jsx)(tu,{})}),(0,fi.jsx)(Te,{path:"/entry/:entryId",element:(0,fi.jsx)(nu,{})}),(0,fi.jsx)(Te,{path:"/entry/:entryId/edit",element:(0,fi.jsx)(ru,{})}),(0,fi.jsx)(Te,{path:"*",element:(0,fi.jsx)(eu,{})})]})})})}function eu(){return(0,fi.jsx)(au,{currentView:"list"})}function tu(){const{step:e}=ge();return(0,fi.jsx)(au,{currentView:"form",formStep:parseInt(e)||1})}function nu(){const{entryId:e}=ge();return(0,fi.jsx)(au,{currentView:"view",selectedEntryId:e})}function ru(){const{entryId:e}=ge();return(0,fi.jsx)(au,{currentView:"form",isEditing:!0,selectedEntryId:e})}function au(e){let{currentView:t="list",isEditing:n=!1,formStep:a=1,selectedEntryId:s=null,importedData:i=null}=e;const{addProcess:o}=Sc(),l=he(),u=fe(),d={id:1,name:"User",personId:"P1"},[f]=(0,r.useState)(t),[p,m]=(0,r.useState)(s),[h,g]=(0,r.useState)(null),y=(0,r.useRef)(new Set),[v,b]=(0,r.useState)(()=>{try{const e=sessionStorage.getItem("importedEntryData");return e?JSON.parse(e):null}catch(e){return null}});(0,r.useEffect)(()=>{if("form"===f&&!v)try{const e=sessionStorage.getItem("importedEntryData");if(e){const t=JSON.parse(e);b(t),console.log("Restored imported data from sessionStorage:",t)}}catch(ou){console.error("Failed to restore imported data:",ou)}},[f,v]);const[x,_]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[j,N]=(0,r.useState)(1),[S,C]=(0,r.useState)(null),[D,E]=(0,r.useState)(!1),[A,F]=(0,r.useState)(null),[P,T]=(0,r.useState)(!1),[O,I]=(0,r.useState)(null),[R,M]=(0,r.useState)([]),[L,z]=(0,r.useState)(!1),[B,V]=(0,r.useState)(!1),[U,W]=(0,r.useState)(0),[q,H]=(0,r.useState)(!1),[$,Z]=(0,r.useState)(1),[J,Y]=(0,r.useState)(null),[K,Q]=(0,r.useState)(null),[G,X]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(!0),[ne,re]=(0,r.useState)(!1),[ae,se]=(0,r.useState)(null),[ie,oe]=(0,r.useState)(!1),[le,ce]=(0,r.useState)(0),[ue,de]=(0,r.useState)(!1),[pe,me]=(0,r.useState)(!1),[ge,ye]=(0,r.useState)(!1),[ve,be]=(0,r.useState)(null),[xe,_e]=(0,r.useState)(!1),[we,ke]=(0,r.useState)([]),[je,Ne]=(0,r.useState)(!1),[Se,Ce]=(0,r.useState)(!1),[De,Ee]=(0,r.useState)(!1),[Ae,Fe]=(0,r.useState)(""),[Pe,Te]=(0,r.useState)(!1),[Oe,Ie]=(0,r.useState)(new Date),[Re,Me]=(0,r.useState)(!1),[Le,ze]=(0,r.useState)(!1),[Be,Ve]=(0,r.useState)(!1),[Ue,We]=(0,r.useState)(!1),[qe,He]=(0,r.useState)(()=>{try{return"dark"===localStorage.getItem("app_theme")}catch(e){return!1}});(0,r.useEffect)(()=>{try{if(sessionStorage.getItem("entryCreated")&&"/dashboard"===u.pathname){try{localStorage.removeItem("kb_entry_draft"),localStorage.removeItem("kb_draft"),localStorage.removeItem("kb_drafts"),Object.keys(localStorage).forEach(e=>{(e.startsWith("kb_entry_")||e.startsWith("entry_draft_")||e.startsWith("kb_draft")||e.includes("draft")||e.includes("autosave"))&&localStorage.removeItem(e)}),console.log("Draft clearing on dashboard return")}catch(ou){console.warn("Failed to clear drafts on dashboard return:",ou)}sessionStorage.removeItem("entryCreated")}}catch(e){}},[u.pathname]),(0,r.useEffect)(()=>{(async()=>{try{te(!0);const t=await(0,Lt.loadPlanFromJson)("/Civilify_KB30_Schedule_CorePH.json");Y(t);const n="2025-09-04";!function(e){try{localStorage.setItem(Bt,e)}catch(t){}}(n),Q(n);try{window.__KB_PLAN__=t,window.__KB_DAY1__=n}catch(e){}}catch(t){console.error("Failed to load plan JSON:",t),Y([]),Q("2025-09-04");try{window.__KB_PLAN__=[],window.__KB_DAY1__="2025-09-04"}catch(e){}}finally{te(!1)}})()},[]),(0,r.useEffect)(()=>{const e=setInterval(()=>Ie(new Date),1e3);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{const e=document.documentElement;qe?e.classList.add("dark-mode"):e.classList.remove("dark-mode");try{localStorage.setItem("app_theme",qe?"dark":"light")}catch(t){}},[qe]),(0,r.useEffect)(()=>{const e=()=>Z(e=>e);return window.addEventListener("refresh-entries",e),window.addEventListener("refresh-progress",e),()=>{window.removeEventListener("refresh-entries",e),window.removeEventListener("refresh-progress",e)}},[]);const $e=Array.isArray(J)?J:J&&Array.isArray(J.rows)?J.rows:J&&Array.isArray(J.data)?J.data:[],{entries:Ze,setEntries:Je,loading:Ye,error:Ke,clearError:Qe,addEntry:Ge,updateEntry:Xe,deleteEntry:et,getEntryById:tt,getEntryByEntryId:nt,searchEntries:rt,exportEntries:at,exportSingleEntry:st,importEntries:it,clearAllEntries:ot,getStorageStats:lt,getAllTeamProgress:ct,getYesterdayTeamProgress:ut,updateProgressForEntry:dt,checkDailyCompletion:ft}=$t(),pt=(0,r.useCallback)(()=>{if(!$e||!K)return;const e=new Date(Oe);e.setDate(e.getDate()-1);const t=(0,Lt.computeDayIndex)(e,K),n=(0,Lt.rowsForDay)($e,t),r=[],a={1:"Arda",2:"Delos Cientos",3:"Paden",4:"Sendrijas",5:"Tagarao"};n.forEach(t=>{const n=parseInt(t.Person.replace("P","")),s=a[n];if(!s)return;const i=(0,Lt.toISODate)((0,Lt.getPlanDate)(e)),o=Ze.filter(e=>e.created_by===n&&(0,Lt.toISODate)((0,Lt.getPlanDate)(new Date(e.created_at)))===i),l={};o.forEach(e=>{l[e.type]=(l[e.type]||0)+1});const c=t.Total||0,u=Object.values(l).reduce((e,t)=>e+t,0);if(u<c){const e={personId:n,personName:s,totalDone:u,totalReq:c,quotas:{constitution_provision:t.constitution_provision||0,statute_section:t.statute_section||0,rule_of_court:t.rule_of_court||0,agency_circular:t.agency_circular||0,doj_issuance:t.doj_issuance||0,executive_issuance:t.executive_issuance||0,rights_advisory:t.rights_advisory||0,city_ordinance_section:t.city_ordinance_section||0},doneByType:l};r.push(e)}}),M(r);try{sessionStorage.setItem("incompleteEntries",JSON.stringify(r))}catch(ou){console.error("Failed to store incomplete entries in sessionStorage:",ou)}},[$e,K,Ze]);(0,r.useEffect)(()=>{pt()},[pt]);const mt=!0;(0,r.useEffect)(()=>{},[f,mt,l,ee]),(0,r.useEffect)(()=>{(async()=>{if(!s||"view"!==f&&!n||Ye)return;let e=tt(s);if(console.log("Found entry:",e),!e&&!v)try{console.log("Entry not found in memory, fetching from DB by id:",s);const t=await Pt(s);t&&(e=c(c({},t),{},{id:t.entry_id}),console.log("Fetched entry from DB:",e))}catch(ou){console.warn("Failed to fetch entry by id:",ou)}e?(n&&(console.log("Setting editing entry:",e),g(e)),m(s)):v?(console.log("No existing entry found, but imported data available for new entry creation"),m(null)):(console.log("Entry not found and no imported data, redirecting to dashboard"),l("/dashboard"))})()},[s,f,n,tt,l,Ze,Ye,v]);const ht=lt(),[gt,yt]=(ct(),ut(),(0,r.useState)([]));(0,r.useEffect)(()=>{(async()=>{try{const e="http://localhost:4000",t=e.endsWith("/api")?e:"".concat(e,"/api"),n=await fetch("".concat(t,"/auth/team-members"));if(n.ok){const e=await n.json();yt(e.team_members)}}catch(Ke){console.error("Error fetching team members:",Ke),yt([{id:1,name:"Arda",person_id:"P1"},{id:2,name:"Delos Cientos",person_id:"P2"},{id:3,name:"Paden",person_id:"P3"},{id:4,name:"Sendrijas",person_id:"P4"},{id:5,name:"Tagarao",person_id:"P5"}])}})()},[]),(0,r.useEffect)(()=>{const e=()=>_e(!0);return window.addEventListener("open-release-entries-modal",e),()=>window.removeEventListener("open-release-entries-modal",e)},[]);const vt=(0,r.useMemo)(()=>{const e={};return gt.forEach(t=>{e[t.id]=t.name}),e},[gt]);(0,r.useEffect)(()=>{const e=()=>{const e=window.pageYOffset||document.documentElement.scrollTop;Z(e>0?.7:1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const bt=e=>{console.log("handleEditEntry called with entryId:",e),console.log("Entry type:",typeof e);const t=Ze.find(t=>t.id===e||t.entry_id===e);t?(g(t),sessionStorage.setItem("cameFromDashboard","true"),l("/entry/".concat(e,"/edit?step=1"))):(console.error("Entry not found for editing:",e),alert("Entry not found for editing"))},xt=e=>{const t=Ze.find(t=>t.id===e);I(t),T(!0)},_t=()=>{T(!1),I(null)};(0,r.useEffect)(()=>{const e=()=>me(!0);return window.addEventListener("open-import-json-modal",e),()=>window.removeEventListener("open-import-json-modal",e)},[]);const wt=()=>{se(null),re(!1)};(0,r.useEffect)(()=>{if(je){const e=setTimeout(()=>{Ne(!1),l("/dashboard")},5e3);return()=>clearTimeout(e)}},[je,l]),(0,r.useEffect)(()=>{if(Se){const e=setTimeout(()=>{Ce(!1),l("/dashboard")},5e3);return()=>clearTimeout(e)}},[Se,l]);const kt=e=>{C(e),N(2)},jt=()=>{k(!1),N(1),C(null)};return Ye?(0,fi.jsx)("div",{className:"App",children:(0,fi.jsxs)("div",{className:"loading",children:[(0,fi.jsx)("div",{className:"loading-spinner"}),(0,fi.jsx)("p",{children:"Loading..."})]})}):(0,fi.jsxs)("div",{className:"App",children:["form"!==f&&(0,fi.jsxs)("header",{className:"App-header",style:{background:qe?"linear-gradient(135deg, rgba(178, 84, 34, ".concat($,") 0%, rgba(153, 61, 28, ").concat($,") 100%)"):"linear-gradient(135deg, rgba(255, 140, 66, ".concat($,") 0%, rgba(255, 107, 53, ").concat($,") 100%)")},children:[(0,fi.jsxs)("div",{className:"header-left",children:[(0,fi.jsx)("h1",{children:"Civilify Law Entry"}),(0,fi.jsxs)("span",{className:"header-entries-count",children:[ht.totalEntries," entries"]})]}),(0,fi.jsxs)("div",{className:"header-actions",children:[(0,fi.jsx)("button",{className:"link-button",onClick:async()=>{try{const e=await It();0===(Array.isArray(null===e||void 0===e?void 0:e.batches)?e.batches:[]).length?(V(!0),W(0),setTimeout(()=>W(1),10),setTimeout(()=>W(0),1800),setTimeout(()=>V(!1),2e3)):z(!0)}catch(e){V(!0),W(0),setTimeout(()=>W(1),10),setTimeout(()=>W(0),1800),setTimeout(()=>V(!1),2e3)}},title:"View Scrape Batches",style:{textDecoration:"underline",color:"white"},children:"View Scrape Batches"}),(0,fi.jsx)(Qc,{}),(0,fi.jsx)("button",{"aria-label":"Toggle theme",className:"theme-toggle ".concat(qe?"theme-toggle--dark":"theme-toggle--light"),onClick:()=>He(e=>!e),title:qe?"Switch to light mode":"Switch to dark mode",children:qe?(0,fi.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,fi.jsx)("path",{d:"M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z"})}):(0,fi.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,fi.jsx)("path",{d:"M6.76 4.84l-1.8-1.79L3.17 4.84l1.79 1.79 1.8-1.79zM1 13h3v-2H1v2zm10 10h2v-3h-2v3zm7.03-3.34l1.79 1.79 1.79-1.79-1.79-1.79-1.79 1.79zM20 11v2h3v-2h-3zm-2.76-6.16l1.8-1.79-1.79-1.79-1.79 1.79 1.78 1.79zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14a6 6 0 110-12 6 6 0 010 12zM4.34 17.66l-1.79 1.79 1.79 1.79 1.79-1.79-1.79-1.79z"})})})]})]}),"form"!==f&&(0,fi.jsxs)("nav",{className:"App-nav",children:[(0,fi.jsxs)("div",{className:"nav-center",children:[(0,fi.jsxs)("button",{onClick:async()=>{Me(!0);try{R.find(e=>e.personName===(null===d||void 0===d?void 0:d.name));H(!1),sessionStorage.removeItem("yesterdayMode"),sessionStorage.removeItem("yesterdayQuotas");if("1"===sessionStorage.getItem("entryJustCreated")){try{localStorage.removeItem("kb_entry_draft"),localStorage.removeItem("kb_draft"),localStorage.removeItem("kb_drafts"),Object.keys(localStorage).forEach(e=>{(e.startsWith("kb_entry_")||e.startsWith("entry_draft_")||e.startsWith("kb_draft")||e.includes("draft")||e.includes("autosave"))&&localStorage.removeItem(e)}),console.log("Cleared all drafts after successful entry creation")}catch(ou){console.warn("Failed to clear drafts:",ou)}return g(null),sessionStorage.setItem("cameFromDashboard","true"),void l("/law-entry/1")}try{const t=localStorage.getItem("kb_entry_draft");if(t)try{const e=JSON.parse(t);if(e&&"object"===typeof e&&Object.keys(e).length>0)return F(e),void E(!0)}catch(e){}}catch(e){}g(null),sessionStorage.setItem("cameFromDashboard","true"),l("/law-entry/1")}finally{Me(!1)}},className:"btn-primary",disabled:"form"===f||Re,children:[(0,fi.jsx)(Ko,{size:18,style:{marginRight:"8px"}}),Re?"Loading...":"Create New Entry"]}),(0,fi.jsxs)("button",{onClick:async()=>{try{const e=await fetch("".concat(Kc,"/api/scraping/draft-entries")),t=await e.json();t.success?(ke(t.entries),_e(!0)):alert("Failed to fetch draft entries")}catch(Ke){console.error("Error fetching draft entries:",Ke),alert("Failed to fetch draft entries")}},className:"btn-release",style:{whiteSpace:"nowrap"},children:[(0,fi.jsx)($c,{size:18,style:{marginRight:"8px"}}),"Release Entries"]}),(0,fi.jsxs)("button",{onClick:()=>{ye(!0)},className:"btn-import",style:{whiteSpace:"nowrap"},children:[(0,fi.jsx)(Zc,{size:18,style:{marginRight:"8px"}}),"Scrape Entries"]}),(0,fi.jsxs)("button",{onClick:()=>X(!0),className:"btn-secondary",style:{whiteSpace:"nowrap"},children:[(0,fi.jsx)(Jc,{size:18,style:{marginRight:"8px"}}),"Ask Villy (RAG)"]}),(0,fi.jsxs)("button",{onClick:()=>{try{at()}catch(e){console.error("Error exporting entries:",e),alert("Failed to export entries. Please try again.")}},className:"btn-secondary",style:{whiteSpace:"nowrap"},children:[(0,fi.jsx)(Yc,{size:18,style:{marginRight:"8px"}}),"Export Entries"]}),(0,fi.jsxs)("button",{onClick:()=>{k(!0),N(1),C(null)},className:"btn-danger",style:{whiteSpace:"nowrap"},children:[(0,fi.jsx)(Yo,{size:18,style:{marginRight:"8px"}}),"Clear Entries"]})]}),(0,fi.jsx)(qc,{onScrapingClick:e=>{ye(!0),e&&be(e)},onEntryGenerationClick:e=>{ye(!0)}})]}),(0,fi.jsxs)("main",{className:"App-main",children:[Ke&&(0,fi.jsxs)("div",{className:"error-message",children:[(0,fi.jsx)("strong",{children:"Error:"})," ",Ke]}),"list"===f&&(0,fi.jsx)(yc,{entries:Ze,onViewEntry:e=>{l("/entry/".concat(e))},onEditEntry:bt,onDeleteEntry:xt,onExportEntry:st,searchEntries:rt,teamMemberNames:vt}),"list"===f&&"notifications"===new URLSearchParams(u.search).get("tab")&&(0,fi.jsx)(_c,{}),"form"===f&&(0,fi.jsx)(fi.Fragment,{children:(0,fi.jsx)(oc,{entry:h||v,existingEntries:Ze,onSave:async e=>{console.log("\ud83c\udfaf HANDLE SAVE ENTRY CALLED"),console.log("\ud83d\udcdd Entry data:",e),console.log("\ud83d\udd0d Editing entry:",h),console.log("\ud83c\udd94 Entry ID:",e.entry_id);const t=e.entry_id;if(y.current.has(t))console.log("Entry already being saved, ignoring duplicate submission:",t);else{y.current.add(t);try{const t="true"===sessionStorage.getItem("yesterdayMode"),a=JSON.parse(sessionStorage.getItem("incompleteEntries")||"[]").some(e=>e.personId===(null===d||void 0===d?void 0:d.personId)||e.personName===(null===d||void 0===d?void 0:d.name));if(t||a){const t=new Date;t.setDate(t.getDate()-1),e.created_at=t.toISOString(),console.log("Yesterday mode or incomplete entries: Setting created_at to",e.created_at)}const s=h&&h.id||p||null;if(s){console.log("\ud83d\udd04 UPDATE FLOW STARTED"),console.log("\ud83d\udcdd Editing entry ID:",s),console.log("\ud83d\udcca Update data:",e),Te(!0);try{await Xe(s,e),console.log("\u2705 Entry updated successfully:",e),g(null),b(null),sessionStorage.removeItem("importedEntryData"),sessionStorage.removeItem("cameFromDashboard"),Fe(e.title),Ce(!0)}finally{Te(!1)}}else{if(e.team_member_id&&e.type){ft(e.team_member_id,e.type)&&_(!0)}await Ge(e);Qe();try{sessionStorage.setItem("entryCreated","1")}catch(n){}try{localStorage.removeItem("kb_entry_draft"),localStorage.removeItem("kb_draft"),localStorage.removeItem("kb_drafts"),Object.keys(localStorage).forEach(e=>{(e.startsWith("kb_entry_")||e.startsWith("entry_draft_")||e.startsWith("kb_draft")||e.includes("draft")||e.includes("autosave"))&&localStorage.removeItem(e)}),sessionStorage.setItem("entryJustCreated","1"),console.log("\ud83c\udf89 Entry created successfully, set entryJustCreated flag"),console.log("Cleared all entry drafts and autosaves from localStorage")}catch(ou){console.warn("Failed to clear localStorage drafts:",ou)}Fe(e.title),Ee(!0),b(null),sessionStorage.removeItem("importedEntryData"),sessionStorage.removeItem("cameFromDashboard"),setTimeout(()=>{Ee(!1),Ce(!0)},2e3)}try{localStorage.removeItem("kb_entry_draft")}catch(r){}g(null)}catch(a){console.error("Error saving entry:",a),Ee(!1);const e=a&&a.message?String(a.message):"Please try again.";alert("Failed to save entry: ".concat(e))}finally{y.current.delete(t)}}},onCancel:()=>{b(null),sessionStorage.removeItem("importedEntryData"),sessionStorage.removeItem("cameFromDashboard"),l("/dashboard")},onShowIncompleteEntriesModal:e=>{se(e),re(!0)},isUpdatingEntry:Pe})}),"view"===f&&p&&(0,fi.jsx)(pc,{entry:tt(p),onEdit:()=>bt(p),onDelete:()=>xt(p),onExport:()=>st(tt(p)),teamMemberNames:vt})]}),(0,fi.jsx)(wc,{show:x,onComplete:()=>_(!1)}),(0,fi.jsx)(Jl,{isOpen:w,onClose:jt,title:1===j?"Choose clear option":"all"===S?"You are deleting all law entries IN THE ENTIRE DATABASE.":"unreleased"===S?"You are deleting all UNRELEASED entries.":"released"===S?"You are deleting all RELEASED entries.":"You are deleting all law entries for TODAY.",subtitle:2===j?"Would you like to continue?":null,children:1===j?(0,fi.jsxs)("div",{className:"modal-options",children:[(0,fi.jsx)("button",{className:"modal-option",onClick:()=>kt("unreleased"),children:"Unreleased"}),(0,fi.jsx)("button",{className:"modal-option",onClick:()=>kt("released"),children:"Released"}),(0,fi.jsx)("button",{className:"modal-option",onClick:()=>kt("all"),children:"All"}),(0,fi.jsx)("button",{className:"modal-option cancel",onClick:jt,children:"Go Back"})]}):(0,fi.jsxs)("div",{className:"modal-buttons",children:[(0,fi.jsx)("button",{className:"modal-button danger",onClick:()=>{try{if("all"===S)Ct().then(async e=>{null!==e&&void 0!==e&&e.success||console.warn("Vector clear all failed:",null===e||void 0===e?void 0:e.error),ot();try{localStorage.removeItem("law_entries"),sessionStorage.clear()}catch(t){}alert("All entries have been cleared from the database.")});else if("unreleased"===S)Ct(null,"unreleased").then(async e=>{null!==e&&void 0!==e&&e.success||console.warn("Vector clear unreleased failed:",null===e||void 0===e?void 0:e.error);const t=Ze.filter(e=>"released"===e.status);Je(t);try{localStorage.removeItem("law_entries")}catch(n){}alert("Unreleased entries have been cleared from the database.")});else if("released"===S)Ct(null,"released").then(async e=>{null!==e&&void 0!==e&&e.success||console.warn("Vector clear released failed:",null===e||void 0===e?void 0:e.error);const t=Ze.filter(e=>"released"!==e.status);Je(t);try{localStorage.removeItem("law_entries")}catch(n){}alert("Released entries have been cleared from the database.")});else{const e=(new Date).toISOString().split("T")[0];Ct(e).then(async t=>{null!==t&&void 0!==t&&t.success||console.warn("Vector clear today failed:",null===t||void 0===t?void 0:t.error);Ze.filter(t=>new Date(t.created_at).toISOString().split("T")[0]!==e);try{localStorage.removeItem("law_entries")}catch(n){}alert("Today's entries have been cleared from the database.")})}k(!1),N(1),C(null)}catch(e){console.error("Error clearing entries:",e),alert("Error clearing entries. Please try again.")}},children:"Yes"}),(0,fi.jsx)("button",{className:"modal-button cancel",onClick:jt,children:"No"})]})}),(0,fi.jsx)(Jl,{isOpen:D,onClose:()=>E(!1),title:"Previous Session Found",subtitle:"Would you like to continue inputting?",children:(0,fi.jsxs)("div",{className:"modal-buttons",children:[(0,fi.jsx)("button",{className:"modal-button orange-outline",onClick:async()=>{ze(!0);try{g(A||null),E(!1),sessionStorage.setItem("cameFromDashboard","true"),l("/law-entry/1")}finally{ze(!1)}},disabled:Le||Be,children:Le?"Loading...":"Yes, continue inputting"}),(0,fi.jsx)("button",{className:"modal-button cancel",onClick:async()=>{Ve(!0);try{try{localStorage.removeItem("kb_entry_draft"),localStorage.removeItem("kb_draft"),localStorage.removeItem("kb_drafts"),Object.keys(localStorage).forEach(e=>{(e.startsWith("kb_entry_")||e.startsWith("entry_draft_")||e.startsWith("kb_draft")||e.includes("draft")||e.includes("autosave"))&&localStorage.removeItem(e)}),console.log("\ud83e\uddf9 Cleared all drafts when starting new entry")}catch(ou){console.warn("Failed to clear drafts:",ou)}sessionStorage.setItem("entryJustCreated","1"),console.log("\ud83e\uddf9 Set entryJustCreated flag to prevent draft loading"),F(null),E(!1),g(null),sessionStorage.setItem("cameFromDashboard","true"),console.log("\ud83e\uddf9 Navigating to clean form after clearing drafts"),l("/law-entry/1")}finally{Ve(!1)}},disabled:Le||Be,children:Be?"Loading...":"No, create new entry"})]})}),(0,fi.jsx)(kc,{isOpen:ue,message:"Importing Entry...",subtitle:"Please wait while we process your import..."}),(0,fi.jsx)(kc,{isOpen:Pe,message:"Updating Entry...",subtitle:"Please wait while we update your entry..."}),(0,fi.jsx)(Jl,{isOpen:ie,onClose:()=>oe(!1),title:"Import Successful!",subtitle:"Successfully imported ".concat(le," ").concat(1===le?"entry":"entries","."),children:(0,fi.jsx)("div",{className:"modal-buttons",children:(0,fi.jsx)("button",{className:"modal-button success",onClick:()=>oe(!1),children:"Hell Yeah! \ud83c\udf89"})})}),(0,fi.jsx)(Jl,{isOpen:ne,onClose:wt,title:"You have unfinished quotas from yesterday",subtitle:ae?'"'.concat(ae.title,'" (').concat(ae.type,") will be credited to missing progress"):"New entry will be credited to missing progress",children:(0,fi.jsxs)("div",{className:"modal-buttons",children:[(0,fi.jsx)("button",{className:"modal-button orange",onClick:()=>{if(ae){const e=new Date,t=new Date(e);t.setDate(t.getDate()-1),ae.created_at=t.toISOString(),console.log("Setting created_at to yesterday:",{originalDate:e.toISOString(),yesterdayDate:t.toISOString(),entryTitle:ae.title,entryType:ae.type}),Ge(ae),Ne(!0),se(null),re(!1)}},children:"I understand"}),(0,fi.jsx)("button",{className:"modal-button orange-outline",onClick:wt,children:"Cancel"})]})}),(0,fi.jsx)(Jl,{isOpen:je,onClose:()=>{},title:"Entry Created Successfully!",subtitle:ae?ae.created_at&&new Date(ae.created_at).getDate()!==(new Date).getDate()?'"'.concat(ae.title,"\" has been saved and credited to yesterday's progress."):'"'.concat(ae.title,'" has been saved successfully.'):"Entry has been saved successfully.",children:(0,fi.jsx)("div",{className:"modal-buttons",children:(0,fi.jsx)("button",{className:"modal-button orange",disabled:!0,style:{opacity:.6,cursor:"not-allowed"},children:"Auto-closing in 5 seconds..."})})}),(0,fi.jsx)(Jl,{isOpen:P,onClose:_t,title:"Delete Entry",subtitle:O?'Are you sure you want to delete "'.concat(O.title,'"?'):"Are you sure you want to delete this entry?",children:(0,fi.jsxs)("div",{className:"modal-buttons",children:[(0,fi.jsx)("button",{className:"modal-button danger",onClick:async()=>{if(O){We(!0);try{const t=Ze.filter(e=>{const t=Array.isArray(e.legal_bases)?e.legal_bases:[],n=Array.isArray(e.related_sections)?e.related_sections:[],r=t.some(e=>e&&(e.entry_id===O.entry_id||e.entry_id===O.id)),a=n.some(e=>e&&(e.entry_id===O.entry_id||e.entry_id===O.id));return r||a});if(t.length>0){const e=t.map(e=>"\u2022 ".concat(e.title," (").concat(e.entry_id||e.id,")")).join("\n");if(!window.confirm("This entry is cited internally by ".concat(t.length," other entries.\n\n").concat(e,"\n\nProceed with deletion? Those references will be removed automatically.")))return}await et(O.id);for(const n of t){const t=Array.isArray(n.legal_bases)?n.legal_bases:[],r=Array.isArray(n.related_sections)?n.related_sections:[],a=t.filter(e=>e&&e.entry_id!==O.entry_id&&e.entry_id!==O.id),s=r.filter(e=>e&&e.entry_id!==O.entry_id&&e.entry_id!==O.id);if(a.length!==t.length||s.length!==r.length)try{await Xe(n.id,{legal_bases:a,related_sections:s})}catch(e){console.warn("Failed to clean references for",n.id,e)}}"view"===f&&p===O.id&&(l("/dashboard"),m(null)),O.id&&St(O.id).catch(e=>console.warn("Vector delete error:",e)),T(!1),I(null)}catch(e){console.error("Error deleting entry:",e),alert("Failed to delete entry. Please try again.")}finally{We(!1)}}},disabled:Ue,children:Ue?"Deleting...":"Yes, Delete"}),(0,fi.jsx)("button",{className:"modal-button cancel",onClick:_t,children:"Cancel"})]})}),(0,fi.jsx)(kc,{isOpen:De,title:"Creating Entry...",subtitle:'"'.concat(Ae,'" is being saved to the database and indexed.')}),(0,fi.jsx)(Jl,{isOpen:Se,onClose:()=>{},title:"Entry Saved Successfully!",subtitle:'"'.concat(Ae,'" has been saved to the database and indexed.'),children:(0,fi.jsx)("div",{className:"modal-buttons",children:(0,fi.jsx)("button",{className:"modal-button orange",disabled:!0,style:{opacity:.6,cursor:"not-allowed"},children:"Auto-closing in 5 seconds..."})})}),(0,fi.jsx)(jc,{isOpen:pe,onClose:()=>me(!1),onImport:async e=>{de(!0),me(!1);try{const t=await it(e,d);de(!1),t.success?(sessionStorage.setItem("importedEntryData",JSON.stringify(t.data)),b(t.data),sessionStorage.setItem("cameFromDashboard","true"),window.location.pathname.startsWith("/law-entry/")||l("/law-entry/1")):alert("Import failed: ".concat(t.error))}catch(t){console.error("Error importing entries:",t),de(!1),alert("Failed to import entries. Please check the JSON format.")}}}),(0,fi.jsx)(Ac,{isOpen:ge,onClose:()=>{ye(!1),be(null)},onSuccess:()=>{try{localStorage.setItem("lastScrapeCompleted","1")}catch(e){}},initialSessionId:ve}),(0,fi.jsx)(Fc,{isOpen:L,onClose:()=>z(!1)}),B&&(0,fi.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(17,24,39,0.95)",color:"white",padding:"12px 16px",borderRadius:8,zIndex:9999,transition:"opacity 300ms ease",opacity:U},children:"No Scrape Batches found"}),(0,fi.jsx)(Pc,{isOpen:xe,onClose:()=>_e(!1),draftEntries:we,onReleaseAll:async()=>{try{const e=await fetch("".concat(Kc,"/api/scraping/release-all-entries"),{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();t.success?(alert("Successfully released ".concat(t.released_count," entries!")),_e(!1),ke([]),window.location.reload()):alert("Failed to release entries")}catch(Ke){console.error("Error releasing entries:",Ke),alert("Failed to release entries")}}}),(0,fi.jsx)(Bc,{isOpen:G,onClose:()=>X(!1)})]})}const su=function(){return(0,fi.jsx)(Dc,{children:(0,fi.jsxs)(Wc,{children:[(0,fi.jsx)(Gc,{}),(0,fi.jsx)(Hc,{})]})})},iu=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:s,getTTFB:i}=t;n(e),r(e),a(e),s(e),i(e)})};a.createRoot(document.getElementById("root")).render((0,fi.jsx)(r.StrictMode,{children:(0,fi.jsx)(su,{})})),iu()})();
//# sourceMappingURL=main.f5bd37c1.js.map